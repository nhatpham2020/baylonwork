{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/appearance-controls/appearance-controls.component.css","webpack:///./src/app/appearance-controls/appearance-controls.component.html","webpack:///./src/app/appearance-controls/appearance-controls.component.ts","webpack:///./src/app/appearance-controls/undo-manager.ts","webpack:///./src/app/babylon-viewer/babylon-viewer.component.css","webpack:///./src/app/babylon-viewer/babylon-viewer.component.html","webpack:///./src/app/babylon-viewer/babylon-viewer.component.ts","webpack:///./src/app/customizer-data.service.ts","webpack:///./src/app/login-modal/login-modal.component.css","webpack:///./src/app/login-modal/login-modal.component.html","webpack:///./src/app/login-modal/login-modal.component.ts","webpack:///./src/app/nav-bar/nav-bar.component.css","webpack:///./src/app/nav-bar/nav-bar.component.html","webpack:///./src/app/nav-bar/nav-bar.component.ts","webpack:///./src/app/notifier.service.ts","webpack:///./src/app/share-modal/config.ts","webpack:///./src/app/share-modal/share-modal.component.css","webpack:///./src/app/share-modal/share-modal.component.html","webpack:///./src/app/share-modal/share-modal.component.ts","webpack:///./src/app/user.service.ts","webpack:///./src/app/utils/ExportCommon.ts","webpack:///./src/app/utils/Facebook.ts","webpack:///./src/app/utils/GIFExport.ts","webpack:///./src/app/utils/GIFExportPreview.ts","webpack:///./src/app/utils/GIFUpload.ts","webpack:///./src/app/utils/RawExportPreview.ts","webpack:///./src/app/utils/Socket.js","webpack:///./src/app/utils/TarExport.ts","webpack:///./src/app/utils/Twitter.ts","webpack:///./src/app/viewer.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///./src/providers/api-service.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\"","module.exports = \"<app-nav-bar></app-nav-bar>\\r\\n<app-babylon-viewer class=\\\"flex-grow-1\\\"></app-babylon-viewer>\\r\\n<app-appearance-controls></app-appearance-controls>\\r\\n\"","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'gun-customizer';\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\nimport { InlineSVGModule } from 'ng-inline-svg';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { BabylonViewerComponent } from './babylon-viewer/babylon-viewer.component';\r\nimport { NavBarComponent } from './nav-bar/nav-bar.component';\r\nimport { AppearanceControlsComponent } from './appearance-controls/appearance-controls.component';\r\nimport { ShareModalComponent } from './share-modal/share-modal.component';\r\nimport { LoginModalComponent } from './login-modal/login-modal.component';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { FormsModule } from '@angular/forms'\r\nimport { ColorPickerModule } from 'ngx-color-picker';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    BabylonViewerComponent,\r\n    NavBarComponent,\r\n    AppearanceControlsComponent,\r\n    ShareModalComponent,\r\n    LoginModalComponent\r\n  ],\r\n  imports: [\r\n    FormsModule,\r\n    BrowserModule,\r\n    HttpClientModule,\r\n    ModalModule.forRoot(),\r\n    InlineSVGModule.forRoot(),\r\n    ColorPickerModule\r\n  ],\r\n  providers: [CookieService],\r\n  entryComponents: [LoginModalComponent, ShareModalComponent],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","module.exports = \".gun-selector a *,\\r\\n.weapon-option a *,\\r\\n.pack-selector a *,\\r\\n.option-editor a *{\\r\\n    vertical-align: middle;\\r\\n}\\r\\n\\r\\n.gun-selector a {\\r\\n    margin: auto 0;\\r\\n}\\r\\n\\r\\n.gun-selector .material-icons {\\r\\n    font-size: 2em;\\r\\n}\\r\\n\\r\\n.weapon-icon {\\r\\n    display: inline-block;\\r\\n    width: 8em;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.weapon-name {\\r\\n    display: inline-block;\\r\\n    width: 8em;\\r\\n}\\r\\n\\r\\n.section-selector {\\r\\n    background-color: #DADADA;\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.vertical-divider {\\r\\n    display: inline-block;\\r\\n    height: auto;\\r\\n    margin: 1em 0;\\r\\n    border: 1px solid;\\r\\n}\\r\\n\\r\\n.section-icon {\\r\\n    height: 2em;\\r\\n    min-width: 2em;\\r\\n    margin: 0 auto;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.all-options {\\r\\n    position: absolute;\\r\\n    left: 0;\\r\\n    bottom: 100%;\\r\\n    transition: left 0.4s ease-in-out;\\r\\n}\\r\\n\\r\\n.all-options.put-away {\\r\\n    left: -100%;\\r\\n}\\r\\n\\r\\n.options-container {\\r\\n    white-space: nowrap;\\r\\n    overflow: hidden;\\r\\n    scroll-behavior: smooth;\\r\\n}\\r\\n\\r\\n.section-option {\\r\\n    display: inline-block;\\r\\n    text-align: center;\\r\\n    height: 4em;\\r\\n}\\r\\n\\r\\n.section-option .display {\\r\\n    background-clip: border-box;\\r\\n    background-origin: border-box;\\r\\n    background-position: center;\\r\\n    background-repeat: no-repeat;\\r\\n    background-size: contain;\\r\\n    width: 4em;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n.section-option .display:hover,\\r\\n.section-option.active .display {\\r\\n    border: 2px solid #EC121F;\\r\\n}\\r\\n\\r\\n.section-option.first-of-set:not(:first-child) {\\r\\n    margin-left: 15px;\\r\\n}\\r\\n\\r\\n.undo-button {\\r\\n    position: absolute;\\r\\n    color: white;\\r\\n    top: 25%;\\r\\n    left: 40%;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n.arrow-controls {\\r\\n    font-size: 2.5em;\\r\\n    line-height: 0;\\r\\n}\\r\\n\\r\\n.arrow-controls .disabled {\\r\\n    color: darkgray;\\r\\n}\\r\\n\\r\\n.mcontainer{\\r\\n  position:relative;\\r\\n}\\r\\n\\r\\n.deployBtn, .deployBtn2{\\r\\n  position:absolute;\\r\\n  right:20px;\\r\\n  top:-45px;\\r\\n  border-radius: 15px;\\r\\n  border: none;\\r\\n}\\r\\n\\r\\n.weapon-visiblity{\\r\\n  padding:5px;\\r\\n  font-size:1.2em;\\r\\n}\\r\\n\\r\\n.pack-selector{\\r\\n  background: #444;\\r\\n  position:relative;\\r\\n}\\r\\n\\r\\n.pack-selector ul {\\r\\n  list-style-type: none;\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\n.pack-selector li {\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n.pack-selector li a {\\r\\n  display: block;\\r\\n  text-align: center;\\r\\n  padding: 2px 16px;\\r\\n  text-decoration: none;\\r\\n}\\r\\n\\r\\n.pack-selector a{\\r\\n  color:#e0e0e0;\\r\\n}\\r\\n\\r\\n.pack-selector li a:hover , .pack-selector li.active a,.pack-selector .addPack:hover{\\r\\n  background-color: #222;\\r\\n  color:#fff;\\r\\n}\\r\\n\\r\\n.pack-selector .addPack{\\r\\n  position:absolute;\\r\\n  right:15px;\\r\\n  top:0;\\r\\n  cursor: pointer;\\r\\n  padding:2px;\\r\\n  vertical-align: middle;\\r\\n  color: #e0e0e0;\\r\\n}\\r\\n\\r\\n.pack-selector .newPack i,.pack-selector .newPack a{\\r\\n  color: #ff0;\\r\\n}\\r\\n\\r\\n.pack-selector .delNewPack{\\r\\n\\r\\n}\\r\\n\\r\\n.pack-selector .delNewPack:hover{\\r\\n  color:#e00000;\\r\\n}\\r\\n\\r\\n.arrow-controls{\\r\\n\\r\\n}\\r\\n\\r\\n.arrow-controls .addOption{\\r\\n  font-size:1.5em;\\r\\n  color:#222;\\r\\n}\\r\\n\\r\\n.options-container .newOption{\\r\\n  border: 2px solid #f00;\\r\\n  box-shadow:0 0 3px #A00;\\r\\n}\\r\\n\\r\\n.option-editor{\\r\\n  height: 30px;\\r\\n  padding: 0 50px 0 80px;\\r\\n  margin:0;\\r\\n }\\r\\n\\r\\n.option-editor .editor-option{\\r\\n  padding: 2px;\\r\\n  margin: 0 3px;\\r\\n}\\r\\n\\r\\n.option-editor .editor-option:hover i{\\r\\n  color: red;\\r\\n}\\r\\n\\r\\n.optionDisplayImg{\\r\\n  width:100%;\\r\\n  height:100%;\\r\\n}\\r\\n\"","module.exports = \"<div class=\\\"mt-2 mb-2 col-12\\\" style=\\\"text-align: right;padding-right: 20px;\\\" *ngIf=\\\"isAdmin\\\">\\r\\n  <button style=\\\"background: #444444; border: #444444;\\\" (click)=\\\"deployPackData()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\">Deploy</button>\\r\\n</div>\\r\\n<div class=\\\"container-fluid\\\">\\r\\n  <div class=\\\"row section-selector\\\">\\r\\n    <div class=\\\"col-auto gun-selector d-flex\\\">\\r\\n      <a href=\\\"#\\\" (click)=\\\"toggleChoices($event)\\\">\\r\\n        <i class=\\\"material-icons\\\">{{hideWeaponChoices ? 'expand_less' : 'expand_more'}}</i>\\r\\n        <div class=\\\"weapon-icon contain-svg\\\" *ngIf=\\\"chosenWeapon && chosenWeapon.svgPath\\\" [inlineSVG]=\\\"chosenWeapon.svgPath\\\"></div>\\r\\n        <div class=\\\"p-2 weapon-name\\\" *ngIf=\\\"chosenWeapon && chosenWeapon.name\\\">{{chosenWeapon.name}}</div>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"vertical-divider\\\"></div>\\r\\n    <div class=\\\"mt-2 mb-2 col-auto\\\" *ngFor=\\\"let section of allSections\\\">\\r\\n      <a [class.active]=\\\"section == activeSection()\\\" href=\\\"#\\\" (click)=\\\"changeSection($event, section)\\\">\\r\\n        <div class=\\\"section-icon contain-svg\\\" [inlineSVG]=\\\"section.svgPath\\\"></div>\\r\\n        <div>{{section.name}}</div>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"col-auto all-options\\\" [class.put-away]=\\\"hideWeaponChoices\\\">\\r\\n      <div class=\\\"weapon-option\\\" *ngFor=\\\"let weapon of (customizationData || {}).weapons\\\">\\r\\n        <i style=\\\"cursor: pointer;margin-right:5px\\\" *ngIf=\\\"weapon.visible && isAdmin\\\" (click)=\\\"setVisibleofWeapon(weapon ,false)\\\" class=\\\"material-icons md-inherit\\\">visibility</i>\\r\\n        <i style=\\\"cursor: pointer;margin-right:5px\\\" *ngIf=\\\"!weapon.visible  && isAdmin\\\" (click)=\\\"setVisibleofWeapon(weapon ,true)\\\" class=\\\"material-icons md-inherit\\\">visibility_off</i>\\r\\n        <a class=\\\"d-inline-block\\\" href=\\\"#\\\" [class.active]=\\\"weapon == chosenWeapon\\\" (click)=\\\"chooseWeapon($event, weapon)\\\">\\r\\n          <div class=\\\"weapon-icon contain-svg\\\" [inlineSVG]=\\\"weapon.svgPath\\\"></div>\\r\\n          <div class=\\\"p-2 weapon-name\\\">{{weapon.name}}</div>\\r\\n        </a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div class=\\\"row pack-selector\\\">\\r\\n    <ul>\\r\\n      <li [class.active]=\\\"allitemSelected\\\">\\r\\n        <a href=\\\"#\\\" (click)=\\\"selectPack(null)\\\">ALL</a>\\r\\n      </li>\\r\\n      <li *ngFor=\\\"let pack of packArray\\\" [class.active]=\\\"pack == selectedPack\\\">\\r\\n        <ng-container>\\r\\n          <a style=\\\"float: left;padding-right: 5px;\\\" href=\\\"#\\\" (click)=\\\"selectPack(pack)\\\">\\r\\n            {{pack.name}}\\r\\n          </a>\\r\\n          <!--<a href=\\\"#\\\">edit </a>\\r\\n          <a href=\\\"#\\\">delete </a>\\r\\n          <a href=\\\"#\\\">visible </a>-->\\r\\n          <div style=\\\"display:inline-flex\\\" *ngIf=\\\"selectedPack && selectedPack._id == pack._id && isAdmin\\\" class=\\\"option-editor-options\\\">\\r\\n\\r\\n            <a style=\\\"padding-left: 4px;padding-right: 0px;\\\" (click) =\\\"movePackLeft(pack)\\\" >\\r\\n              <i style=\\\"cursor: pointer;\\\" class=\\\"material-icons md-inherit\\\">keyboard_arrow_left</i>\\r\\n            </a>\\r\\n\\r\\n            <a style=\\\"padding-left: 4px;padding-right: 0px;\\\" (click) =\\\"movePackRight(pack)\\\">\\r\\n              <i style=\\\"cursor: pointer;\\\" class=\\\"material-icons md-inherit\\\">keyboard_arrow_right</i>\\r\\n            </a>\\r\\n\\r\\n\\r\\n            <a style=\\\"padding-left: 4px;padding-right: 0px;\\\">\\r\\n              <i style=\\\"cursor: pointer;\\\" *ngIf=\\\"pack.visible\\\" (click)=\\\"setVisibleofPack(pack ,false)\\\" class=\\\"material-icons md-inherit\\\">visibility</i>\\r\\n              <i style=\\\"cursor: pointer;\\\" *ngIf=\\\"!pack.visible\\\" (click)=\\\"setVisibleofPack(pack ,true)\\\" class=\\\"material-icons md-inherit\\\">visibility_off</i>\\r\\n            </a>\\r\\n            <a style=\\\"padding-left: 4px;padding-right: 0px;\\\" (click)=\\\"openEditPack(pack)\\\">\\r\\n              <i style=\\\"cursor: pointer;\\\" class=\\\"material-icons md-inherit\\\">edit</i>\\r\\n            </a>\\r\\n            <a style=\\\"padding-left: 4px;padding-right: 0px;\\\" (click)=\\\"openDeletePack(pack)\\\">\\r\\n              <i style=\\\"cursor: pointer;\\\" class=\\\"material-icons md-inherit\\\">close</i>\\r\\n            </a>\\r\\n          </div>\\r\\n        </ng-container>\\r\\n        <ng-container *ngIf=\\\"!userLoggedIn\\\">\\r\\n          <a *ngIf=\\\"pack.status==='V'\\\" href=\\\"#\\\" (click)=\\\"selectPack(pack)\\\">{{pack.name}}</a>\\r\\n        </ng-container>\\r\\n      </li>\\r\\n\\r\\n      <li *ngFor=\\\"let pack of newPackArray\\\" [class.newPack]=\\\"true\\\">\\r\\n        <a (click)=\\\"newPackClicked($event)\\\">\\r\\n          {{pack.name}}\\r\\n          <i class=\\\"material-icons md-inherit delNewPack\\\" (click)=\\\"delNewPack(pack)\\\">close</i>\\r\\n        </a>\\r\\n      </li>\\r\\n\\r\\n    </ul>\\r\\n    <div class=\\\"addPack\\\" (click)=\\\"openAddPackModel()\\\" *ngIf=\\\"isAdmin\\\">\\r\\n      <i class=\\\"material-icons md-inherit\\\">add</i>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"row option-editor\\\" *ngIf=\\\"isAdmin\\\">\\r\\n    <div class=\\\"option-editor-options\\\">\\r\\n\\r\\n      <a *ngIf=\\\"allitemSelected == false && selectedItem\\\" class=\\\"editor-option editOption\\\" style=\\\"cursor: pointer;\\\">\\r\\n        <i style=\\\"cursor: pointer;\\\" (click)=\\\"moveLeft(selectedItem)\\\" class=\\\"material-icons md-inherit\\\">keyboard_arrow_left</i>\\r\\n      </a>\\r\\n\\r\\n      <a *ngIf=\\\"allitemSelected == false && selectedItem\\\" class=\\\"editor-option editOption\\\" style=\\\"cursor: pointer;\\\">\\r\\n        <i style=\\\"cursor: pointer;\\\" (click)=\\\"moveRight(selectedItem)\\\" class=\\\"material-icons md-inherit\\\">keyboard_arrow_right</i>\\r\\n      </a>\\r\\n\\r\\n      <a *ngIf=\\\"allitemSelected == false && selectedItem\\\" class=\\\"editor-option toggleOptionVisibility\\\" style=\\\"cursor: pointer;\\\">\\r\\n        <i *ngIf=\\\"selectedItem.visible\\\" (click)=\\\"setVisible(false)\\\" class=\\\"material-icons md-inherit\\\">visibility</i>\\r\\n        <i *ngIf=\\\"!selectedItem.visible\\\" (click)=\\\"setVisible(true)\\\" class=\\\"material-icons md-inherit\\\">visibility_off</i>\\r\\n      </a>\\r\\n      <a *ngIf=\\\"allitemSelected == false && selectedItem\\\" (click)=\\\"editOption()\\\" class=\\\"editor-option editOption\\\" style=\\\"cursor: pointer;\\\">\\r\\n        <i class=\\\"material-icons md-inherit\\\">edit</i>\\r\\n      </a>\\r\\n      <a  *ngIf=\\\"allitemSelected == false && selectedItem\\\"(click)=\\\"openDeleteModel()\\\" class=\\\"editor-option delOption\\\" style=\\\"cursor: pointer;\\\">\\r\\n        <i class=\\\"material-icons md-inherit\\\">close</i>\\r\\n      </a>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div class=\\\"row option-browser\\\">\\r\\n    <div class=\\\"mt-3 mb-3 col-auto\\\" *ngIf=\\\"(activeSection() || {}).globalReset\\\">\\r\\n      <!-- [class.active]=\\\"activeTracking().resetActive\\\" -->\\r\\n      <a class=\\\"section-option\\\" href=\\\"#\\\" title=\\\"undo\\\"\\r\\n         (click)=\\\"resetPressed($event)\\\">\\r\\n        <div class=\\\"display\\\" [style.opacity]=\\\"(undoManagerLimit()+3)/(9+3)\\\" style=\\\"background-image: url('assets/img/nav-icons/arrow.png');\\\">\\r\\n          <span class=\\\"undo-button\\\">{{ undoManagerLimit() }}</span>\\r\\n        </div>\\r\\n      </a>\\r\\n      <!-- <a class=\\\"section-option\\\" href=\\\"#\\\" title=\\\"redo\\\"\\r\\n          (click)=\\\"redoPressed($event)\\\">\\r\\n         <div class=\\\"display\\\" style=\\\"background-image: url('assets/img/nav-icons/arrow.png');\\\"></div>\\r\\n       </a> -->\\r\\n    </div>\\r\\n    <div #optionsContainer class=\\\"mt-3 mb-3 col options-container\\\">\\r\\n      <ng-container *ngFor=\\\"let optionGroup of (activeSection() || {}).optionGroups\\\">\\r\\n        <ng-container *ngFor=\\\"let option of optionGroup.options; let isFirst = first\\\">\\r\\n          <a class=\\\"section-option\\\" href=\\\"#\\\"\\r\\n             *ngIf=\\\"allitemSelected || (selectedPack && selectedPack._id === option.pack_id)\\\"\\r\\n             [class.first-of-set]=\\\"isFirst\\\"\\r\\n             [class.active1]=\\\" (option === selectedOption(optionGroup))\\\"\\r\\n             [class.active]=\\\"selectedOption1(option, optionGroup)\\\"\\r\\n             (click)=\\\"optionClicked($event, optionGroup, option)\\\">\\r\\n            <div *ngIf=\\\"option.type != 'MAT' && option.type != 'PAT'\\\" class=\\\"display\\\" [id]=\\\"option.displayImg ? ('url(\\\\'' + option.displayImg + '\\\\')') : ''\\\" [style.backgroundColor]=\\\"option.displayColor || ''\\\"></div>\\r\\n            <img *ngIf=\\\"option.type == 'MAT' || option.type == 'PAT'\\\" [src]=\\\"option.displayImg\\\" style=\\\"height: 4em;            width: 4em;\\\" />\\r\\n          </a>\\r\\n        </ng-container>\\r\\n        <!-- allitemSelected -->\\r\\n\\r\\n      </ng-container>\\r\\n    </div>\\r\\n    <div class=\\\"mt-3 mb-3 col-auto arrow-controls d-flex\\\">\\r\\n      <a class=\\\"m-auto\\\" *ngIf=\\\"isAdmin\\\"\\r\\n         (click)=\\\"openModel()\\\">\\r\\n        <i class=\\\"material-icons md-inherit addOption\\\">add</i>\\r\\n      </a>\\r\\n      <a class=\\\"m-auto\\\" href=\\\"#\\\"\\r\\n         (click)=\\\"scrollOptionsLeft($event)\\\"\\r\\n         [class.disabled]=\\\"optionsContainer.scrollLeft === 0\\\">\\r\\n        <i class=\\\"material-icons md-inherit\\\">arrow_left</i>\\r\\n      </a>\\r\\n      <a class=\\\"m-auto\\\" href=\\\"#\\\"\\r\\n         (click)=\\\"scrollOptionsRight($event)\\\"\\r\\n         [class.disabled]=\\\"(optionsContainer.scrollLeft + optionsContainer.clientWidth) >= optionsContainer.scrollWidth\\\">\\r\\n        <i class=\\\"material-icons md-inherit\\\">arrow_right</i>\\r\\n      </a>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<div class=\\\"modal\\\" style=\\\" overflow-y: scroll;\\\" id=\\\"my-modal\\\" role=\\\"dialog\\\">\\r\\n  <div class=\\\"modal-dialog\\\">\\r\\n    <!-- Modal content-->\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <h4 *ngIf=\\\"!isEdit\\\">Add New Material</h4>\\r\\n        <h4 *ngIf=\\\"isEdit\\\">Edit Material</h4>\\r\\n        <button (click)=\\\"hideModal('my-modal')\\\" type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n        <div _ngcontent-c6=\\\"\\\" class=\\\"row\\\">\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-12\\\">\\r\\n            <p> Please fill in the fields to add new material. </p>\\r\\n          </div>\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <label _ngcontent-c6=\\\"\\\">Name</label>\\r\\n            <input _ngcontent-c6=\\\"\\\" class=\\\"form-control ng-untouched ng-pristine ng-valid\\\" [(ngModel)]=\\\"name\\\" type=\\\"text\\\">\\r\\n          </div>\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <label>Color</label>\\r\\n            <!--<input class=\\\"form-control ng-untouched ng-pristine ng-valid\\\" type=\\\"text\\\" [(ngModel)]=\\\"colorCode\\\" ng-reflect-model=\\\"#000000\\\">-->\\r\\n            <input class=\\\"colorSample\\\" [value]=\\\"color\\\" style=\\\"width: 100%;color: white;padding-left: 5px;\\\" [(colorPicker)]=\\\"color\\\" [style.background]=\\\"color\\\" (colorPickerChange)=\\\"colorChanged($event)\\\" />\\r\\n          </div>\\r\\n          <!--<div class=\\\"col-12 form-group\\\">\\r\\n            <label>interactionValue</label>\\r\\n            <input _ngcontent-c6=\\\"\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"name\\\" type=\\\"text\\\" disabled=\\\"\\\">\\r\\n          </div>-->\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <label for=\\\"formControlRange\\\">Roughness</label>&nbsp;&nbsp;&nbsp;<b>{{roughness}}</b>\\r\\n            <div class=\\\"row\\\">\\r\\n              <div class=\\\"col-12\\\"><input class=\\\"form-control-range ng-untouched ng-pristine ng-valid\\\" id=\\\"formControlRange\\\" max=\\\"1\\\" min=\\\"0\\\" step=\\\"0.01\\\" [(ngModel)]=\\\"roughness\\\" type=\\\"range\\\" ng-reflect-model=\\\"0.32\\\"></div>\\r\\n              <!--<div class=\\\"col-4\\\"><input class=\\\"form-control-range ng-untouched ng-pristine ng-valid\\\" id=\\\"formControlRange\\\" max=\\\"1\\\" min=\\\"0\\\" step=\\\"0.01\\\" [(ngModel)]=\\\"roughness\\\" type=\\\"number\\\" ng-reflect-model=\\\"0.32\\\"></div>-->\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n              <div class=\\\"col-md-6 col-12\\\">\\r\\n                <label _ngcontent-c6=\\\"\\\">Display image</label>&nbsp;\\r\\n              </div>\\r\\n              <div class=\\\"col-md-6 col-12\\\" style=\\\"position:relative\\\">\\r\\n                <input accept=\\\"image/*\\\" (change)=\\\"fileEvent($event)\\\" style=\\\"position:absolute;width:115px;height:40px;opacity:0\\\" type=\\\"file\\\">\\r\\n                <button class=\\\"btn btn-success\\\" type=\\\"button\\\">Select image</button>\\r\\n              </div>\\r\\n              <div class=\\\"col-12 imgHolder text-center mt-3\\\">\\r\\n\\r\\n                <img id=\\\"image\\\" width=\\\"128\\\" class=\\\"imageSample\\\" src=\\\"{{image}}\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-md-6 col-12 form-group tcenter\\\">\\r\\n            <div _ngcontent-c6=\\\"\\\" class=\\\"checkbox\\\">\\r\\n              <label _ngcontent-c6=\\\"\\\">\\r\\n                <input _ngcontent-c6=\\\"\\\" type=\\\"checkbox\\\" [(ngModel)]=\\\"isMetal\\\"> Is Metal\\r\\n              </label>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-md-6 col-12 form-group tcenter\\\">\\r\\n            <div _ngcontent-c6=\\\"\\\" class=\\\"checkbox\\\">\\r\\n              <label _ngcontent-c6=\\\"\\\"><input _ngcontent-c6=\\\"\\\" type=\\\"checkbox\\\" [(ngModel)]=\\\"visible\\\"> Visible</label>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-12 form-group\\\">\\r\\n            <button _ngcontent-c6=\\\"\\\" *ngIf=\\\"!isEdit\\\" (click)=\\\"addMaterial()\\\" class=\\\"btn btn-primary\\\">Add New Material</button>\\r\\n            <button _ngcontent-c6=\\\"\\\" *ngIf=\\\"isEdit\\\" (click)=\\\"editMaterial()\\\" class=\\\"btn btn-primary\\\">Edit Material</button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- <div class=\\\"modal-footer\\\">\\r\\n         <button (click)=\\\"closemodal()\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">Close</button>\\r\\n      </div> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<div class=\\\"modal\\\" style=\\\" overflow-y: scroll;\\\" id=\\\"addColor\\\" role=\\\"dialog\\\">\\r\\n  <div class=\\\"modal-dialog\\\">\\r\\n    <!-- Modal content-->\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <h4 *ngIf=\\\"!isEdit\\\">Add New Color</h4>\\r\\n        <h4 *ngIf=\\\"isEdit\\\">Edit Color</h4>\\r\\n        <button (click)=\\\"hideModal('addColor')\\\" type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n        <div _ngcontent-c6=\\\"\\\" class=\\\"row\\\">\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-12\\\">\\r\\n            <p> Please fill in the fields to add new Color. </p>\\r\\n          </div>\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <label _ngcontent-c6=\\\"\\\">Name</label>\\r\\n            <input _ngcontent-c6=\\\"\\\" placeholder=\\\"New Color\\\" [(ngModel)]=\\\"colorName\\\" class=\\\"form-control ng-untouched ng-pristine ng-valid\\\" type=\\\"text\\\">\\r\\n          </div>\\r\\n\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <label>Display color</label>\\r\\n            <!--<input class=\\\"form-control ng-untouched ng-pristine ng-valid\\\" type=\\\"text\\\" [(ngModel)]=\\\"colorCodeInColor\\\" ng-reflect-model=\\\"#000000\\\">-->\\r\\n            <input class=\\\"colorSample\\\" [value]=\\\"color\\\" style=\\\"width: 100%;color: white;padding-left: 5px;\\\" [(colorPicker)]=\\\"color\\\" [style.background]=\\\"color\\\" (colorPickerChange)=\\\"colorModelChanged($event)\\\" />\\r\\n          </div>\\r\\n\\r\\n          <!--<div class=\\\"col-12 form-group\\\">\\r\\n            <label>interactionValue</label>\\r\\n            <input placeholder=\\\"new color\\\" _ngcontent-c6=\\\"\\\" class=\\\"form-control\\\" type=\\\"text\\\" disabled=\\\"\\\">\\r\\n            <div class=\\\"colorSample\\\" style=\\\"background-color: rgb(0, 0, 0);\\\">&nbsp;</div>\\r\\n          </div>-->\\r\\n\\r\\n\\r\\n\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-md-6 col-12 form-group tcenter\\\">\\r\\n            <div _ngcontent-c6=\\\"\\\" class=\\\"checkbox\\\">\\r\\n              <label _ngcontent-c6=\\\"\\\"><input _ngcontent-c6=\\\"\\\" [(ngModel)]=\\\"visibleInColor\\\" type=\\\"checkbox\\\"> Visible</label>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-12 form-group\\\">\\r\\n            <button _ngcontent-c6=\\\"\\\" *ngIf=\\\"!isEdit\\\" (click)=\\\"addColor()\\\" class=\\\"btn btn-primary\\\">Add New Color</button>\\r\\n            <button _ngcontent-c6=\\\"\\\" *ngIf=\\\"isEdit\\\" (click)=\\\"editColor()\\\" class=\\\"btn btn-primary\\\">Edit Color</button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- <div class=\\\"modal-footer\\\">\\r\\n         <button (click)=\\\"closemodal()\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">Close</button>\\r\\n      </div> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<div class=\\\"modal\\\" style=\\\" overflow-y: scroll;\\\" id=\\\"patterns\\\" role=\\\"dialog\\\">\\r\\n  <div class=\\\"modal-dialog\\\">\\r\\n    <!-- Modal content-->\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <h4 *ngIf=\\\"!isEdit\\\">Add New Pattern</h4>\\r\\n        <h4 *ngIf=\\\"isEdit\\\">Edit Pattern</h4>\\r\\n        <button (click)=\\\"hideModal('patterns')\\\" type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n        <div _ngcontent-c6=\\\"\\\" class=\\\"row\\\">\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-12\\\">\\r\\n            <p> Please fill in the fields to add new Texture. </p>\\r\\n          </div>\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <label _ngcontent-c6=\\\"\\\">Name</label>\\r\\n            <input _ngcontent-c6=\\\"\\\" placeholder=\\\"New Pattern\\\" [(ngModel)]=\\\"patternName\\\" class=\\\"form-control ng-untouched ng-pristine ng-valid\\\" type=\\\"text\\\">\\r\\n          </div>\\r\\n\\r\\n          <div style=\\\"position: relative;\\\" class=\\\"col-12 imgHolder text-center mt-3\\\">\\r\\n            <input style=\\\"position: absolute;opacity: 0;  line-height: 121px;width: 128px;\\\" (change)=\\\"fileEvent($event)\\\" accept=\\\"image/*\\\" type=\\\"file\\\">\\r\\n            <img width=\\\"128\\\" id=\\\"image1\\\" class=\\\"imageSample\\\" src=\\\"{{patternImage}}\\\">\\r\\n          </div>\\r\\n\\r\\n          <!--<div class=\\\"col-12 form-group\\\">\\r\\n            <label>interactionValue</label>\\r\\n            <input placeholder=\\\"new color\\\" _ngcontent-c6=\\\"\\\" class=\\\"form-control\\\" type=\\\"text\\\" disabled=\\\"\\\">\\r\\n            <div class=\\\"colorSample\\\" style=\\\"background-color: rgb(0, 0, 0);\\\">&nbsp;</div>\\r\\n          </div>-->\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-md-6 col-12 form-group tcenter\\\">\\r\\n            <div _ngcontent-c6=\\\"\\\" class=\\\"checkbox\\\">\\r\\n              <label _ngcontent-c6=\\\"\\\"><input _ngcontent-c6=\\\"\\\" [(ngModel)]=\\\"visibleInPattern\\\" type=\\\"checkbox\\\"> Visible</label>\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n\\r\\n\\r\\n          <div _ngcontent-c6=\\\"\\\" class=\\\"col-12 form-group\\\">\\r\\n            <button _ngcontent-c6=\\\"\\\" *ngIf=\\\"!isEdit\\\" (click)=\\\"addPatternse()\\\" class=\\\"btn btn-primary\\\">Add New Texture</button>\\r\\n            <button _ngcontent-c6=\\\"\\\" *ngIf=\\\"isEdit\\\" (click)=\\\"editPatternse()\\\" class=\\\"btn btn-primary\\\">Edit Texture</button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- <div class=\\\"modal-footer\\\">\\r\\n         <button (click)=\\\"closemodal()\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">Close</button>\\r\\n      </div> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"modal\\\" style=\\\" overflow-y: scroll;\\\" id=\\\"addPack\\\" role=\\\"dialog\\\">\\r\\n  <div class=\\\"modal-dialog\\\">\\r\\n    <!-- Modal content-->\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <h4 *ngIf=\\\"!isEdit\\\">Add New Pack</h4>\\r\\n        <h4 *ngIf=\\\"isEdit\\\">Edit Pack</h4>\\r\\n        <button (click)=\\\"hideModal('addPack')\\\" type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-12\\\">\\r\\n            <p> Please fill in the fields to add new Pack. </p>\\r\\n          </div>\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <input placeholder=\\\"Name of the pack\\\" name=\\\"packname\\\" [(ngModel)]=\\\"packName\\\" class=\\\"form-control\\\" type=\\\"text\\\">\\r\\n          </div>\\r\\n\\r\\n          <!-- <div class=\\\"col-12 form-group\\\">\\r\\n            <select class=\\\"form-control ng-untouched ng-pristine ng-valid\\\" [(ngModel)]=\\\"packtype\\\">\\r\\n              <option value=\\\"MATERIALS\\\">Material</option>\\r\\n              <option value=\\\"COLORS\\\">Colors</option>\\r\\n              <option value=\\\"PATTERNS\\\">Patterns</option>\\r\\n            </select>\\r\\n          </div> -->\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n          <div class=\\\"col-12 form-group\\\">\\r\\n            <button *ngIf=\\\"!isEdit\\\" (click)=\\\"addPack()\\\" class=\\\"btn btn-primary\\\">Add New Pack</button>\\r\\n            <button *ngIf=\\\"isEdit\\\" (click)=\\\"editPack()\\\" class=\\\"btn btn-primary\\\">Edit Pack</button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- <div class=\\\"modal-footer\\\">\\r\\n         <button (click)=\\\"closemodal()\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">Close</button>\\r\\n      </div> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<div class=\\\"modal \\\" id=\\\"deletModel\\\" role=\\\"dialog\\\" style=\\\"background-color: rgba(0,0,0,0.4);\\\">\\r\\n  <div class=\\\"modal-dialog modal-img \\\">\\r\\n\\r\\n    <!-- Modal content-->\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <h5 class=\\\"modal-title text-center\\\" style=\\\"color:black\\\"><b>Are you sure want to delete ?</b></h5>\\r\\n        <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" (click)=\\\"hideModal('deletModel')\\\">&times;</button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-4\\\">\\r\\n            <button type=\\\"button\\\" style=\\\"margin-left:86%;\\\" class=\\\"btn btn-round btn-info\\\" (click)=\\\"deleteData()\\\">\\r\\n              Yes\\r\\n            </button>\\r\\n          </div>\\r\\n          <div class=\\\"col-4\\\">\\r\\n            <button type=\\\"button\\\" style=\\\"float:right;background:#ce4747;color: white;\\\" (click)=\\\"hideModal('deletModel')\\\" class=\\\"btn btn-round \\\">\\r\\n              Cancel\\r\\n            </button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"modal \\\" id=\\\"deletPackModel\\\" role=\\\"dialog\\\" style=\\\"background-color: rgba(0,0,0,0.4);\\\">\\r\\n  <div class=\\\"modal-dialog modal-img \\\">\\r\\n\\r\\n    <!-- Modal content-->\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <h5 class=\\\"modal-title text-center\\\" style=\\\"color:black\\\"><b>Are you sure want to delete ?</b></h5>\\r\\n        <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" (click)=\\\"hideModal('deletPackModel')\\\">&times;</button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-4\\\">\\r\\n            <button type=\\\"button\\\" style=\\\"margin-left:86%;\\\" class=\\\"btn btn-round btn-info\\\" (click)=\\\"deletePack()\\\">\\r\\n              Yes\\r\\n            </button>\\r\\n          </div>\\r\\n          <div class=\\\"col-4\\\">\\r\\n            <button type=\\\"button\\\" style=\\\"float:right;background:#ce4747;color: white;\\\" (click)=\\\"hideModal('deletPackModel')\\\" class=\\\"btn btn-round \\\">\\r\\n              Cancel\\r\\n            </button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import { Component, HostListener , OnDestroy, ViewChild, NgZone } from '@angular/core';\r\nimport {\r\n    AppearanceOption,\r\n    AppearanceOptionGroup,\r\n    AppearanceSection,\r\n    CustomizerDataService,\r\n    MaterialProperties,\r\n    WeaponCustomization,\r\n    WeaponCustomizationData\r\n} from '../customizer-data.service';\r\nimport { ViewerService } from '../viewer.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { UndoMgr } from './undo-manager';\r\nimport { APIService } from '../../providers/api-service';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ColorPickerModule } from 'ngx-color-picker';\r\ndeclare var $: any;\r\nimport { environment } from '../../environments/environment';\r\nimport { UserService } from '../user.service';\r\nimport { _ } from \"underscore\";\r\n\r\nexport interface DeepActiveAppearanceTracking {\r\n    activeSection: AppearanceSection;\r\n    resetActive: boolean;\r\n    chosenGroupOption: Map<AppearanceOptionGroup, AppearanceOption>;\r\n}\r\n\r\n@Component({\r\n    selector: 'app-appearance-controls',\r\n    templateUrl: './appearance-controls.component.html',\r\n    styleUrls: ['./appearance-controls.component.css'],\r\n    providers: [APIService]\r\n    //directives: [FORM_DIRECTIVES]\r\n})\r\nexport class AppearanceControlsComponent implements OnDestroy {\r\n    @ViewChild('optionsContainer')\r\n    public optionsContainer;\r\n\r\n    public allSections: AppearanceSection[] = [];\r\n    public chosenWeapon: WeaponCustomization;\r\n    public customizationData: WeaponCustomizationData;\r\n    public hideWeaponChoices = true;\r\n    public selectedItems: Map<WeaponCustomization, DeepActiveAppearanceTracking> =\r\n        new Map<WeaponCustomization, DeepActiveAppearanceTracking>();\r\n\r\n    private clickSubscription: Subscription;\r\n    private initializeSubscription: Subscription;\r\n    private viewerResetSubscription: Subscription;\r\n    private lastClickedOption: Map<AppearanceSection, AppearanceOption> = new Map<AppearanceSection, AppearanceOption>();\r\n\r\n\r\n    packArray = [];\r\n    newPackArray = [];\r\n    loggedUser = null;\r\n    isAdmin = false;\r\n    place_holder_image = 'assets/img/image-placeholder-png-4.png';\r\n    constructor(private customizerDataService: CustomizerDataService,\r\n        private apiService: APIService, private _ngZone: NgZone,\r\n        private viewerService: ViewerService, private userService: UserService) {\r\n        this.loggedUser = this.userService.retrieveUser();\r\n        //this.isAdmin = this.userService.isAdmin();\r\n        this.isAdmin = true;\r\n        this.initializeSubscription = viewerService.initialized.subscribe(() => {\r\n            this.viewerInitialized();\r\n        });\r\n\r\n        this.clickSubscription = this.viewerService.meshClicked.subscribe((meshName: string) => {\r\n            this.meshClicked(meshName);\r\n        });\r\n\r\n        this.viewerResetSubscription = this.viewerService.reset.subscribe(() => {\r\n            this.viewerReset();\r\n        });\r\n        this.getPacks();\r\n\r\n        //document.addEventListener(\"click\", function () {\r\n        //  $('a').removeClass('active')\r\n        //  console.log(this)\r\n        //});\r\n    }\r\n\r\n    @HostListener('document:click', ['$event'])\r\n    documentClick(event: MouseEvent) {\r\n      var currentTarget: any = event.currentTarget\r\n      if (this.outside && currentTarget.activeElement.nodeName === 'BODY') {\r\n        $('a').removeClass('active');\r\n        this.selectedItem = null;\r\n      } else {\r\n        this.outside = true\r\n      }\r\n    }\r\n\r\n    name: any;\r\n    colorCode: any = \"#000\";\r\n    type: any = \"MATERIALS\";\r\n    interactionValue: any = \"new material\";\r\n    image: any = this.place_holder_image;\r\n    isMetal: boolean = false;\r\n    visible: boolean = false;\r\n    roughness: any = 0.5;\r\n    visibleInColor: boolean = false;\r\n    colorCodeInColor: any = \"#000\";\r\n    colorName: any;\r\n    visibleInPattern: boolean = false;\r\n    patternName: any;\r\n    isEdit: boolean = true;\r\n    packName: any\r\n    packtype: any = \"MATERIALS\"\r\n    packid: any;\r\n    arrid: any;\r\n    color: any = \"#000\"\r\n    imagePath: any;\r\n    patternImage: any = \"\";\r\n    Packs: any = []\r\n    deletedPack = []\r\n    outside = true;\r\n\r\n\r\n    undoManagerLimit() {\r\n        return UndoMgr.getInstance().getIndex() + 1;\r\n    }\r\n\r\n    activeTracking(): DeepActiveAppearanceTracking {\r\n      if (this.chosenWeapon) {\r\n        return this.selectedItems.get(this.chosenWeapon);\r\n      }\r\n    }\r\n\r\n    activeSection(): AppearanceSection {\r\n      if (this.activeTracking() && this.activeTracking().activeSection) {\r\n        return this.activeTracking().activeSection;\r\n      }\r\n    }\r\n\r\n\r\n    allitemSelected = true;\r\n    sectionIndex = 0;\r\n    changeSection(event: MouseEvent, section: AppearanceSection) {\r\n        this.activeTracking().activeSection = section;\r\n        console.log(section.name)\r\n        if (section.name == \"Material\") {\r\n            this.sectionIndex = 0; \r\n            this.type = \"MATERIALS\"\r\n        } else if (section.name == \"Color\") {\r\n            this.type = \"COLORS\"\r\n            this.sectionIndex = 1;\r\n        } else if (section.name == \"Patterns\") {\r\n            this.type = \"PATTERNS\"\r\n            this.sectionIndex = 2;\r\n        }\r\n        this.packtype = this.type;\r\n        this.packArray = this.allpacks.filter((p) => p.type == this.packtype);\r\n      \r\n        //this.selectedPack = null;\r\n        //this.selectedItem = null;\r\n        this.allitemSelected = true;\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n\r\n    /**\r\n     * @param {string} meshName\r\n     */\r\n    chooseWeapon(event: MouseEvent, weapon: WeaponCustomization) {\r\n\r\n        UndoMgr.getInstance().clear();\r\n        this.chosenWeapon = weapon;\r\n        this.hideWeaponChoices = true;\r\n        this.allSections = this.customizationData.commonSections.slice()\r\n            .concat(this.chosenWeapon.customizations.slice());\r\n\r\n        this.viewerService.viewer.changeWeapon(weapon.modelFolder, weapon.modelFile);\r\n\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    clampScrollValue(scroll: number) {\r\n        const ne: HTMLDivElement = this.optionsContainer.nativeElement;\r\n\r\n        return Math.max(0, Math.min(scroll, ne.scrollWidth - ne.clientWidth));\r\n    }\r\n\r\n\r\n    /**\r\n     *  @param {string} meshName\r\n     */\r\n    meshClicked(meshName: string) {\r\n        if (meshName === 'assets/models/assault-rifle/assault-rifle.gltf.honey_badger.trigger') return;\r\n\r\n        if (!this.chosenWeapon.interactionBlacklist || (this.chosenWeapon.interactionBlacklist.indexOf(meshName) === -1)) {\r\n            const activeSection = this.activeSection();\r\n\r\n            /* if (activeTracking.resetActive) {\r\n               switch (activeSection.interactionType) {\r\n                 case 'alterMaterial':\r\n                   this.viewerService.viewer.resetMaterialProperty(meshName, activeSection.affectedParameter);\r\n                   break;\r\n                 case 'swapMaterial':\r\n                   this.viewerService.viewer.resetMaterial(meshName);\r\n                   break;\r\n               }\r\n             } else {\r\n             */\r\n            const lastClickedOption = this.lastClickedOption.has(activeSection) ? this.lastClickedOption.get(activeSection) : null;\r\n\r\n            if (lastClickedOption) {\r\n                switch (activeSection.interactionType) {\r\n                    case 'alterMaterial':\r\n                        UndoMgr.setMaterialProperty(this.viewerService.viewer, meshName,\r\n                            activeSection.affectedParameter, lastClickedOption.interactionValue);\r\n                        // this.viewerService.viewer.setMeshMaterialProperty(meshName, activeSection.affectedParameter,\r\n                        //  lastClickedOption.interactionValue);\r\n                        break;\r\n                    case 'swapMaterial':\r\n                        // this.viewerService.viewer.changeMeshMaterial(meshName, lastClickedOption.interactionValue);\r\n                        UndoMgr.setMaterialTexture(this.viewerService.viewer, meshName, lastClickedOption.interactionValue);\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        // }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.initializeSubscription.unsubscribe();\r\n        this.clickSubscription.unsubscribe();\r\n        this.viewerResetSubscription.unsubscribe();\r\n    }\r\n\r\n    /**\r\n     * @param {string} meshName\r\n     */\r\n    optionClicked(event: MouseEvent, optionGroup: AppearanceOptionGroup, option: AppearanceOption) {\r\n        this.selectedItem = option;\r\n        const currentlySelectedOption = this.selectedOption(optionGroup);\r\n        const activeTracking = this.activeTracking();\r\n        activeTracking.resetActive = false;\r\n\r\n        const prevChosenGroupOption = activeTracking.chosenGroupOption;\r\n\r\n        const lastClickedOption = this.lastClickedOption;\r\n\r\n        // keep a handle to previous values\r\n        const prevOption = lastClickedOption.get(this.activeSection());\r\n        const prevGroupOption = prevChosenGroupOption.get(optionGroup);\r\n        const section = this.activeSection();\r\n\r\n        if (option === currentlySelectedOption) {\r\n\r\n            if (optionGroup.allowNone) {\r\n\r\n                const redoFunction = () => {\r\n                    this.optionOff(option);\r\n                    prevChosenGroupOption.set(optionGroup, null);\r\n                    lastClickedOption.set(section, null);\r\n\r\n                };\r\n                if (section.interactionType == 'toggleMesh') {\r\n\r\n                    UndoMgr.add({\r\n                        undo: () => {\r\n                            this.optionOn(option);\r\n                            prevChosenGroupOption.set(optionGroup, prevGroupOption);\r\n                            lastClickedOption.set(section, prevOption);\r\n                        },\r\n                        redo: redoFunction,\r\n                    });\r\n                } else {\r\n                    redoFunction();\r\n                }\r\n\r\n\r\n            }\r\n        } else {\r\n\r\n            const redoFunction = () => {\r\n                this.optionOff(currentlySelectedOption);\r\n                prevChosenGroupOption.set(optionGroup, option);\r\n                this.optionOn(option);\r\n                lastClickedOption.set(section, option);\r\n            };\r\n            if (section.interactionType == 'toggleMesh') {\r\n\r\n                UndoMgr.add({\r\n                    undo: () => {\r\n                        this.optionOff(option, section);\r\n                        prevChosenGroupOption.set(optionGroup, prevGroupOption);\r\n                        this.optionOn(currentlySelectedOption, section);\r\n                        lastClickedOption.set(section, prevOption);\r\n\r\n                    },\r\n                    redo: redoFunction,\r\n                });\r\n            } else {\r\n                redoFunction();\r\n            }\r\n        }\r\n\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    optionOff(option: AppearanceOption, section?: AppearanceSection) {\r\n        if (!option) {\r\n            return;\r\n        }\r\n\r\n        section = section ? section : this.activeSection();\r\n\r\n        switch (section.interactionType) {\r\n            case 'toggleMesh':\r\n                this.viewerService.viewer.hideMesh(option.interactionValue);\r\n                break;\r\n        }\r\n    }\r\n\r\n    optionOn(option: AppearanceOption, section?: AppearanceSection) {\r\n        if (!option) {\r\n            return;\r\n        }\r\n        section = section ? section : this.activeSection();\r\n        switch (section.interactionType) {\r\n            case 'toggleMesh':\r\n                this.viewerService.viewer.showMesh(option.interactionValue);\r\n                break;\r\n        }\r\n    }\r\n\r\n    resetPressed(event) {\r\n        // const tracking = this.activeTracking();\r\n\r\n        // tracking.resetActive = !tracking.resetActive;\r\n        UndoMgr.undo();\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    redoPressed(event) {\r\n        UndoMgr.redo();\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    scrollOptionsLeft(event) {\r\n        const ne: HTMLDivElement = this.optionsContainer.nativeElement;\r\n\r\n        ne.scrollLeft = this.clampScrollValue(ne.scrollLeft - (ne.clientWidth - 64));\r\n\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    scrollOptionsRight(event) {\r\n        const ne: HTMLDivElement = this.optionsContainer.nativeElement;\r\n\r\n        ne.scrollLeft = this.clampScrollValue(ne.scrollLeft + (ne.clientWidth - 64));\r\n\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    selectedOption(optionGroup: AppearanceOptionGroup): AppearanceOption {\r\n      var toreturn = this.activeTracking().chosenGroupOption.get(optionGroup);\r\n      //console.log(toreturn);\r\n      return toreturn;\r\n    }\r\n\r\n\r\n    selectedOption1(option, optionGroup) {\r\n      if (this.selectedItem) {\r\n        if (this.selectedItem._id && this.selectedItem._id === option._id)\r\n          return true;\r\n        else\r\n          return this.selectedItem.name === option.name && this.selectedItem.displayImg === option.displayImg;\r\n      }        \r\n      else\r\n        return false;\r\n    }\r\n\r\n    setupOptionTracking(commonSections: AppearanceSection[], weapon: WeaponCustomization) {\r\n        const groupOptionTracking = new Map<AppearanceOptionGroup, AppearanceOption>();\r\n\r\n        commonSections.slice()\r\n            .concat(weapon.customizations.slice())\r\n            .forEach(function (customization) {\r\n                customization.optionGroups.forEach(function (optionGroup) {\r\n                    let defaultSelected: AppearanceOption = null;\r\n\r\n                    if (typeof optionGroup.defaultSelected === 'number') {\r\n                        defaultSelected = optionGroup.options[optionGroup.defaultSelected];\r\n                    } else if (!optionGroup.allowNone && (optionGroup.options.length > 0)) {\r\n                        defaultSelected = optionGroup.options[0];\r\n                    }\r\n\r\n                    groupOptionTracking.set(optionGroup, defaultSelected);\r\n                });\r\n            });\r\n\r\n        this.selectedItems.set(weapon, {\r\n            activeSection: (commonSections.length !== 0) ? commonSections[0] : weapon.customizations[0],\r\n            resetActive: false,\r\n            chosenGroupOption: groupOptionTracking\r\n        });\r\n    }\r\n\r\n    setupOptionTrackingByCommonSection(commonSections: AppearanceSection[], weapon: WeaponCustomization, resetIndex) {\r\n        const groupOptionTracking = new Map<AppearanceOptionGroup, AppearanceOption>();\r\n\r\n        commonSections.slice()\r\n            .concat(weapon.customizations.slice())\r\n            .forEach(function (customization) {\r\n                customization.optionGroups.forEach(function (optionGroup) {\r\n                    let defaultSelected: AppearanceOption = null;\r\n\r\n                    if (typeof optionGroup.defaultSelected === 'number') {\r\n                        defaultSelected = optionGroup.options[optionGroup.defaultSelected];\r\n                    } else if (!optionGroup.allowNone && (optionGroup.options.length > 0)) {\r\n                        defaultSelected = optionGroup.options[0];\r\n                    }\r\n\r\n                    groupOptionTracking.set(optionGroup, defaultSelected);\r\n                });\r\n            });\r\n\r\n\r\n        var item = this.selectedItems.get(weapon);\r\n        item.activeSection = (commonSections.length !== 0) ? commonSections[resetIndex] : weapon.customizations[0];\r\n        item.resetActive = true;\r\n        //item.chosenGroupOption = item.chosenGroupOption;\r\n        console.log(item);\r\n        this.selectedItems.set(weapon, item);\r\n    }\r\n\r\n    stopEvent(event: MouseEvent) {\r\n        if (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n      }\r\n        return false;\r\n    }\r\n\r\n    toggleChoices(event: MouseEvent) {\r\n        this.hideWeaponChoices = !this.hideWeaponChoices;\r\n\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    viewerInitialized() {\r\n        const createMaterial = (matProps: MaterialProperties) => {\r\n            this.viewerService.viewer.createMaterial(matProps);\r\n        };\r\n\r\n        this.customizerDataService.weaponsData().then((customizationData) => {\r\n\r\n            this.customizationData = customizationData;\r\n\r\n            if (!!customizationData.environment) {\r\n                this.viewerService.viewer.setEnvironment(customizationData.environment);\r\n            }\r\n\r\n            if (!!customizationData.commonMaterials) {\r\n                customizationData.commonMaterials.forEach(createMaterial);\r\n            }\r\n\r\n            customizationData.weapons.forEach((weapon, wIdx) => {\r\n                this.setupOptionTracking(customizationData.commonSections || [], weapon);\r\n\r\n                this.viewerService.viewer.load(weapon.modelFolder, weapon.modelFile, wIdx === 0, () => {\r\n                    if (!!weapon.materials) {\r\n                        weapon.materials.forEach(createMaterial);\r\n                    }\r\n\r\n                    this.weaponSetup(weapon);\r\n                });\r\n            });\r\n\r\n            this.chooseWeapon(null, customizationData.weapons[0]);\r\n        });\r\n    }\r\n\r\n\r\n    viewerUpdated(api_response) {\r\n        const createMaterial = (matProps: MaterialProperties) => {\r\n            this.viewerService.viewer.createMaterial(matProps);\r\n        };\r\n\r\n        //this.customizerDataService.weaponsData().subscribe((api_response) => {\r\n        const customizationData = api_response;\r\n\r\n        this.customizationData = customizationData;\r\n\r\n        if (!!customizationData.environment) {\r\n            this.viewerService.viewer.setEnvironment(customizationData.environment);\r\n        }\r\n\r\n        if (!!customizationData.commonMaterials) {\r\n            customizationData.commonMaterials.forEach(createMaterial);\r\n        }\r\n\r\n        customizationData.weapons.forEach((weapon, wIdx) => {\r\n            this.setupOptionTrackingByCommonSection(customizationData.commonSections || [], weapon, this.sectionIndex);\r\n        });\r\n\r\n        this.chooseWeapon(null, customizationData.weapons[0]);\r\n    }\r\n\r\n    viewerReset() {\r\n        this.customizationData.weapons.forEach((weapon) => {\r\n            this.setupOptionTracking(this.customizationData.commonSections || [], weapon);\r\n\r\n            this.weaponSetup(weapon);\r\n        });\r\n    }\r\n\r\n    weaponSetup(weapon: WeaponCustomization) {\r\n        if (!!weapon.replaceMaterials) {\r\n            weapon.replaceMaterials.forEach((replacement) => {\r\n                console.log('reset-part', replacement);\r\n                this.viewerService.viewer.replaceMaterials(weapon.modelFolder, weapon.modelFile,\r\n                    replacement.oldMaterialNames, replacement.newMaterialName);\r\n            });\r\n        }\r\n\r\n        if (weapon['rotation']) {\r\n            this.viewerService.viewer.setRotation(weapon.modelFolder, weapon.modelFile, weapon['rotation']);\r\n        }\r\n\r\n        if (!!weapon.setupActions) {\r\n            weapon.setupActions.forEach((setupAction) => {\r\n                switch (setupAction.type) {\r\n                    case 'hideMesh':\r\n                        this.viewerService.viewer.hideMesh(setupAction.target, weapon.modelFolder, weapon.modelFile);\r\n                        break;\r\n                    case 'showMesh':\r\n                        weapon.customizations[0].optionGroups.forEach((optionGroup) => {\r\n                            optionGroup.options.forEach((option) => {\r\n                                if (setupAction.target === option.name) {\r\n                                    this.optionOn(option);\r\n                                    this.selectedItems.get(weapon).chosenGroupOption.set(optionGroup, option)\r\n                                }\r\n                            });\r\n                        });\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    openAddPackModel() {\r\n      this.outside = false\r\n        this.packName = \"\";\r\n        this.isEdit = false;\r\n        this.showModal('addPack')\r\n    }\r\n\r\n    hideModal(id) {\r\n      this.outside = false\r\n        this.manageModel(id, false);\r\n        this.isEdit = false\r\n    }\r\n\r\n    showModal(id) {\r\n      this.outside = false\r\n        this.manageModel(id, true);\r\n    }\r\n\r\n    manageModel(id, visible) {\r\n      this.outside = false\r\n        visible ? $('#' + id).show() : $('#' + id).hide()\r\n    }\r\n\r\n    allpacks = [];\r\n    async getPacks() {\r\n      var self = this;\r\n        const input = await this.apiService.prepareNodeJSRequestObject(\"packs\", \"getpacks\", null)\r\n        const totalPacksArray: any = await this.apiService.execute(input, false)\r\n        this.allpacks = totalPacksArray.apidata.Data;\r\n        if (this.Packs.length >0) {\r\n          for (let i = 0; i < this.Packs.length; i++) {\r\n            this.allpacks.push(this.Packs[i])\r\n          }\r\n        }\r\n\r\n        if (this.deletedPack.length > 0) {\r\n          for (let i = 0; i < this.deletedPack.length; i++) {\r\n\r\n            let j = _.findIndex(this.allpacks, function (t) { return t._id == self.deletedPack[i].packid})\r\n              this.allpacks.splice(j, 1)\r\n          }\r\n        }\r\n\r\n        this.packArray = this.allpacks.filter((p) => p.type == this.packtype);\r\n        this.packArray.sort(this.customizerDataService.compare);\r\n    }\r\n\r\n    selectedPack = null;\r\n    selectPack(pack) {\r\n      this.outside = false\r\n        this._ngZone.run(() => {\r\n            if (pack) {\r\n                this.selectedPack = pack;\r\n                this.selectedItem = null;\r\n                this.allitemSelected = false;\r\n            } else {\r\n                this.allitemSelected = true;\r\n                this.selectedPack = null\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    async addPack() {\r\n      this.outside = false\r\n      let order = this.customizerDataService.getOrder(this.packArray)\r\n        var obj: any = {\r\n            name: this.packName,\r\n            type: this.packtype,\r\n            _id: new Date().getTime(),\r\n            colors: [],\r\n            patterns: [],\r\n            metarials: [],\r\n            visible: true,\r\n            opname: \"ADD\",\r\n            order : order\r\n        }\r\n        this.customizerDataService.dbData.push(obj);\r\n        this.Packs.push(obj)\r\n        this.getPacks();\r\n        this.hideModal(\"addPack\");\r\n        this.packName = \"\"\r\n\r\n    }\r\n\r\n\r\n    openModel() {\r\n      this.outside = false\r\n        if (this.selectedPack === null) {\r\n            alert(\"please select at pack before adding \");\r\n            return;\r\n        }\r\n        this.isEdit = false\r\n        if (this.type == \"MATERIALS\") {\r\n            this.name = ''\r\n            this.colorCode = \"#000\"\r\n            this.color = \"#000\"\r\n            this.interactionValue = \"\"\r\n            this.roughness = 0.5\r\n            this.image = this.place_holder_image;\r\n            this.isMetal = true\r\n            this.visible = true\r\n            this.imagePath = null\r\n            $('#image')\r\n                .attr('src', this.place_holder_image)\r\n                .width(150)\r\n                .height(150);\r\n            this.showModal('my-modal');\r\n        }\r\n        else if (this.type == \"COLORS\") {\r\n            this.colorName = '';\r\n            this.colorCodeInColor = \"#000\";\r\n            this.color = \"#000\"\r\n            this.visibleInColor = true;\r\n            this.showModal('addColor');\r\n        }\r\n        else if (this.type == \"PATTERNS\") {\r\n          this.patternName = '';\r\n          this.imagePath = null\r\n            this.visibleInPattern = true;\r\n            this.patternImage = this.place_holder_image;\r\n            this.showModal('patterns');\r\n\r\n            $('#image1')\r\n                .attr('src', this.place_holder_image)\r\n                .width(150)\r\n                .height(150);\r\n        }\r\n    }\r\n\r\n    onAddAndUpdate() {\r\n        const api_response = this.customizerDataService.weaponsDataLocal();\r\n        this.viewerUpdated(api_response);\r\n    }\r\n\r\n    colorChanged(data) {\r\n        console.log(data)\r\n        this.colorCode = data\r\n    }\r\n\r\n    async fileEvent(data) {\r\n\r\n        this.imagePath = await this.sendFile(data.target.files[0]);\r\n        var reader = new FileReader();\r\n\r\n        reader.onload = function (e) {\r\n            var tfg: any = e.target;\r\n            $('#image')\r\n                .attr('src', tfg.result)\r\n                .width(150)\r\n                .height(150);\r\n\r\n            $('#image1')\r\n                .attr('src', tfg.result)\r\n                .width(150)\r\n                .height(150);\r\n        };\r\n\r\n\r\n\r\n        reader.readAsDataURL(data.target.files[0]);\r\n    }\r\n\r\n    sendFile(file) {\r\n\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            const apiUrl = environment.apiBaseURL + 'profile';\r\n            var self = this\r\n            var formData = new FormData();\r\n            var xhr = new XMLHttpRequest();\r\n\r\n            formData.append(\"avatar\", file, file.name);\r\n\r\n            xhr.open(\"POST\", apiUrl, true);\r\n\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4) {\r\n                    if (xhr.status === 200) {\r\n                        resolve(JSON.parse(xhr.responseText).path);\r\n                    } else {\r\n                        console.error(xhr.statusText);\r\n                    }\r\n                }\r\n            };\r\n\r\n            xhr.send(formData);\r\n        })\r\n    }\r\n\r\n\r\n    async addMaterial() {\r\n      this.outside = false\r\n        var obj: any = {};\r\n        var metarials = [];\r\n        obj.packid = this.selectedPack._id;\r\n\r\n        if (this.name == \"\" || !this.imagePath || this.imagePath == null) {\r\n          alert(\"All field are mandatory \");\r\n        } else {\r\n\r\n          metarials = [{\r\n            name: this.name,\r\n            colors: this.colorCode,\r\n            interactionValue: this.name,\r\n            roughness: this.roughness,\r\n            image: this.imagePath,\r\n            metal: this.isMetal,\r\n            visible: this.visible,\r\n            opname: \"ADD\",\r\n            _id: new Date().getTime()\r\n          }]\r\n          obj.metarials = metarials;\r\n          this.customizerDataService.addDataOnPacks(obj);\r\n          this.onAddAndUpdate();\r\n          this.hideModal('my-modal');\r\n          //this.selectedItem = null\r\n        }\r\n    }\r\n\r\n    colorModelChanged(data) {\r\n        this.colorCodeInColor = data\r\n    }\r\n\r\n    async addColor() {\r\n      this.outside = false\r\n      var obj: any = {};\r\n      var colors = [];\r\n      obj.packid = this.selectedPack._id;\r\n\r\n      if (this.colorName == \"\") {\r\n        alert(\"All field are mandatory \");\r\n      } else {\r\n        colors = [{\r\n          name: this.colorName,\r\n          code: this.colorCodeInColor,\r\n          visible: this.visibleInColor,\r\n          opname: \"ADD\",\r\n          _id: new Date().getTime()\r\n        }]\r\n\r\n        obj.colors = colors;\r\n        this.customizerDataService.addDataOnPacks(obj);\r\n        this.onAddAndUpdate();\r\n        this.hideModal(\"addColor\");\r\n        //this.selectedItem = null\r\n      }\r\n    }\r\n\r\n    async addPatternse() {\r\n      this.outside = false\r\n      var obj: any = {};\r\n      var patterns = [];\r\n      obj.packid = this.selectedPack._id;\r\n      if (this.patternName == \"\" || !this.imagePath || this.imagePath == null) {\r\n        alert(\"All field are mandatory \");\r\n      } else {\r\n\r\n        patterns = [{\r\n          name: this.patternName,\r\n          visible: this.visibleInPattern,\r\n          image: this.imagePath,\r\n          opname: \"ADD\",\r\n          _id: new Date().getTime()\r\n        }]\r\n\r\n        obj.patterns = patterns;\r\n        this.customizerDataService.addDataOnPacks(obj);\r\n        this.onAddAndUpdate();\r\n        this.hideModal('patterns')\r\n        //this.selectedItem = null\r\n      }\r\n    }\r\n    selectedItem = null;\r\n    async editOption() {\r\n      this.outside = false\r\n        this.isEdit = true\r\n        this.packid = this.selectedItem.pack_id;\r\n        var type = this.packtype;\r\n        var obj = this.selectedItem;\r\n        this.arrid = obj._id\r\n        this.imagePath = \"\";\r\n        if (type == \"MATERIALS\") {\r\n            this.name = obj.name\r\n            this.colorCode = obj.displayColor\r\n            this.interactionValue = obj.interactionValue\r\n            this.roughness = obj.roughness\r\n            this.image = obj.displayImg\r\n            this.isMetal = obj.metal\r\n            this.visible = obj.visible\r\n            $('#my-modal').show()\r\n        }\r\n        else if (type == \"COLORS\") {\r\n            this.colorName = obj.name;\r\n            this.colorCodeInColor = obj.displayColor;\r\n            this.color = obj.displayColor;\r\n            this.visibleInColor = obj.visible;\r\n            $('#addColor').show()\r\n        }\r\n        else if (type == \"PATTERNS\") {\r\n            this.patternName = obj.name;\r\n            this.visibleInPattern = obj.visible\r\n            this.patternImage = obj.displayImg\r\n            $('#patterns').show()\r\n        }\r\n    }\r\n\r\n    async editMaterial() {\r\n      this.outside = false\r\n        var metarials: any = [\r\n            {\r\n                name: this.name,\r\n                colors: this.colorCode,\r\n                interactionValue: this.name,\r\n                roughness: this.roughness,\r\n                image: this.image,\r\n                metal: this.isMetal,\r\n                visible: this.visible,\r\n                opname: \"EDIT\",\r\n                _id: this.arrid\r\n            }\r\n        ]\r\n        if (this.imagePath && this.imagePath != '') {\r\n            metarials[0].image = this.imagePath\r\n        }\r\n\r\n        var obj: any = { packid: this.selectedItem.pack_id, metarials: metarials, arrId: this.arrid };\r\n        this.customizerDataService.editDataOnPacks(obj);\r\n        this.onAddAndUpdate();\r\n        this.hideModal('my-modal');\r\n        //this.selectedItem = null\r\n    }\r\n\r\n    async editColor() {\r\n      this.outside = false\r\n        var colors: any = [{\r\n            name: this.colorName,\r\n            code: this.colorCodeInColor,\r\n            visible: this.visibleInColor,\r\n            opname: \"EDIT\",\r\n            _id: this.arrid\r\n        }]        \r\n        var obj: any = { packid: this.selectedItem.pack_id, colors: colors, arrId: this.arrid };\r\n        this.customizerDataService.editDataOnPacks(obj);\r\n\r\n        this.onAddAndUpdate();\r\n        this.hideModal('addColor');\r\n        //this.selectedItem = null\r\n    }\r\n\r\n    async editPatternse() {\r\n      this.outside = false\r\n        var patterns: any = [{\r\n            name: this.patternName,\r\n            visible: this.visibleInPattern,\r\n            image: this.patternImage,\r\n            opname: \"EDIT\",\r\n            _id: this.arrid\r\n        }]\r\n\r\n        if (this.imagePath && this.imagePath != '') {\r\n            patterns[0].image = this.imagePath\r\n        }\r\n\r\n        var obj: any = { packid: this.selectedItem.pack_id, patterns: patterns, arrId: this.arrid };\r\n        this.customizerDataService.editDataOnPacks(obj);\r\n        this.onAddAndUpdate();\r\n        this.hideModal('patterns');\r\n        //this.selectedItem = null\r\n    }\r\n\r\n    openDeleteModel() {\r\n      this.outside = false\r\n        $('#deletModel').show()\r\n    }\r\n\r\n\r\n\r\n    async deleteData() {\r\n      this.outside = false\r\n        var obj: any = { packid: this.selectedItem.pack_id, type: this.type, arrId: this.selectedItem._id };\r\n        this.customizerDataService.deleteDataOnPack(obj);\r\n        this.onAddAndUpdate();\r\n        this.hideModal(\"deletModel\");\r\n        //this.selectedItem = null\r\n    }\r\n\r\n    async setVisible(value) {\r\n      this.outside = false\r\n        var obj: any = { packid: this.selectedItem.pack_id, type: this.type, value: value, arrId: this.selectedItem._id };\r\n        this.customizerDataService.setVisibleOfPackData(obj);\r\n        this.selectedItem.visible = value;\r\n        this.onAddAndUpdate();\r\n        //this.selectedItem = null\r\n    }\r\n\r\n    async setVisibleofPack(pack: any, b) {\r\n      this.outside = false\r\n        var obj: any = {};\r\n        obj.packid = pack._id\r\n        obj.value = b\r\n        const input = this.apiService.prepareNodeJSRequestObject(\"packs\", \"setVisibleOfPack\", obj)\r\n        await this.apiService.execute(input, false);\r\n        this.getPacks();\r\n    }\r\n\r\n    openEditPack(pack) {\r\n      this.outside = false\r\n        this.isEdit = true;\r\n        this.packid = pack._id\r\n        this.packName = pack.name\r\n        this.showModal('addPack');\r\n    }\r\n\r\n    async editPack() {\r\n      this.outside = false\r\n        var obj: any = {};\r\n        obj.packid = this.packid\r\n        obj.name = this.packName\r\n        let k = _.findIndex(this.packArray, function (t) { return t._id == obj.packid })\r\n        this.packArray[k].name = obj.name\r\n\r\n        let j = _.findIndex(this.customizerDataService.dbData, function (t) { return t._id == obj.packid })\r\n        this.customizerDataService.dbData[j].name = obj.name\r\n        this.customizerDataService.dbData[j].opname = \"EDIT\"\r\n        //this.getPacks();\r\n        this.onAddAndUpdate();\r\n        this.hideModal(\"addPack\");\r\n        this.isEdit = false;\r\n    }\r\n\r\n    async movePackLeft(data) {\r\n      this.outside = false\r\n      let order = data.order\r\n      var self = this\r\n\r\n      let k = _.findIndex(this.packArray, function (t) { return t._id == data._id })\r\n\r\n      if (k > -1 && k != 0) {\r\n        this.packArray[k].order = this.packArray[k - 1].order\r\n        this.packArray[k - 1].order = order\r\n        this.packArray.sort(this.customizerDataService.compare);\r\n      }\r\n\r\n      let j = _.findIndex(this.customizerDataService.dbData, function (t) { return t._id == data._id })\r\n      let l = _.findIndex(this.customizerDataService.dbData, function (t) { return t._id == self.packArray[k]._id })\r\n\r\n      if (j > -1 && j != 0) {\r\n        this.customizerDataService.dbData[j].order = this.customizerDataService.dbData[l].order\r\n        this.customizerDataService.dbData[l].order = order\r\n        this.customizerDataService.dbData[l].opname = \"EDIT\"\r\n        this.customizerDataService.dbData[j].opname = \"EDIT\"\r\n        this.customizerDataService.dbData.sort(this.customizerDataService.compare);\r\n      }\r\n      this.onAddAndUpdate();\r\n      this.hideModal(\"addPack\");\r\n      this.isEdit = false;\r\n    }\r\n\r\n    async movePackRight(data) {\r\n      this.outside = false\r\n      let order = data.order\r\n      var self = this\r\n\r\n      let k = _.findIndex(this.packArray, function (t) { return t._id == data._id })\r\n      let max = this.customizerDataService.getOrder(this.packArray)\r\n\r\n      if (k > -1 && order < max - 1) {\r\n        this.packArray[k].order = this.packArray[k + 1].order\r\n        this.packArray[k + 1].order = order\r\n        this.packArray.sort(this.customizerDataService.compare);\r\n      }\r\n\r\n      let j = _.findIndex(this.customizerDataService.dbData, function (t) { return t._id == data._id })\r\n      let l = _.findIndex(this.customizerDataService.dbData, function (t) { return t._id == self.packArray[k]._id })\r\n\r\n      if (j > -1 && order < max - 1) {\r\n        this.customizerDataService.dbData[j].order = this.customizerDataService.dbData[l].order\r\n        this.customizerDataService.dbData[l].order = order\r\n        this.customizerDataService.dbData[l].opname = \"EDIT\"\r\n        this.customizerDataService.dbData[j].opname = \"EDIT\"\r\n        this.customizerDataService.dbData.sort(this.customizerDataService.compare);\r\n      }\r\n      this.onAddAndUpdate();\r\n      this.hideModal(\"addPack\");\r\n      this.isEdit = false;\r\n    }\r\n\r\n    openDeletePack(pack) {\r\n      this.outside = false\r\n        this.packid = pack._id\r\n        this.showModal('deletPackModel');\r\n    }\r\n\r\n    async deletePack() {\r\n      this.outside = false\r\n        var obj: any = {};\r\n        obj.packid = this.packid;\r\n        let i = _.findIndex(this.customizerDataService.dbData, function (t) { return t._id == obj.packid })\r\n        this.customizerDataService.dbData.splice(i, 1)\r\n        this.deletedPack.push(obj)\r\n        this.getPacks();\r\n        this.onAddAndUpdate();\r\n        this.hideModal(\"deletPackModel\");\r\n        this.isEdit = false;\r\n    }\r\n\r\n    async deployPackData() {\r\n      this.outside = false\r\n      var obj: any = { dbData: this.customizerDataService.dbData, deleted: this.customizerDataService.deleted, weapons: this.customizerDataService.dbWeapons, deletedPack: this.deletedPack }\r\n        const input = this.apiService.prepareNodeJSRequestObject(\"packs\", \"deployPack\", obj)\r\n        await this.apiService.execute(input, false);\r\n        this.onAddAndUpdate();\r\n        window.location.reload();\r\n    }\r\n\r\n    setVisibleofWeapon(weapons, value) {\r\n      this.outside = false\r\n      var obj: any = { weapons: weapons, value: value }\r\n      this.customizerDataService.setVisibleofWeapon(obj);\r\n      this.onAddAndUpdate();\r\n    }\r\n\r\n    moveLeft(data) {\r\n      this.outside = false\r\n      console.log(this.selectedItem)\r\n      var obj: any = { packid: data.pack_id, order: data.order, type: this.type, arrId: data._id };\r\n      var selectedItemTemp =  this.customizerDataService.moveLeft(obj);\r\n      this.onAddAndUpdate();\r\n      this.selectedItem = this.customizerDataService.getUIFORMATDATA(selectedItemTemp._id);\r\n    }\r\n\r\n    moveRight(data) {\r\n      this.outside = false\r\n      var obj: any = { packid: data.pack_id, order: data.order, type: this.type, arrId: data._id };\r\n      var selectedItemTemp =this.customizerDataService.moveRight(obj);\r\n      this.onAddAndUpdate();\r\n      this.selectedItem = this.customizerDataService.getUIFORMATDATA(selectedItemTemp._id);\r\n    }\r\n}\r\n","import UndoManager from 'undo-manager';\r\nimport * as _ from 'lodash';\r\nimport {BabylonViewerComponent} from '../babylon-viewer/babylon-viewer.component';\r\n\r\nconst undoManagerMap = {};\r\n\r\nexport const UndoMgr: UndoManager = undoFactory('default');\r\n\r\n\r\n/**\r\n * @param name\r\n * @returns {*}\r\n */\r\n\r\nexport function undoFactory(name: string) {\r\n    console.log(undoManagerMap);\r\n    if (undoManagerMap[name]) {\r\n        return undoManagerMap[name];\r\n    }\r\n\r\n    const undoManager = new UndoManager();\r\n    undoManager.setLimit(9)\r\n    const mUndoMgr = {\r\n        setMaterialProperty: function (viewer: BabylonViewerComponent, meshName: string, propertyName: string, propertyValue: any) {\r\n            console.log(meshName)\r\n            const material = <BABYLON.PBRMaterial>viewer.getMesh(meshName).material;\r\n            let lastVal: any = material.albedoColor.toHexString();\r\n            switch (propertyName) {\r\n                case 'color':\r\n                    lastVal = material.albedoColor.toHexString();\r\n                    break;\r\n                case 'texture':\r\n                    lastVal = material.albedoTexture\r\n                    break;\r\n            }\r\n            this.add({\r\n                undo: function () {\r\n                    console.log('undo', meshName, propertyName, propertyValue);\r\n                    // FIXME this will reset material to starting material\r\n                    // viewer.resetMaterialProperty(meshName, propertyName);\r\n                    viewer.setMeshMaterialProperty(meshName, propertyName, lastVal);\r\n                },\r\n                redo: function () {\r\n                    console.log('redo', meshName, propertyName, propertyValue);\r\n                    viewer.setMeshMaterialProperty(meshName, propertyName, propertyValue);\r\n                }\r\n            });\r\n        },\r\n        setMaterialTexture: function (viewer: BabylonViewerComponent, meshName: string, propertyValue: any) {\r\n\r\n\r\n            const oldMaterial = <BABYLON.PBRMaterial>viewer.getMesh(meshName).material;\r\n\r\n            this.add({\r\n                undo: function () {\r\n                    console.log('undo', meshName, propertyValue);\r\n                    viewer.getMesh(meshName).material = oldMaterial;\r\n                },\r\n                redo: function () {\r\n                    console.log('redo', meshName, propertyValue);\r\n                   viewer.changeMeshMaterial(meshName, propertyValue);\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * Puts attribute changes of a HTMLElement onto the undo stack.\r\n         * @param {HTMLElement} el - The target for the undo/redo.\r\n         * @param {object} attributes - A map containing attributes that should be changed via setAttribute.\r\n         * @param {object} [oldAttributes] - A map containing attributes that will be used for the undo step.\r\n         *                                   Note: If left undefined, 'oldAttributes' will be retrieved from the 'attributes' keys.\r\n         */\r\n        addHTMLAttributes: function (el, attributes, oldAttributes) {\r\n            if (!oldAttributes) {\r\n                oldAttributes = _.mapValues(attributes, (attr, key) => el.getAttribute(key));\r\n            }\r\n\r\n            const addAttrs = (_attributes) =>\r\n                () => _.each(_attributes, (attr, key) =>\r\n                    (attr != null) ? el.setAttribute(key, attr) : el.removeAttribute(key));\r\n            this.add({\r\n                redo: addAttrs(attributes),\r\n                undo: addAttrs(oldAttributes)\r\n\r\n            });\r\n        },\r\n        add: function ({undo, redo}) {\r\n            if (!undo) {\r\n                throw new Error('undo not defined');\r\n            }\r\n            if (!redo) {\r\n                throw new Error('redo not defined');\r\n            }\r\n\r\n            undoManager.add({undo, redo});\r\n\r\n            // call the method once\r\n            redo();\r\n        },\r\n        undo: () => undoManager.undo(),\r\n        redo: () => undoManager.redo(),\r\n        getInstance: () => undoManager\r\n    };\r\n\r\n    undoManagerMap[name] = mUndoMgr;\r\n\r\n    return mUndoMgr;\r\n}\r\n","module.exports = \".babylon-viewer {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  min-height: 60vh;\\r\\n  touch-action: none;\\r\\n}\\r\\n\"","module.exports = \"<canvas #renderTarget class=\\\"babylon-viewer\\\" touch-action=\\\"none\\\" (contextmenu)=\\\"false;\\\"></canvas>\\r\\n\"","/// <reference path=\"../../babylon.d.ts\"/>\r\nimport {AfterContentInit, Component, OnDestroy, ViewChild} from '@angular/core';\r\nimport {ViewerService} from '../viewer.service';\r\nimport {MaterialProperties} from '../customizer-data.service';\r\nimport {NotifierService} from '../notifier.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {forEach} from '@angular/router/src/utils/collection';\r\nimport {GIFExportPreview} from '../utils/GIFExportPreview';\r\n\r\n@Component({\r\n    selector: 'app-babylon-viewer',\r\n    templateUrl: './babylon-viewer.component.html',\r\n    styleUrls: ['./babylon-viewer.component.css']\r\n})\r\nexport class BabylonViewerComponent implements AfterContentInit, OnDestroy {\r\n    @ViewChild('renderTarget')\r\n    renderCanvas;\r\n\r\n    public initialized = false;\r\n\r\n    private displayCanvas: HTMLCanvasElement;\r\n    public engine: BABYLON.Engine;\r\n    public scene: BABYLON.Scene;\r\n    camera: BABYLON.ArcRotateCamera;\r\n    private directionalLight: BABYLON.DirectionalLight;\r\n\r\n    private knownWidth = 0;\r\n    private knownHeight = 0;\r\n    private aspectRatio = 0;\r\n    private loadingCount = 0;\r\n\r\n    private activeRoot: BABYLON.Mesh = null;\r\n    private allAssetContainers: Map<string, BABYLON.AssetContainer> = new Map<string, BABYLON.AssetContainer>();\r\n    private allRootMeshes: Map<string, BABYLON.Mesh> = new Map<string, BABYLON.Mesh>();\r\n    private environment: BABYLON.BaseTexture = null;\r\n    private sourceMaterials: Map<string, BABYLON.Material> = new Map<string, BABYLON.Material>();\r\n    private sourceRoots: Map<string, BABYLON.Mesh> = new Map<string, BABYLON.Mesh>();\r\n    private meshStartingMaterial: Map<number, string> = new Map<number, string>();\r\n    private textures: Map<string, BABYLON.Texture> = new Map<string, BABYLON.Texture>();\r\n\r\n    private resetSubscription: Subscription;\r\n    private objectUnderCursor: BABYLON.AbstractMesh;\r\n    private previousObjectUnderCursor: BABYLON.AbstractMesh;\r\n    resizeOnRender = true;\r\n\r\n\r\n    constructor(private viewerService: ViewerService, notifierService: NotifierService) {\r\n        viewerService.viewer = this;\r\n        this.resetSubscription = notifierService.observable('reset').subscribe(() => {\r\n            const keys: string[] = [];\r\n\r\n            this.allRootMeshes.forEach(function (v, k) {\r\n                keys.push(k);\r\n            });\r\n\r\n            keys.forEach((key) => {\r\n                const currentMesh = this.allRootMeshes.get(key);\r\n                const sourceRoot = this.sourceRoots.get(key);\r\n                const enabled = currentMesh.isEnabled();\r\n\r\n                this.scene.removeMesh(currentMesh, true);\r\n\r\n                const clone = sourceRoot.clone(key);\r\n                clone.setEnabled(enabled);\r\n\r\n                if (enabled) {\r\n                    this.activeRoot = clone;\r\n                }\r\n\r\n                this.allRootMeshes.set(key, clone);\r\n            });\r\n\r\n            this.viewerService.notifyReset();\r\n        });\r\n\r\n        // TODO @7frank remove debug code\r\n        window[\"that\"]=this\r\n        window['debugPreview'] = () => {\r\n\r\n\r\n            const preview = new GIFExportPreview(this.scene, this.displayCanvas, this.viewerService.viewer.camera);\r\n\r\n            preview.enablePreview(this.getActiveWeapon());\r\n            window[\"preview\"]=preview;\r\n        };\r\n\r\n\r\n\r\n    }\r\n\r\n    changeMeshMaterial(meshName: string, materialName: string) {\r\n        if (!this.sourceMaterials.has(materialName)) {\r\n            return;\r\n        }\r\n\r\n        const newMat = <BABYLON.PBRMaterial>this.sourceMaterials.get(materialName).clone(materialName);\r\n        const mesh = this.getMesh(meshName);\r\n        const oldMat = <BABYLON.PBRMaterial>mesh.material;\r\n\r\n        newMat.sideOrientation = oldMat.sideOrientation;\r\n        newMat.albedoColor = oldMat.albedoColor;\r\n        newMat.albedoTexture = oldMat.albedoTexture;\r\n\r\n        mesh.material = newMat;\r\n    }\r\n\r\n    getActiveWeapon() {\r\n        return this.activeRoot;\r\n    }\r\n\r\n    changeWeapon(modelRoot: string, modelPath: string) {\r\n        const combinedName = modelRoot + modelPath;\r\n\r\n        if (this.activeRoot) {\r\n            this.activeRoot.setEnabled(false);\r\n            this.activeRoot = null;\r\n        }\r\n\r\n        this.activeRoot = this.allRootMeshes.get(combinedName);\r\n        if (this.activeRoot) {\r\n            this.activeRoot.setEnabled(true);\r\n        }\r\n    }\r\n\r\n    createMaterial(properties: MaterialProperties) {\r\n        const mat = new BABYLON.PBRMaterial(properties.name, this.scene);\r\n\r\n        mat.reflectionTexture = this.environment;\r\n\r\n        mat.useRoughnessFromMetallicTextureAlpha = false;\r\n        mat.useRoughnessFromMetallicTextureGreen = true;\r\n        mat.useMetallnessFromMetallicTextureBlue = true;\r\n        mat.useAmbientOcclusionFromMetallicTextureRed = true;\r\n        mat.useAmbientInGrayScale = true;\r\n\r\n        if (!!properties.color) {\r\n            mat.albedoColor = BABYLON.Color3.FromHexString(properties.color);\r\n        }\r\n\r\n        if (!!properties.texture) {\r\n            mat.albedoTexture = this.texture(properties.texture);\r\n        }\r\n\r\n        if (!!properties.metallicRoughnessMap) {\r\n            mat.metallic = 1.0;\r\n            mat.roughness = 1.0;\r\n\r\n            mat.metallicTexture = this.texture(properties.metallicRoughnessMap);\r\n        } else {\r\n            mat.metallic = properties.metal ? 1.0 : 0.0;\r\n            mat.roughness = properties.roughness;\r\n        }\r\n\r\n        if (!!properties.normalMap) {\r\n            mat.bumpTexture = this.texture(properties.normalMap);\r\n        }\r\n\r\n        this.sourceMaterials.set(properties.name, mat);\r\n    }\r\n\r\n    getMesh(name: string, modelFolder?: string, modelFile?: string): BABYLON.Mesh {\r\n        const root = (!!modelFolder || !!modelFile) ? this.allRootMeshes.get(modelFolder + modelFile) : this.activeRoot;\r\n        const splitName = name.split('.').reverse();\r\n\r\n        return <BABYLON.Mesh>root.getChildMeshes(false, (node: BABYLON.Node) => {\r\n            const namePieces = node.name.split('.').reverse();\r\n\r\n            if (namePieces.length < splitName.length) {\r\n                return;\r\n            }\r\n\r\n            return splitName.every(function (piece, idx) {\r\n                return piece === namePieces[idx];\r\n            });\r\n        })[0];\r\n    }\r\n\r\n    hideMesh(meshName: string, modelFolder?: string, modelFile?: string) {\r\n        this.getMesh(meshName, modelFolder, modelFile).setEnabled(false);\r\n    }\r\n\r\n    load(modelRoot: string, modelPath: string, visible: boolean = false, onSuccess: () => void = null) {\r\n        const combinedName = modelRoot + modelPath;\r\n\r\n        const extractMaterial = (mesh: BABYLON.AbstractMesh) => {\r\n            if (!!mesh.material) {\r\n                const matName = mesh.material.name;\r\n                const sourceMat = mesh.material.clone(matName + '_source');\r\n\r\n                (<BABYLON.PBRMaterial>sourceMat).reflectionTexture = this.environment;\r\n\r\n                this.sourceMaterials.set(mesh.material.name, sourceMat);\r\n\r\n                mesh.material = sourceMat.clone(matName);\r\n\r\n                this.meshStartingMaterial.set(mesh.uniqueId, matName);\r\n            }\r\n        };\r\n\r\n        ++this.loadingCount;\r\n        this.engine.displayLoadingUI();\r\n\r\n        BABYLON.SceneLoader.LoadAssetContainer(modelRoot, modelPath, this.scene,\r\n            (assets: BABYLON.Nullable<BABYLON.AssetContainer>) => {\r\n                this.allAssetContainers.set(combinedName, assets);\r\n\r\n                const rootMesh = assets.meshes.filter(function (mesh: BABYLON.Mesh) {\r\n                    return !mesh.parent;\r\n                })[0] as BABYLON.Mesh;\r\n\r\n                assets.meshes.forEach((mesh) => {\r\n                    extractMaterial(mesh);\r\n\r\n                    mesh.getChildMeshes(false).forEach(extractMaterial);\r\n                });\r\n\r\n\r\n                rootMesh.setEnabled(false);\r\n                assets.addAllToScene();\r\n\r\n                this.sourceRoots.set(combinedName, rootMesh);\r\n\r\n                const meshCopy = rootMesh.clone(combinedName);\r\n\r\n                this.allRootMeshes.set(combinedName, meshCopy);\r\n\r\n                meshCopy.setEnabled(visible);\r\n\r\n                if (visible) {\r\n                    this.activeRoot = meshCopy;\r\n                }\r\n\r\n                if (!!onSuccess) {\r\n                    onSuccess();\r\n                }\r\n\r\n                if (--this.loadingCount === 0) {\r\n                    this.engine.hideLoadingUI();\r\n                }\r\n            });\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n        this.displayCanvas = this.renderCanvas.nativeElement;\r\n\r\n        // Note: Using preserveDrawingBuffer decreases frame rate and should only be used to render the gif feature.\r\n        //    But must be enabled to generate GIFs.\r\n        //    A better approach would be to render separate scenes and use separate engines for the GIF preview.\r\n        //    But as of now this was not possible.\r\n        this.engine = new BABYLON.Engine(this.displayCanvas, true, {preserveDrawingBuffer: true});\r\n\r\n        this.scene = new BABYLON.Scene(this.engine);\r\n        this.scene.clearColor = new BABYLON.Color4(241 / 255, 242 / 255, 237 / 255, 1);\r\n        this.scene.onPointerObservable.add((eventData, eventState) => {\r\n            this.pointerObserved(eventData, eventState);\r\n        });\r\n\r\n\r\n\r\n        /*this.directionalLight = new BABYLON.DirectionalLight('mainLight', new BABYLON.Vector3(0.5, 1, 0.5), this.scene);\r\n        this.directionalLight.diffuse.set(0.6, 0.6, 0.6);\r\n        this.directionalLight.specular.set(0.6, 0.6, 0.6);*/\r\n\r\n        this.setupCamera();\r\n\r\n        this.engine.runRenderLoop(() => {\r\n            this.render();\r\n           // this.updateHoverControls();\r\n\r\n        });\r\n\r\n        this.initialized = true;\r\n\r\n        this.viewerService.notifyInitialized();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.resetSubscription.unsubscribe();\r\n    }\r\n\r\n    pointerObserved(eventData: BABYLON.PointerInfo, eventState: BABYLON.EventState) {\r\n        if (eventData.type === 1) {\r\n            if (eventData.pickInfo.hit) {\r\n                this.viewerService.notifyClick(eventData.pickInfo.pickedMesh.name);\r\n            }\r\n        }\r\n    }\r\n\r\n    pointerMeshEnter(mesh: BABYLON.AbstractMesh) {\r\n\r\n        const children = mesh.parent.getChildren();\r\n\r\n\r\n        children.forEach((c: BABYLON.AbstractMesh) => {\r\n\r\n            c.visibility = 0.1;\r\n\r\n        });\r\n        mesh.visibility = 1;\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.resizeOnRender) {\r\n            this.resizeAsNeeded();\r\n        }\r\n        /*const camAlpha = this.camera.alpha + Math.PI / 48;\r\n        const camBeta = Math.PI / 2 - this.camera.beta + Math.PI / 48;\r\n        const cosBeta = Math.cos(camBeta);\r\n\r\n        this.directionalLight.direction.set(cosBeta * Math.cos(camAlpha), Math.sin(camBeta), cosBeta * Math.sin(camAlpha));*/\r\n\r\n        this.scene.render();\r\n    }\r\n\r\n    setRotation(modelRoot: string, modelPath: string, rotation: number) {\r\n        const model = this.allRootMeshes.get(modelRoot + modelPath);\r\n        model.rotation.y = Math.PI / 180 * rotation;\r\n    }\r\n\r\n    replaceMaterials(modelRoot: string, modelPath: string, oldMaterialNames: string[], newMaterialName: string) {\r\n        const newMat = this.sourceMaterials.get(newMaterialName);\r\n        const sourceRoot = this.sourceRoots.get(modelRoot + modelPath);\r\n        const rootModel = this.allRootMeshes.get(modelRoot + modelPath);\r\n\r\n        if (!newMat || !rootModel) {\r\n            return;\r\n        }\r\n\r\n        const replaceOldMat = (mesh: BABYLON.AbstractMesh) => {\r\n            if (mesh.material && (oldMaterialNames.indexOf(mesh.material.name) !== -1)) {\r\n                const matClone = newMat.clone(newMaterialName);\r\n\r\n                matClone.sideOrientation = mesh.material.sideOrientation;\r\n\r\n                mesh.material = matClone;\r\n\r\n                this.meshStartingMaterial.set(mesh.uniqueId, newMaterialName);\r\n            }\r\n        };\r\n\r\n        replaceOldMat(sourceRoot);\r\n        replaceOldMat(rootModel);\r\n\r\n        sourceRoot.getChildMeshes(false).forEach(replaceOldMat);\r\n        rootModel.getChildMeshes(false).forEach(replaceOldMat);\r\n    }\r\n\r\n    resetMaterial(meshName: string) {\r\n        this.resetMeshMaterial(this.getMesh(meshName));\r\n    }\r\n\r\n    resetMaterialProperty(meshName: string, propertyName: string) {\r\n        const mesh = this.getMesh(meshName);\r\n\r\n        if (!this.meshStartingMaterial.has(mesh.uniqueId)) {\r\n            return;\r\n        }\r\n\r\n        const matName = this.meshStartingMaterial.get(mesh.uniqueId);\r\n        const sourceMat = <BABYLON.PBRMaterial>this.sourceMaterials.get(matName);\r\n        const meshMat = <BABYLON.PBRMaterial>mesh.material;\r\n\r\n        switch (propertyName) {\r\n            case 'color':\r\n                meshMat.albedoColor = sourceMat.albedoColor;\r\n                break;\r\n            case 'texture':\r\n                meshMat.albedoTexture = sourceMat.albedoTexture;\r\n                break;\r\n        }\r\n    }\r\n\r\n    resetMeshMaterial(mesh: BABYLON.AbstractMesh) {\r\n        if (!this.meshStartingMaterial.has(mesh.uniqueId)) {\r\n            return;\r\n        }\r\n\r\n        const matName = this.meshStartingMaterial.get(mesh.uniqueId);\r\n        const matClone = this.sourceMaterials.get(matName).clone(matName);\r\n\r\n        matClone.sideOrientation = mesh.material.sideOrientation;\r\n\r\n        mesh.material = matClone;\r\n    }\r\n\r\n    resizeAsNeeded(force?: boolean) {\r\n        const measuredWidth = this.displayCanvas.parentElement.clientWidth;\r\n        const measuredHeight = this.displayCanvas.parentElement.clientHeight;\r\n\r\n        if (!force)\r\n        if (  (measuredWidth === this.knownWidth) && (measuredHeight === this.knownHeight)) {\r\n            return;\r\n        }\r\n\r\n\r\n        this.knownWidth = measuredWidth;\r\n        this.knownHeight = measuredHeight;\r\n        this.aspectRatio = measuredWidth / measuredHeight;\r\n\r\n\r\n        // this.engine.resize();\r\n\r\n        this.engine.setSize(measuredWidth, measuredHeight);\r\n\r\n    }\r\n\r\n    setEnvironment(textureBaseName: string) {\r\n        let envTex = null;\r\n\r\n        if (textureBaseName.indexOf('.dds') !== -1) {\r\n            envTex = BABYLON.CubeTexture.CreateFromPrefilteredData(textureBaseName, this.scene);\r\n        } else if (textureBaseName.indexOf('hdr') !== -1) {\r\n            envTex = new BABYLON.HDRCubeTexture(textureBaseName, this.scene, 512);\r\n        } else {\r\n            envTex = new BABYLON.CubeTexture(textureBaseName, this.scene);\r\n        }\r\n\r\n        this.sourceMaterials.forEach(function (mat: BABYLON.PBRMaterial) {\r\n            mat.reflectionTexture = envTex;\r\n        });\r\n\r\n        const setEnv = function (mesh: BABYLON.Mesh) {\r\n            if (!!mesh.material) {\r\n                (<BABYLON.PBRMaterial>mesh.material).reflectionTexture = envTex;\r\n            }\r\n        };\r\n\r\n        this.allRootMeshes.forEach(function (mesh) {\r\n            setEnv(mesh);\r\n\r\n            mesh.getChildMeshes(false).forEach(setEnv);\r\n        });\r\n\r\n        this.environment = envTex;\r\n    }\r\n\r\n    setMeshMaterialProperty(meshName: string, propertyName: string, propertyValue: any) {\r\n        const material = <BABYLON.PBRMaterial>this.getMesh(meshName).material;\r\n\r\n        switch (propertyName) {\r\n            case 'color':\r\n                material.albedoColor = BABYLON.Color3.FromHexString(propertyValue);\r\n                break;\r\n            case 'texture':\r\n                material.albedoTexture = (propertyValue instanceof BABYLON.Texture) ? propertyValue : this.texture(propertyValue);\r\n                break;\r\n        }\r\n    }\r\n\r\n    setupCamera() {\r\n        this.camera = new BABYLON.ArcRotateCamera('mainCam', 0, Math.PI / 2, 2,\r\n            new BABYLON.Vector3(0, 0, 0), this.scene, true);\r\n        this.camera.useFramingBehavior = true;\r\n        this.camera.wheelPrecision = 500;\r\n        this.camera.pinchPrecision = 200;\r\n        this.camera.minZ = 0.01;\r\n        this.camera.lowerRadiusLimit = 0.01;\r\n        this.camera.upperRadiusLimit = 5;\r\n        this.camera.attachControl(this.displayCanvas);\r\n    }\r\n\r\n    showMesh(meshName: string, modelFolder?: string, modelFile?: string) {\r\n        this.getMesh(meshName, modelFolder, modelFile).setEnabled(true);\r\n    }\r\n\r\n    texture(url: string): BABYLON.Texture {\r\n        if (this.textures.has(url)) {\r\n            return this.textures.get(url);\r\n        }\r\n\r\n        const tex = new BABYLON.Texture(url, this.scene, false, false);\r\n\r\n        this.textures.set(url, tex);\r\n\r\n        return tex;\r\n    }\r\n\r\n    // TODO @7frank highlight the active mesh\r\n    private updateHoverControls() {\r\n        const el = this.scene.pick(this.scene.pointerX, this.scene.pointerY, null, true);\r\n\r\n        if (el.pickedMesh != null) {\r\n\r\n            if (this.objectUnderCursor != el.pickedMesh) {\r\n                this.previousObjectUnderCursor = this.objectUnderCursor;\r\n                this.objectUnderCursor = el.pickedMesh;\r\n\r\n                this.pointerMeshEnter(this.objectUnderCursor);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from '../environments/environment';\r\nimport { _ } from \"underscore\";\r\nimport { UserService } from './user.service';\r\n\r\nexport interface AppearanceOption {\r\n  name: string;\r\n  displayImg?: string;\r\n  displayColor?: string;\r\n  interactionValue: string;\r\n  _id?: string,\r\n  pack_id?: string,\r\n  roughness?: string,\r\n  visible?: boolean,\r\n  metal?: boolean,\r\n  order?: number,\r\n  type?: string\r\n}\r\n\r\nexport interface AppearanceOptionGroup {\r\n  allowNone: boolean;\r\n  defaultSelected?: number;\r\n  options: AppearanceOption[];\r\n}\r\n\r\nexport interface AppearanceSection {\r\n  svgPath: string;\r\n  name: string;\r\n  globalReset: boolean;\r\n  interactionType: string;\r\n  affectedParameter?: string;\r\n  optionGroups: AppearanceOptionGroup[];\r\n}\r\n\r\nexport interface PostLoadAction {\r\n  type: string;\r\n  target: string;\r\n}\r\n\r\nexport interface MaterialProperties {\r\n  name: string;\r\n  color?: string;\r\n  texture?: string;\r\n  metal?: boolean;\r\n  roughness?: number;\r\n  metallicRoughnessMap?: string;\r\n  normalMap?: string;\r\n}\r\n\r\nexport interface MaterialReplacement {\r\n  newMaterialName: string;\r\n  oldMaterialNames: string[];\r\n}\r\n\r\nexport interface WeaponCustomization {\r\n  modelFolder: string;\r\n  modelFile: string;\r\n  svgPath: string;\r\n  name: string;\r\n  interactionBlacklist?: string[];\r\n  materials?: MaterialProperties[];\r\n  replaceMaterials?: MaterialReplacement[];\r\n  setupActions?: PostLoadAction[];\r\n  customizations: AppearanceSection[];\r\n}\r\n\r\nexport interface WeaponCustomizationData {\r\n  environment?: string;\r\n  commonMaterials?: MaterialProperties[];\r\n  commonSections?: AppearanceSection[];\r\n  weapons: WeaponCustomization[];\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CustomizerDataService {\r\n  constructor(public http: HttpClient, private userService: UserService) { }\r\n\r\n  generateTextureOptions(count: number, filePattern: string, descriptionPattern: string): AppearanceOption[] {\r\n    const options: AppearanceOption[] = [];\r\n\r\n    for (let i = 1; i <= count; ++i) {\r\n      const numStr = i < 10 ? ('0' + i) : i.toString();\r\n      const uri = 'assets/img/patterns/' + filePattern.replace('#', numStr);\r\n\r\n      options.push({\r\n        name: descriptionPattern.replace('#', numStr),\r\n        displayImg: uri,\r\n        interactionValue: uri\r\n      });\r\n    }\r\n\r\n    return options;\r\n  }\r\n\r\n  dbData: any = null;\r\n  dbWeapons: any = null;\r\n  async weaponsData() {\r\n    const apiUrl = environment.apiBaseURL + 'api/shared';\r\n    let role = null;\r\n    if (this.userService.isAdmin()) {\r\n      role = 'admin'\r\n    }\r\n    var toSend = {\r\n      PRCID: 'packs',\r\n      Method: 'getdata',\r\n      Data: { role: role }\r\n    }\r\n    const api_response = await this.http.post<any>(apiUrl, toSend).toPromise();\r\n    this.dbData = api_response.Data.packs;\r\n    this.dbWeapons = api_response.Data.weapons;\r\n    return this.prepareData(); //this.dbData;\r\n  }\r\n\r\n\r\n   compare(a, b) {\r\n  if (a.order > b.order) return 1;\r\n  if (b.order > a.order) return -1;\r\n  return 0;\r\n}\r\n\r\n  prepareData() {\r\n    var isAdmin = true;\r\n    var obj: any = {\r\n      environment: 'assets/textures/environments/parking.hdr',\r\n      commonMaterials: [],\r\n      commonSections: [{\r\n        svgPath: 'assets/img/section-icons/materials.svg',\r\n        name: 'Material',\r\n        globalReset: true,\r\n        interactionType: 'swapMaterial',\r\n        optionGroups: [{\r\n          allowNone: true,\r\n          options: []\r\n        }]\r\n      },\r\n      {\r\n        svgPath: 'assets/img/section-icons/color.svg',\r\n        name: 'Color',\r\n        globalReset: true,\r\n        interactionType: 'alterMaterial',\r\n        affectedParameter: 'color',\r\n        optionGroups: [{\r\n          allowNone: true,\r\n          options: []\r\n        }]\r\n      },\r\n      {\r\n        svgPath: 'assets/img/section-icons/textures.svg',\r\n        name: 'Patterns',\r\n        globalReset: true,\r\n        interactionType: 'alterMaterial',\r\n        affectedParameter: 'texture',\r\n        optionGroups: [{\r\n          allowNone: true,\r\n          options: []\r\n        }]\r\n      }\r\n      ],\r\n      weapons: []\r\n    };\r\n    obj.weapons = this.dbWeapons;\r\n    var temp = this.dbData;\r\n    obj.commonSections[0].optionGroups[0].options = [];\r\n    obj.commonSections[1].optionGroups[0].options = [];\r\n    obj.commonSections[2].optionGroups[0].options = [];\r\n    obj.commonMaterials = [];\r\n\r\n    if (temp.length > 0) {\r\n      obj.commonSections[0].optionGroups[0].options = [];\r\n      obj.commonSections[1].optionGroups[0].options = [];\r\n      obj.commonSections[2].optionGroups[0].options = [];\r\n      obj.commonMaterials = [];\r\n\r\n      for (let i = 0; i < temp.length; i++) {\r\n        if (temp[i].metarials.length > 0) {\r\n\r\n          for (let j = 0; j < temp[i].metarials.length; j++) {\r\n            let option: any = {}\r\n\r\n            option.name = temp[i].metarials[j].name\r\n            option.displayImg = temp[i].metarials[j].image\r\n            option.interactionValue = temp[i].metarials[j].name\r\n            option.pack_id = temp[i]._id;\r\n            option._id = temp[i].metarials[j]._id;\r\n            option.roughness = temp[i].metarials[j].roughness;\r\n            option.visible = temp[i].metarials[j].visible;\r\n            option.metal = temp[i].metarials[j].metal;\r\n            option.displayColor = temp[i].metarials[j].colors;\r\n            option.order = temp[i].metarials[j].order;\r\n            option.type = 'MAT';\r\n\r\n            if (isAdmin) {\r\n              obj.commonSections[0].optionGroups[0].options.push(option)\r\n            } else if (temp[i].metarials[j].visible) {\r\n              obj.commonSections[0].optionGroups[0].options.push(option)\r\n            }\r\n\r\n\r\n            let commonMaterials: any = {}\r\n            commonMaterials.name = temp[i].metarials[j].name\r\n            commonMaterials.color = temp[i].metarials[j].colors\r\n            commonMaterials.metal = temp[i].metarials[j].metal\r\n            commonMaterials.roughness = temp[i].metarials[j].roughness\r\n\r\n            obj.commonMaterials.push(commonMaterials)\r\n          }\r\n\r\n          obj.commonSections[0].optionGroups[0].options.sort(this.compare);\r\n\r\n        }\r\n        if (temp[i].colors.length > 0) {\r\n          for (let j = 0; j < temp[i].colors.length; j++) {\r\n            let option: any = {}\r\n\r\n            option.name = temp[i].colors[j].name\r\n            option.displayColor = temp[i].colors[j].code\r\n            option.interactionValue = temp[i].colors[j].code\r\n            option.pack_id = temp[i]._id;\r\n            option._id = temp[i].colors[j]._id;\r\n            option.visible = temp[i].colors[j].visible;\r\n            option.order = temp[i].colors[j].order;\r\n            option.type = 'COL';\r\n\r\n            if (isAdmin) {\r\n              obj.commonSections[1].optionGroups[0].options.push(option)\r\n            } else if (temp[i].colors[j].visible) {\r\n              obj.commonSections[1].optionGroups[0].options.push(option)\r\n            }\r\n          }\r\n\r\n          obj.commonSections[1].optionGroups[0].options.sort(this.compare);\r\n        }\r\n        if (temp[i].patterns.length > 0) {\r\n          for (let j = 0; j < temp[i].patterns.length; j++) {\r\n            let option: any = {}\r\n\r\n            option.name = temp[i].patterns[j].name\r\n            option.displayImg = temp[i].patterns[j].image\r\n            option.interactionValue = temp[i].patterns[j].image\r\n            option.pack_id = temp[i]._id;\r\n            option._id = temp[i].patterns[j]._id;\r\n            option.visible = temp[i].patterns[j].visible;\r\n            option.order = temp[i].patterns[j].order;\r\n            option.type = 'PAT';\r\n\r\n            if (isAdmin) {\r\n              obj.commonSections[2].optionGroups[0].options.push(option)\r\n            } else if (temp[i].patterns[j].visible) {\r\n              obj.commonSections[2].optionGroups[0].options.push(option)\r\n            }\r\n          }\r\n\r\n          obj.commonSections[2].optionGroups[0].options.sort(this.compare);\r\n        }\r\n      }\r\n\r\n    }\r\n    return obj;\r\n   }\r\n\r\n  getOrder(arr) {\r\n    var order = 0;\r\n    if (arr.length > 0) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (arr[i].order > order)\r\n          order = arr[i].order;\r\n      }\r\n    }\r\n    return order + 1;\r\n  }\r\n\r\n  addDataOnPacks(obj) {\r\n    //obj.OPER\r\n    if (obj.metarials) {\r\n      obj.metarials[0]._id = new Date().getTime(); //auto generate unique id ;\r\n      console.log(this.dbData)\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == obj.packid })\r\n      if (i > -1) {\r\n        if (this.dbData[i].opname) {\r\n          delete obj.metarials[0].opname;\r\n        }\r\n        let order = this.getOrder(this.dbData[i].metarials);\r\n        obj.metarials[0].order = order\r\n\r\n        this.dbData[i].metarials.push(obj.metarials[0]);\r\n      }\r\n    }\r\n    else if (obj.colors){\r\n      console.log(this.dbData)\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == obj.packid })\r\n      if (i > -1) {\r\n        if (this.dbData[i].opname) {\r\n          delete obj.colors[0].opname;\r\n        }\r\n\r\n        let order = this.getOrder(this.dbData[i].colors);\r\n        obj.colors[0].order = order\r\n\r\n        this.dbData[i].colors.push(obj.colors[0])\r\n      }\r\n    }\r\n    else if (obj.patterns){\r\n      console.log(this.dbData)\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == obj.packid })\r\n      if (i > -1) {\r\n        if (this.dbData[i].opname) {\r\n          delete obj.patterns[0].opname;\r\n        }\r\n\r\n        let order = this.getOrder(this.dbData[i].patterns);\r\n        obj.patterns[0].order = order\r\n\r\n        this.dbData[i].patterns.push(obj.patterns[0])\r\n      }\r\n    }\r\n    localStorage.setItem(\"Packs\", JSON.stringify(this.dbData))\r\n  }\r\n\r\n  editDataOnPacks(obj) {\r\n    console.log(obj)\r\n    \r\n    if (obj.metarials) {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == obj.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].metarials, function (t) { return t._id == obj.arrId })\r\n        if (j > -1) {\r\n          if (this.dbData[i].metarials[j].opname && this.dbData[i].metarials[j].opname == \"ADD\") {\r\n            obj.metarials[0].opname = \"ADD\"\r\n            this.dbData[i].metarials[j] = obj.metarials[0]\r\n          } else {\r\n            this.dbData[i].metarials[j] = obj.metarials[0]\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else if (obj.colors) {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == obj.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].colors, function (t) { return t._id == obj.arrId })\r\n        if (j > -1) {\r\n          if (this.dbData[i].colors[j].opname && this.dbData[i].colors[j].opname == \"ADD\") {\r\n            obj.colors[0].opname = \"ADD\"\r\n            this.dbData[i].colors[j] = obj.colors[0]\r\n          } else {\r\n            this.dbData[i].colors[j] = obj.colors[0]\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else if (obj.patterns) {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == obj.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].patterns, function (t) { return t._id == obj.arrId })\r\n        if (j > -1) {\r\n          if (this.dbData[i].patterns[j].opname && this.dbData[i].patterns[j].opname == \"ADD\") {\r\n            obj.patterns[0].opname = \"ADD\"\r\n            this.dbData[i].patterns[j] = obj.patterns[0]\r\n          } else {\r\n            this.dbData[i].patterns[j] = obj.patterns[0]\r\n          }\r\n        }\r\n      }\r\n    }\r\n    localStorage.setItem(\"Packs\", JSON.stringify(this.dbData))\r\n  }\r\n\r\n  deleted = [];\r\n  deleteDataOnPack(data) {\r\n\r\n    this.deleted.push(data)\r\n\r\n\r\n    if (data.type == \"MATERIALS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].metarials, function (t) { return t._id == data.arrId })\r\n        if (j > -1) {\r\n          this.dbData[i].metarials.splice(j, 1)\r\n        }\r\n      }\r\n    }\r\n    else if (data.type == \"COLORS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].colors, function (t) { return t._id == data.arrId })\r\n        if (j > -1) {\r\n          this.dbData[i].colors.splice(j, 1)\r\n        }\r\n      }\r\n    }\r\n    else if (data.type == \"PATTERNS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].patterns, function (t) { return t._id == data.arrId })\r\n        if (j > -1) {\r\n          this.dbData[i].patterns.splice(j, 1)\r\n        }\r\n      }\r\n    }\r\n    localStorage.setItem(\"Packs\", JSON.stringify(this.dbData))\r\n  }\r\n\r\n  setVisibleOfPackData(data) {\r\n    if (data.type == \"MATERIALS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].metarials, function (t) { return t._id == data.arrId })\r\n        if (j > -1) {\r\n          this.dbData[i].metarials[j].visible = data.value\r\n          if (this.dbData[i].metarials[j].opname && this.dbData[i].metarials[j].opname == \"ADD\") {\r\n          } else {\r\n            this.dbData[i].metarials[j].opname = 'EDIT'\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else if (data.type == \"COLORS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].colors, function (t) { return t._id == data.arrId })\r\n        if (j > -1) {\r\n          this.dbData[i].colors[j].visible = data.value\r\n          if (this.dbData[i].colors[j].opname && this.dbData[i].colors[j].opname == \"ADD\") {\r\n          } else {\r\n            this.dbData[i].colors[j].opname = 'EDIT'\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else if (data.type == \"PATTERNS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        let j = _.findIndex(this.dbData[i].patterns, function (t) { return t._id == data.arrId })\r\n        if (j > -1) {\r\n          this.dbData[i].patterns[j].visible = data.value\r\n          if (this.dbData[i].patterns[j].opname && this.dbData[i].patterns[j].opname == \"ADD\") {\r\n          } else {\r\n            this.dbData[i].patterns[j].opname = 'EDIT'\r\n          }\r\n        }\r\n      }\r\n    }\r\n    localStorage.setItem(\"Packs\", JSON.stringify(this.dbData))\r\n  }\r\n\r\n  setVisibleofWeapon(obj) {\r\n    let i = _.findIndex(this.dbWeapons, function (t) { return t._id == obj.weapons._id })\r\n    if (i > -1) {\r\n      this.dbWeapons[i].visible = obj.value\r\n      this.dbWeapons[i].opname = \"EDIT\"\r\n    }\r\n  }\r\n\r\n  moveLeft(data) {\r\n    var selectedItemTemp = null;\r\n    if (data.type == \"MATERIALS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        this.dbData[i].metarials.sort(this.compare);\r\n        let j = _.findIndex(this.dbData[i].metarials, function (t) { return t._id == data.arrId })\r\n        if (j > -1 && data.order > 1) {\r\n          this.dbData[i].metarials[j].order = this.dbData[i].metarials[j - 1].order\r\n          this.dbData[i].metarials[j].opname = 'EDIT'\r\n          this.dbData[i].metarials[j - 1].order = data.order\r\n          this.dbData[i].metarials[j - 1].opname = 'EDIT'\r\n          selectedItemTemp = this.dbData[i].metarials[j];\r\n        }\r\n      }\r\n    }\r\n    else if (data.type == \"COLORS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        this.dbData[i].colors.sort(this.compare);\r\n        let j = _.findIndex(this.dbData[i].colors, function (t) { return t._id == data.arrId })\r\n        if (j > -1 && data.order > 1) {\r\n          this.dbData[i].colors[j].order = this.dbData[i].colors[j - 1].order\r\n          this.dbData[i].colors[j].opname = 'EDIT'\r\n          this.dbData[i].colors[j - 1].order = data.order\r\n          this.dbData[i].colors[j - 1].opname = 'EDIT'\r\n          selectedItemTemp = this.dbData[i].colors[j]\r\n        }\r\n      }\r\n    }\r\n    else if (data.type == \"PATTERNS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        this.dbData[i].patterns.sort(this.compare);\r\n        let j = _.findIndex(this.dbData[i].patterns, function (t) { return t._id == data.arrId })\r\n        if (j > -1 && data.order > 1) {\r\n          this.dbData[i].patterns[j].order = this.dbData[i].patterns[j - 1].order\r\n          this.dbData[i].patterns[j].opname = 'EDIT'\r\n          this.dbData[i].patterns[j - 1].order = data.order\r\n          this.dbData[i].patterns[j - 1].opname = 'EDIT'\r\n          selectedItemTemp = this.dbData[i].patterns[j]\r\n        }\r\n      }\r\n    }\r\n    localStorage.setItem(\"Packs\", JSON.stringify(this.dbData));\r\n    return selectedItemTemp;\r\n  }\r\n\r\n\r\n  moveRight(data) {\r\n    var selectedItemTemp = null;\r\n    if (data.type == \"MATERIALS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        this.dbData[i].metarials.sort(this.compare);\r\n        let j = _.findIndex(this.dbData[i].metarials, function (t) { return t._id == data.arrId })\r\n        let max = this.getOrder(this.dbData[i].metarials)\r\n        if (j > -1 && data.order < max-1) {\r\n          this.dbData[i].metarials[j].order = this.dbData[i].metarials[j + 1].order\r\n          this.dbData[i].metarials[j].opname = 'EDIT'\r\n          this.dbData[i].metarials[j + 1].order = data.order\r\n          this.dbData[i].metarials[j + 1].opname = 'EDIT'\r\n          selectedItemTemp = this.dbData[i].metarials[j];\r\n        }\r\n      }\r\n    }\r\n    else if (data.type == \"COLORS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        this.dbData[i].colors.sort(this.compare);\r\n        let j = _.findIndex(this.dbData[i].colors, function (t) { return t._id == data.arrId })\r\n        let max = this.getOrder(this.dbData[i].colors)\r\n        if (j > -1 && data.order < max - 1) {\r\n          this.dbData[i].colors[j].order = this.dbData[i].colors[j + 1].order\r\n          this.dbData[i].colors[j].opname = 'EDIT'\r\n          this.dbData[i].colors[j + 1].order = data.order\r\n          this.dbData[i].colors[j + 1].opname = 'EDIT'\r\n          selectedItemTemp = this.dbData[i].colors[j]\r\n        }\r\n      }\r\n    }\r\n    else if (data.type == \"PATTERNS\") {\r\n      let i = _.findIndex(this.dbData, function (t) { return t._id == data.packid })\r\n      if (i > -1) {\r\n        this.dbData[i].patterns.sort(this.compare);\r\n        let j = _.findIndex(this.dbData[i].patterns, function (t) { return t._id == data.arrId })\r\n        let max = this.getOrder(this.dbData[i].patterns)\r\n        if (j > -1 && data.order < max - 1) {\r\n          this.dbData[i].patterns[j].order = this.dbData[i].patterns[j + 1].order\r\n          this.dbData[i].patterns[j].opname = 'EDIT'\r\n          this.dbData[i].patterns[j + 1].order = data.order\r\n          this.dbData[i].patterns[j + 1].opname = 'EDIT'\r\n          selectedItemTemp = this.dbData[i].patterns[j]\r\n        }\r\n      }\r\n    }\r\n    localStorage.setItem(\"Packs\", JSON.stringify(this.dbData))\r\n    return selectedItemTemp;\r\n  }\r\n\r\n  getUIFORMATDATA(item_id) {\r\n    var uidata = this.prepareData();\r\n    console.log(uidata);\r\n    for (var i = 0; i < uidata.commonSections.length; i++) {\r\n      var og = uidata.commonSections[i].optionGroups;\r\n      for (var j = 0; j < (og || []).length; j++) {\r\n        var options = og[j].options;\r\n        var index = (options || []).findIndex((o) => o._id === item_id)\r\n        if (index >= 0) {\r\n          return og[j].options[index];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  weaponsDataLocal() {\r\n    return this.prepareData();\r\n  }\r\n}\r\n\r\n","module.exports = \"\"","module.exports = \"<div class=\\\"modal-header\\\">\\r\\n  <h4>Sign up or Log in</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"close()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <!-- <div class=\\\"text-center\\\">\\r\\n    <a href=\\\"#\\\"><img style=\\\"height: 2em;\\\" src=\\\"https://scontent.fatl1-2.fna.fbcdn.net/v/t39.2365-6/18928641_251957295286418_4362086450741641216_n.png?_nc_cat=0&oh=96b2909091a5a140a6846aada6e4db93&oe=5BDAFA05\\\" alt=\\\"Continue with Facebook\\\"/></a>\\r\\n  </div> -->\\r\\n  <form class=\\\"needs-validation\\\" novalidate>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"loginUsername\\\">Username</label>\\r\\n      <input id=\\\"loginUsername\\\" type=\\\"text\\\" placeholder=\\\"PewPewCustoms\\\" class=\\\"form-control\\\">\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"loginPassword\\\">Password</label>\\r\\n      <input id=\\\"loginPassword\\\" type=\\\"password\\\" class=\\\"form-control\\\">\\r\\n    </div>\\r\\n    <div class=\\\"text-right\\\">\\r\\n      <!-- <a href=\\\"#\\\">Forgot Password?</a>&nbsp; -->\\r\\n      <input type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"login()\\\" value=\\\"Login\\\" />\\r\\n        </div>\\r\\n    <!--<hr>\\r\\n     <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"loginConfirmPassword\\\">Confirm Password</label>\\r\\n      <input id=\\\"loginConfirmPassword\\\" type=\\\"password\\\" class=\\\"form-control\\\">\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"loginEmail\\\">E-mail</label>\\r\\n      <input id=\\\"loginEmail\\\" type=\\\"email\\\" class=\\\"form-control\\\" placeholder=\\\"account@emailhost.com\\\">\\r\\n    </div>\\r\\n    <div class=\\\"text-right\\\">\\r\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Register</button>\\r\\n    </div> -->\\r\\n  </form>\\r\\n</div>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap';\r\nimport { APIService } from '../../providers/api-service';\r\nimport { UserService } from '../user.service';\r\n\r\n@Component({\r\n  selector: 'modal-content',\r\n  templateUrl: './login-modal.component.html',\r\n  styleUrls: ['./login-modal.component.css'],\r\n  providers: [APIService]\r\n})\r\nexport class LoginModalComponent implements OnInit {\r\n\r\n  constructor(private modalRef: BsModalRef, private apiService: APIService,\r\n    private userService: UserService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  close() {\r\n    this.modalRef.hide();\r\n  }\r\n\r\n  async login() {\r\n    const output = await this.apiService.executeByURL('api/login', {\r\n      email: \"user1@gmail.com\", password: \"user123\"\r\n    });\r\n    if (output && output.isapisuccess) {\r\n      const res: any = output.apidata;\r\n      if (res.Code === \"P00001\") {\r\n        this.userService.storeUser(res.Data.user,res.Data.tokenId);\r\n        this.close();\r\n      }\r\n      else {\r\n        alert(\"Invalid user name and password\");\r\n      }\r\n    } else {\r\n      alert(\"Invalid user name and password\");\r\n    }\r\n  }\r\n}\r\n","module.exports = \".navbar {\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n.navbar-brand {\\r\\n  padding: 0 0.5em;\\r\\n}\\r\\n\\r\\n.navbar-brand img {\\r\\n  height: 2em;\\r\\n}\\r\\n\\r\\n.navbar-nav * {\\r\\n  vertical-align: middle;\\r\\n}\\r\\n\\r\\n.nav-item a {\\r\\n  display: block;\\r\\n  margin: 0.8em 0;\\r\\n  padding: 0 0.5em;\\r\\n}\\r\\n\\r\\n.nav-item:not(:first-child) a {\\r\\n  border-left: 1px solid grey;\\r\\n}\\r\\n\\r\\n.nav-item .icon {\\r\\n  margin-right: 0.25em;\\r\\n}\\r\\n\\r\\n.nav-item .icon.svg {\\r\\n  display: inline-block;\\r\\n  line-height: 0;\\r\\n  height: 0.75em;\\r\\n}\\r\\n\\r\\n.nav-item.large {\\r\\n  background-color: #EC121F;\\r\\n  color: #F1F2ED;\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n.nav-item.large a {\\r\\n  border-left: none;\\r\\n}\\r\\n\\r\\n.nav-item.large a:hover {\\r\\n  color: #222222;\\r\\n}\\r\\n\"","module.exports = \"<nav class=\\\"navbar navbar-expand\\\">\\r\\n  <a class=\\\"navbar-brand mr-auto\\\" href=\\\"#\\\"><img src=\\\"assets/img/logo-goat.png\\\"></a>\\r\\n  <ul class=\\\"navbar-nav\\\">\\r\\n    <li class=\\\"nav-item\\\">\\r\\n      <a href=\\\"#\\\"><i class=\\\"material-icons md-inherit icon\\\">shopping_cart</i><span>PEWPEW SHOP</span></a>\\r\\n    </li>\\r\\n    <li class=\\\"nav-item\\\">\\r\\n      <a href=\\\"#\\\" (click)=\\\"resetMaterials($event)\\\"><i class=\\\"material-icons md-inherit icon\\\">refresh</i><span>START OVER</span></a>\\r\\n    </li>\\r\\n    <li class=\\\"nav-item\\\">\\r\\n      <a href=\\\"#\\\" (click)=\\\"startSharing($event)\\\"><i class=\\\"material-icons md-inherit icon\\\">launch</i><span>SHARE</span></a>\\r\\n    </li>\\r\\n    <li class=\\\"nav-item\\\">\\r\\n      <a href=\\\"#\\\" (click)=\\\"openFavoriteModal($event)\\\"><i class=\\\"material-icons md-inherit icon\\\">favorite_border</i><span>FAVORITE</span></a>\\r\\n    </li>\\r\\n    <li class=\\\"nav-item large\\\" *ngIf=\\\"!loggedUser\\\">\\r\\n      <a href=\\\"#\\\" (click)=\\\"openLoginModal($event)\\\"><i class=\\\"material-icons md-inherit icon\\\">account_circle</i><span>MY ACCOUNT</span></a>\\r\\n    </li>\\r\\n    <li class=\\\"nav-item large\\\" *ngIf=\\\"loggedUser\\\">\\r\\n      <a href=\\\"#\\\" (click)=\\\"logout($event)\\\"><i class=\\\"material-icons md-inherit icon\\\">account_circle</i><span>Logout</span></a>\\r\\n    </li>\\r\\n  </ul>\\r\\n</nav>\\r\\n\\r\\n\\r\\n<div class=\\\"modal\\\" style=\\\" overflow-y: scroll;\\\" id=\\\"loginmodel\\\" role=\\\"dialog\\\">\\r\\n  <div class=\\\"modal-dialog\\\">\\r\\n    <!-- Modal content-->\\r\\n    <div class=\\\"modal-content\\\">\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4>Sign up or Log in</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"hideLoginModel()\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <!-- <div class=\\\"text-center\\\">\\r\\n    <a href=\\\"#\\\"><img style=\\\"height: 2em;\\\" src=\\\"https://scontent.fatl1-2.fna.fbcdn.net/v/t39.2365-6/18928641_251957295286418_4362086450741641216_n.png?_nc_cat=0&oh=96b2909091a5a140a6846aada6e4db93&oe=5BDAFA05\\\" alt=\\\"Continue with Facebook\\\"/></a>\\r\\n  </div> -->\\r\\n  <form class=\\\"needs-validation\\\" novalidate>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"loginUsername\\\">Username</label>\\r\\n      <input id=\\\"loginUsername\\\" type=\\\"text\\\" name=\\\"username\\\" placeholder=\\\"PewPewCustoms\\\" (keyup.enter)=\\\"login()\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"username\\\">\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"loginPassword\\\">Password</label>\\r\\n      <input id=\\\"loginPassword\\\" type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password\\\" (keyup.enter)=\\\"login()\\\" [(ngModel)]=\\\"password\\\">\\r\\n    </div>\\r\\n    <div class=\\\"text-right\\\">\\r\\n      <!-- <a href=\\\"#\\\">Forgot Password?</a>&nbsp; -->\\r\\n      <input type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"login()\\\" value=\\\"Login\\\" />\\r\\n      \\r\\n      <input type=\\\"button\\\" class=\\\"btn btn-info\\\" (click)=\\\"hideLoginModel()\\\" value=\\\"Cancle\\\" />\\r\\n      \\r\\n\\r\\n    </div>\\r\\n    <!--<hr>\\r\\n     <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"loginConfirmPassword\\\">Confirm Password</label>\\r\\n      <input id=\\\"loginConfirmPassword\\\" type=\\\"password\\\" class=\\\"form-control\\\">\\r\\n    </div>\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"loginEmail\\\">E-mail</label>\\r\\n      <input id=\\\"loginEmail\\\" type=\\\"email\\\" class=\\\"form-control\\\" placeholder=\\\"account@emailhost.com\\\">\\r\\n    </div>\\r\\n    <div class=\\\"text-right\\\">\\r\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Register</button>\\r\\n    </div> -->\\r\\n  </form>\\r\\n</div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import {Component, OnInit} from '@angular/core';\r\nimport {BsModalRef, BsModalService} from 'ngx-bootstrap';\r\nimport {UserService} from '../user.service';\r\nimport {LoginModalComponent} from '../login-modal/login-modal.component';\r\nimport {NotifierService} from '../notifier.service';\r\nimport {THREE2GIFConverter} from '../utils/GIFExport';\r\nimport {ViewerService} from '../viewer.service';\r\nimport {ShareModalComponent} from '../share-modal/share-modal.component';\r\nimport {GIFExportPreview} from '../utils/GIFExportPreview';\r\nimport {GIFUpload} from '../utils/GIFUpload';\r\nimport { APIService } from '../../providers/api-service';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n    selector: 'app-nav-bar',\r\n    templateUrl: './nav-bar.component.html',\r\n    styleUrls: ['./nav-bar.component.css'],\r\n    providers: [APIService]\r\n})\r\nexport class NavBarComponent implements OnInit {\r\n    public openModal: BsModalRef = null;\r\n\r\n    loggedUser = null;\r\n    constructor(private modalService: BsModalService, private userService: UserService,\r\n        private apiService: APIService,\r\n                private notifierService: NotifierService, private viewerService: ViewerService) {\r\n    }\r\n\r\n\r\n    ngOnInit() {\r\n        this.loggedUser = this.userService.retrieveUser();\r\n    }\r\n\r\n    /**\r\n     * Initialises the sharing of the content via social media\r\n     * @param {Event} event\r\n     */\r\n    startSharing(event?: MouseEvent) {\r\n\r\n        this.openShareModal(event);\r\n\r\n\r\n\r\n    }\r\n    openFavoriteModal(event: MouseEvent) {\r\n        if (this.userService.loggedIn()) {\r\n            // TODO\r\n        } else {\r\n            //this.openModal = this.modalService.show(LoginModalComponent);\r\n            $(\"#loginmodel\").show();\r\n        }\r\n\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    openLoginModal(event: MouseEvent) {\r\n        if (this.userService.loggedIn()) {\r\n            // TODO\r\n        } else {\r\n            //this.openModal = this.modalService.show(LoginModalComponent);\r\n          $('#loginUsername').val('')\r\n          $('#loginPassword').val('')\r\n            $(\"#loginmodel\").show();\r\n        }\r\n\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    logout(event: MouseEvent) {\r\n        this.userService.clearUser()\r\n        this.loggedUser = this.userService.retrieveUser();\r\n        window.location.reload();\r\n    }\r\n\r\n    openShareModal(event: MouseEvent) {\r\n            this.openModal = this.modalService.show(ShareModalComponent);\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n\r\n    resetMaterials(event: MouseEvent) {\r\n        this.notifierService.notify('reset');\r\n\r\n        return this.stopEvent(event);\r\n    }\r\n\r\n    stopEvent(event: MouseEvent) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n    username='';\r\n  password='';\r\n  async login() {\r\n    // const output = await this.apiService.executeByURL('api/login', {\r\n    //   email: \"user1@gmail.com\", password: \"user123\"\r\n    // });\r\n    const output = await this.apiService.executeByURL('api/login', {\r\n      email: this.username, password: this.password\r\n    });\r\n    console.log(output);\r\n    if (output && output.isapisuccess) {\r\n      const res: any = output.apidata;\r\n      if (res.Code === \"P00001\") {\r\n        this.userService.storeUser(res.Data,res.Data._id);\r\n        this.loggedUser = res.Data;\r\n        window.location.reload();\r\n        $(\"#loginmodel\").hide();\r\n      }\r\n      else {\r\n        alert(\"Invalid user name and password\");\r\n      }\r\n    } else {\r\n      alert(\"Invalid user name and password\");\r\n    }\r\n  }\r\n\r\n  hideLoginModel(){\r\n    $(\"#loginmodel\").hide();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {Observable, Subject} from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NotifierService {\r\n  private dataSources = new Map<string, Subject<any>>();\r\n  private subscriptions = new Map<string, Observable<any>>();\r\n\r\n  constructor() { }\r\n\r\n  notify(eventName: string, data?: any) {\r\n    if (!this.dataSources.has(eventName)) {\r\n      return;\r\n    }\r\n    this.dataSources.get(eventName).next(data);\r\n  }\r\n\r\n  observable(eventName: string) {\r\n    if (!this.dataSources.has(eventName)) {\r\n      const subject = new Subject<any>();\r\n\r\n      this.dataSources.set(eventName, subject);\r\n      this.subscriptions.set(eventName, subject.asObservable());\r\n    }\r\n\r\n    return this.subscriptions.get(eventName);\r\n  }\r\n}\r\n","/*\r\n    const root = 'https://orange-lionfish-48.localtunnel.me';\r\n        //const root=\"http://localhost:3000\"\r\n\r\n        //const url = 'https://gist.githubusercontent.com/7frank/faa4393b6ea43a3403d8e1dc57f70060/raw/51d8cc4ace915b3d2d4c8bc286db935e67449dcb/facebook';\r\n        //  const url = 'http://localhost:3000/api/share/1d7ddd31-585b-437b-910a-7ceda233e058';\r\n        const url = root + '/api/share/1d7ddd31-585b-437b-910a-7ceda233e058';\r\n\r\n* */\r\n\r\n\r\nimport {GIFConverterOptions} from '../utils/GIFExport';\r\n\r\nexport interface Config {\r\n    share:\r\n        {\r\n            baseURL: string;\r\n            shareRoute: string;\r\n            gifUploadRoute: string;\r\n            tarUploadRoute: string;\r\n            imagesRoute: string;\r\n        };\r\n    gif: {\r\n        height?: number;\r\n        width?: number;\r\n        options: GIFConverterOptions\r\n    };\r\n    debug?: boolean;\r\n}\r\n\r\nconst isDebugMode = (<any>window).location.hash === '#debug';\r\n\r\nexport const defaults: Config = {\r\n    share: {\r\n        baseURL: window.location.origin,\r\n        shareRoute: '/api/share/',\r\n        gifUploadRoute: '/api/upload',\r\n        tarUploadRoute: '/api/uploadTar',\r\n        imagesRoute: '/images/'\r\n    },\r\n    gif: {\r\n        height: 512,\r\n        width: 512,\r\n        options: {quality: 15, totalFrames: 120, framesPerSecond: 30}\r\n    }\r\n};\r\n\r\n\r\nexport const debug: Config = {\r\n    share: {\r\n        baseURL: window.location.origin,\r\n        shareRoute: '/api/share/',\r\n        gifUploadRoute: '/api/upload',\r\n        tarUploadRoute: '/api/uploadTar',\r\n        imagesRoute: '/images/'\r\n    },\r\n    gif: {\r\n        height: 512,\r\n        width: 512,\r\n        options: {quality: 15, totalFrames: 2, framesPerSecond: 30}\r\n    }\r\n};\r\n\r\n// TODO @7frank do we need mobile settings?\r\nexport const mobile: Config = {\r\n    share: {\r\n        baseURL: window.location.origin,\r\n        shareRoute: '/api/share/',\r\n        gifUploadRoute: '/api/upload',\r\n        tarUploadRoute: '/api/uploadTar',\r\n        imagesRoute: '/images/'\r\n    },\r\n    gif: {\r\n        options: {quality: 15, totalFrames: 60, framesPerSecond: 30}\r\n    }\r\n};\r\n\r\n\r\n// -------------------------\r\n\r\n\r\nconst config = isDebugMode ? debug : defaults;\r\nconfig.debug = isDebugMode;\r\n\r\nexport default config;\r\n\r\n\r\n\r\n\r\n\r\n\r\n","module.exports = \".gif-preview-viewer {\\r\\n    width: 640px;\\r\\n    height: 480px;\\r\\n    touch-action: none;\\r\\n}\\r\\n\\r\\n\\r\\n.header-color {\\r\\n    background-color: #DADADA;\\r\\n\\r\\n}\\r\\n\\r\\n\\r\\n.header-shadow {\\r\\n    box-shadow: 0 .5rem 1rem rgba(0,0,0,.5)!important;\\r\\n}\\r\\n\\r\\n\\r\\n.overlay-parent{\\r\\n    position:relative !important;\\r\\n\\r\\n\\r\\n}\\r\\n\\r\\n\\r\\n.overlay\\r\\n{\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    bottom: 0;\\r\\n    background-color: rgba(255, 255, 255, 0.85);\\r\\n    z-index: 9999;\\r\\n    color: white;\\r\\n    display: inline-block;\\r\\n}\"","module.exports = \"<div class=\\\"header-color header-shadow p-1\\\" xmlns=\\\"http://www.w3.org/1999/html\\\">\\r\\n    <h4 class=\\\"text-center\\\">SHARE</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body pl-5 pr-5\\\">\\r\\n\\r\\n    <!--\\r\\n     <nav aria-label=\\\"breadcrumb\\\">\\r\\n         <ol class=\\\"breadcrumb\\\">\\r\\n             <li class=\\\"breadcrumb-item\\\"><a href=\\\"#\\\">Preset</a></li>\\r\\n             <li class=\\\"breadcrumb-item\\\"><a href=\\\"#\\\">Share</a></li>\\r\\n             <li class=\\\"breadcrumb-item active\\\" aria-current=\\\"page\\\">Etc</li>\\r\\n         </ol>\\r\\n     </nav>\\r\\n     -->\\r\\n\\r\\n\\r\\n    <div [style.display]=\\\"error ? 'block' : 'none'\\\" class=\\\"alert alert-danger\\\">\\r\\n        <strong>Error: </strong> {{error}}\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div class=\\\"text-center\\\" [style.display]=\\\"progress? 'block' : 'none'\\\">\\r\\n        <div class=\\\"progress\\\">\\r\\n            <div class=\\\"progress-bar\\\" role=\\\"progressbar\\\" [style.width]=\\\"progressPercentage +'%'\\\"\\r\\n                 [attr.aria-valuenow]=\\\"progressPercentage\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">{{ progressPercentage\\r\\n                }}%\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <span>{{ progressType }} </span>\\r\\n        <a href=\\\"#\\\"><img id=\\\"gif-preview\\\" style=\\\"width: 100%;\\\" src=\\\"\\\"/></a>\\r\\n    </div>\\r\\n\\r\\n    <div #canvasContainer>\\r\\n\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div class=\\\"d-flex p-1 pt-4\\\">\\r\\n        <div>\\r\\n\\r\\n            <div class=\\\"btn-group btn-group-toggle text-center m-1\\\" data-toggle=\\\"buttons\\\">\\r\\n                <label class=\\\"btn btn-secondary active\\\" (click)=\\\"preparePreview(availablePreviews.default)\\\">\\r\\n                    <input type=\\\"radio\\\" name=\\\"options\\\" id=\\\"option1\\\" autocomplete=\\\"off\\\" checked> Default\\r\\n                </label>\\r\\n                <label class=\\\"btn btn-secondary\\\" (click)=\\\"preparePreview(availablePreviews.raw)\\\">\\r\\n                    <input type=\\\"radio\\\" name=\\\"options\\\" id=\\\"option2\\\" autocomplete=\\\"off\\\"> Raw\\r\\n                </label>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"ml-auto m-1\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"initGIFExport()\\\">Start</button>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"d-flex p-1 pt-4\\\">\\r\\n        <div class=\\\"overlay-parent\\\">\\r\\n            <input class=\\\"m-1\\\" type=\\\"image\\\" (click)=\\\"shareWithFacebook()\\\" style=\\\"height: 2em;\\\"\\r\\n                   src=\\\"assets/img/share-ui/Share_FB.png\\\" title=\\\"Continue with Facebook\\\"/>\\r\\n            <!--<a id=\\\"twitter-gif-share\\\" class=\\\"twitter-share-button\\\"\\r\\n               href=\\\"#\\\"\\r\\n               data-size=\\\"large\\\">\\r\\n                <img class=\\\"m-1\\\" style=\\\"height: 2em;position: relative;top: -1em;\\\"\\r\\n                     src=\\\"assets/img/share-ui/Share_TW.png\\\" title=\\\"Continue with Twitter\\\"/>\\r\\n            </a>-->\\r\\n            <a id=\\\"twitter-gif-share\\\"\\r\\n               (click)=\\\"initTwitterShare()\\\"\\r\\n               href=\\\"#\\\"\\r\\n               data-size=\\\"large\\\">\\r\\n                <img class=\\\"m-1\\\" style=\\\"height: 2em;position: relative;top: -1em;\\\"\\r\\n                     src=\\\"assets/img/share-ui/Share_TW.png\\\" title=\\\"Continue with Twitter\\\"/>\\r\\n            </a>\\r\\n\\r\\n\\r\\n            <input class=\\\"m-1\\\" type=\\\"image\\\" (click)=\\\"download()\\\" style=\\\"height: 2em;\\\"\\r\\n                   src=\\\"assets/img/share-ui/Save_Icon.png\\\" title=\\\"Download\\\"/>\\r\\n\\r\\n            <div class=\\\"overlay\\\" [style.display]=\\\"!uploaded ? 'block' : 'none'\\\" data-toggle=\\\"tooltip\\\"\\r\\n                 data-placement=\\\"top\\\" title=\\\"First select an option and click - Start -\\\"></div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"ml-auto m-1\\\">\\r\\n            <input (click)=\\\"close()\\\" type=\\\"button\\\" class=\\\"btn\\\" value=\\\"Cancel\\\">\\r\\n        </div>\\r\\n\\r\\n\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div [style.display]=\\\"debug ? 'block' : 'none'\\\">\\r\\n\\r\\n        <input class=\\\"m-1\\\" type=\\\"image\\\" (click)=\\\"initGIFExport({},false)\\\" style=\\\"height: 2em;\\\"\\r\\n               src=\\\"assets/img/nav-icons/reload-circular-arrow.svg\\\" title=\\\"Reload GIF\\\"/>\\r\\n        <input class=\\\"m-1\\\" type=\\\"image\\\"\\r\\n               (click)=\\\"initGIFExport( {quality: 1, totalFrames: 240, framesPerSecond: 60},false)\\\" style=\\\"height: 2em;\\\"\\r\\n               src=\\\"assets/img/nav-icons/reload-circular-arrow.svg\\\" title=\\\"Reload GIF\\\"/>\\r\\n\\r\\n        <div></div>\\r\\n\\r\\n\\r\\n    </div>\\r\\n\\r\\n\\r\\n</div>\\r\\n\"","import {AfterViewInit, Component, ElementRef, NgZone, OnDestroy, ViewChild} from '@angular/core';\r\nimport {BsModalRef} from 'ngx-bootstrap';\r\nimport {facebookShare} from '../utils/Facebook';\r\nimport {GIFConverterOptions, GIFProgressCallback, GIFResult, THREE2GIFConverter} from '../utils/GIFExport';\r\nimport {ViewerService} from '../viewer.service';\r\nimport {GIFExportPreview} from '../utils/GIFExportPreview';\r\nimport {GIFUpload, UploadResponseObject} from '../utils/GIFUpload';\r\nimport config from './config';\r\n\r\nimport {updateTwitterShareButton} from '../utils/Twitter';\r\nimport {TarExport} from '../utils/TarExport';\r\n\r\nimport {socket, socketStartListening} from '../utils/Socket';\r\n\r\n\r\nimport parseHTML from 'parsehtml';\r\nimport {RawExportPreview} from '../utils/RawExportPreview';\r\nimport {IExportPreview} from '../utils/ExportCommon';\r\n\r\nfunction debugTwitter() {\r\n    const twitterBTN = parseHTML(`\r\n <a id=\"twitter-gif-share2\" class=\"twitter-share-button\"\r\n               href=\"#\"\r\n               data-size=\"large\">\r\n                <img class=\"m-1\" style=\"height: 2em;position: relative;top: -2em;\"\r\n                     src=\"assets/img/share-ui/Share_TW.png\" title=\"Continue with Twitter\"/>\r\n            </a>\r\n`);\r\n\r\n    updateTwitterShareButton(twitterBTN,\r\n        'Nice gadget!',\r\n        ['pewpewcustoms'],\r\n        ['http://mighty-starfish-59.localtunnel.me/api/share/a8297608-b44a-4cbc-ba9e-8b1f662ab186/m4v']);\r\n\r\n    document.body.appendChild(twitterBTN);\r\n}\r\n\r\nwindow['debugTwitter'] = debugTwitter;\r\n\r\nsocketStartListening();\r\n\r\n\r\n@Component({\r\n    selector: 'app-share-modal',\r\n    templateUrl: './share-modal.component.html',\r\n    styleUrls: ['./share-modal.component.css']\r\n})\r\nexport class ShareModalComponent implements AfterViewInit, OnDestroy {\r\n\r\n    @ViewChild('canvasContainer')\r\n    canvasContainer: ElementRef<HTMLDivElement>;\r\n    // --------------------\r\n    private displayCanvas: HTMLCanvasElement;\r\n    public scene: BABYLON.Scene;\r\n\r\n    debug = config.debug;\r\n\r\n    // ---------------------\r\n    // general progress info\r\n\r\n    progress = false;\r\n    progressType = '';\r\n    progressPercentage = 0;\r\n\r\n    created = false;\r\n    uploaded = false;\r\n    // --------------------\r\n    error = '';\r\n\r\n    uploadResponse: UploadResponseObject = null;\r\n    private preview: IExportPreview;\r\n    private gifUpload: GIFUpload;\r\n    private exporter: any;\r\n    private previousCanvasContainer: HTMLElement | null;\r\n\r\n    availablePreviews = {default: {name: 'default', ctor: GIFExportPreview}, raw: {name: 'raw', ctor: RawExportPreview}};\r\n    previewInstances = {};\r\n    private enableSharingButtons = false;\r\n\r\n    constructor(private modalRef: BsModalRef, private viewerService: ViewerService, private zone: NgZone) {\r\n\r\n        window['that'] = this;\r\n\r\n\r\n        socket.on('convert-progress', (data) => {\r\n            this.zone.run(() => {\r\n\r\n\r\n                this.setProgress(data.percentage, 100, 'Converting ' + data.format);\r\n\r\n                if (data.percentage >= 99)\r\n                    this.created = true;\r\n\r\n                console.log(this.progress, this.progressType, this.progressPercentage);\r\n\r\n\r\n            // TODO @7frank work flow...\r\n                if (!this.progress && this.progressType==\"Converting jpg\") {\r\n\r\n                    // FIXME @7frank use this param to disable the overlay as soon as sockerio works through the nginx route on the server\r\n                    this.enableSharingButtons=true\r\n\r\n                }\r\n\r\n\r\n            });\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    // TODO @7frank add \"format\" parameter\r\n    getShareURL(data: UploadResponseObject) {\r\n        return config.share.baseURL + config.share.shareRoute + data.id + '/' + data.format;\r\n\r\n    }\r\n\r\n    getVideoURL(data: UploadResponseObject) {\r\n        return config.share.baseURL + config.share.imagesRoute + data.id + '.' + data.format;\r\n\r\n    }\r\n\r\n\r\n    getTwitterShareURL(data: UploadResponseObject) {\r\n        //TODO\r\n        return config.share.baseURL + '/twitter/video/' + data.id + '.' + data.format;\r\n\r\n    }\r\n\r\n\r\n    shareWithFacebook() {\r\n        if (!this.uploadResponse) {\r\n            return;\r\n        }\r\n        const url = this.getShareURL(this.uploadResponse);\r\n        facebookShare(url);\r\n        //TODO what to do after facebook share\r\n        //.then(() => this.close());\r\n\r\n    }\r\n\r\n\r\n    // TODO @7frank fix download with tar files\r\n    download() {\r\n\r\n        const link = <HTMLAnchorElement>document.createElement('a');\r\n\r\n\r\n        link.href = this.getVideoURL(this.uploadResponse); // this.getGifEl().src;\r\n        link.download = 'Download.' + this.uploadResponse.format;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n    }\r\n\r\n    setProgress(current, maximum, action: string) {\r\n        this.progressPercentage = Math.round(100 * current / maximum);\r\n        this.progress = this.progressPercentage != 100;\r\n        this.progressType = action;\r\n    }\r\n\r\n    close() {\r\n        this.modalRef.hide();\r\n        this.undoPreviewMode();\r\n\r\n    }\r\n\r\n    undoPreviewMode() {\r\n        if (this.exporter) {\r\n\r\n            this.exporter.cancel();\r\n        }\r\n        this.viewerService.viewer.resizeOnRender = true;\r\n        this.viewerService.viewer.resizeAsNeeded(true);\r\n        this.preview.disablePreview();\r\n\r\n\r\n        this.previousCanvasContainer.appendChild(this.displayCanvas);\r\n\r\n\r\n    }\r\n\r\n\r\n    getPreviewMesh() {\r\n        return this.viewerService.viewer.getActiveWeapon();\r\n\r\n    }\r\n\r\n    async createGIFromCanvas(progressCallback: GIFProgressCallback, overrideConfig?: GIFConverterOptions): Promise<GIFResult> {\r\n\r\n        this.exporter = new THREE2GIFConverter(config.gif.width, config.gif.height, Object.assign(config.gif.options, overrideConfig));\r\n\r\n\r\n        const start = window.performance.now();\r\n        const result = await this.exporter.startRecording(this.displayCanvas, this.scene, this.getPreviewMesh(), progressCallback);\r\n        const stop = window.performance.now();\r\n\r\n        console.log('Creating Gif took:', (stop - start) / 1000, ' seconds');\r\n\r\n        return result;\r\n    }\r\n\r\n    async createTarFromCanvas(progressCallback: GIFProgressCallback, overrideConfig?: GIFConverterOptions): Promise<GIFResult> {\r\n\r\n\r\n        this.exporter = new TarExport(config.gif.width, config.gif.height, Object.assign(config.gif.options, overrideConfig));\r\n\r\n        window['converter'] = this.exporter.converter;\r\n\r\n\r\n        const start = window.performance.now();\r\n        const result = await this.exporter.startRecording(this.displayCanvas, this.scene, this.getPreviewMesh(), progressCallback);\r\n\r\n\r\n        const stop = window.performance.now();\r\n\r\n        console.log('Creating Tar took:', (stop - start) / 1000, ' seconds');\r\n\r\n        return result;\r\n    }\r\n\r\n\r\n    getGifEl(): HTMLImageElement {\r\n        return <HTMLImageElement> document.querySelector('#gif-preview');\r\n    }\r\n\r\n\r\n    // TODO progress bar for image after video generation gets stuck at 5% and will not highlight a success state\r\n\r\n    async initGIFExport(overrideConfig?: GIFConverterOptions, uploadImmediate: boolean = true) {\r\n\r\n\r\n        this.uploaded = false;\r\n\r\n        this.error = '';\r\n        this.setProgress(0, 1, '');\r\n\r\n        if (!this.gifUpload) {\r\n            this.gifUpload = (new GIFUpload);\r\n        }\r\n\r\n        this.gifUpload.cancelLastUpload();\r\n\r\n        let mType = 'tar';\r\n\r\n\r\n        let result;\r\n        try {\r\n\r\n            if (mType === 'gif') {\r\n\r\n                result = await this.createGIFromCanvas((val) => {\r\n                    this.setProgress(val, 1, 'Generating GIF...');\r\n                }, overrideConfig);\r\n\r\n\r\n            } else if (mType === 'tar') {\r\n\r\n                result = await this.createTarFromCanvas((val) => {\r\n\r\n                    // FIXME progress is only triggered on convert not while capturing\r\n\r\n                    this.setProgress(val, 1, 'Generating Tar');\r\n                }, overrideConfig);\r\n\r\n\r\n            }\r\n\r\n        } catch (e) {\r\n            console.warn(e);\r\n            this.error = e.message;\r\n            return;\r\n        } finally {\r\n\r\n            // this.undoPreviewMode();\r\n\r\n        }\r\n\r\n\r\n        if (mType == 'gif') {\r\n            const el = this.getGifEl();\r\n            el.src = result.url;\r\n        }\r\n\r\n        if (!uploadImmediate) {\r\n            return;\r\n        }\r\n\r\n        const uploadRoute = (mType == 'gif') ? config.share.baseURL + config.share.gifUploadRoute : config.share.baseURL + config.share.tarUploadRoute;\r\n\r\n        this.gifUpload.setRemote(uploadRoute);\r\n\r\n        const gifPromise = this.gifUpload.uploadBlob(result.blob, undefined, (e) => {\r\n\r\n            console.log(e.loaded, e.total);\r\n\r\n            this.setProgress(e.loaded, e.total, 'Uploading ...');\r\n\r\n        });\r\n\r\n\r\n        gifPromise.catch((e) => {\r\n            this.error = 'Failed to upload file. Server not resonding.';\r\n        });\r\n        const response = await gifPromise;\r\n\r\n\r\n        if (!response.error) {\r\n\r\n            this.setShareElements(response);\r\n\r\n            this.updateDebugResponse(response);\r\n\r\n            this.uploaded = true;\r\n        } else {\r\n            this.error = response.error;\r\n        }\r\n\r\n    }\r\n\r\n    updateDebugResponse(response: UploadResponseObject) {\r\n\r\n        if (!this.debug) {\r\n            return;\r\n        }\r\n\r\n        // if video created load video\r\n\r\n        // if image created load video\r\n\r\n        const url = this.getShareURL(response);\r\n\r\n        console.log('share URL: ', url);\r\n\r\n    }\r\n\r\n\r\n    setShareElements(data: UploadResponseObject) {\r\n        this.uploadResponse = data;\r\n\r\n        //updateTwitterShareButton(document.querySelector('#twitter-gif-share'), 'Nice gadget!', ['pewpewcustoms'], [this.getShareURL(data)]);\r\n    }\r\n\r\n    // FIXME @7frank remove all previews from the global scene otherwise re-opening dialog will create multiple instances of the individual objects\r\n    ngOnDestroy(): void {\r\n        this.close();\r\n\r\n\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n\r\n        this.displayCanvas = this.viewerService.viewer.renderCanvas.nativeElement;\r\n        this.scene = this.viewerService.viewer.scene;\r\n\r\n        this.previousCanvasContainer = this.displayCanvas.parentElement;\r\n        this.canvasContainer.nativeElement.appendChild(this.displayCanvas);\r\n\r\n        this.viewerService.viewer.resizeOnRender = false;\r\n        // this.viewerService.viewer.resizeAsNeeded(true);\r\n\r\n\r\n        this.scene.getEngine().setSize(512, 512);\r\n\r\n\r\n        this.preparePreview(this.availablePreviews.default);\r\n\r\n\r\n    }\r\n\r\n    preparePreview(obj: { name: string, ctor: any }) {\r\n        if (this.preview) {\r\n            this.preview.disablePreview();\r\n        }\r\n\r\n        if (!this.previewInstances[obj.name]) {\r\n            this.previewInstances[obj.name] = new obj.ctor(this.scene, this.displayCanvas, this.viewerService.viewer.camera);\r\n\r\n        }\r\n\r\n        // this.preview = new GIFExportPreview(this.scene, this.displayCanvas, this.viewerService.viewer.camera);\r\n        this.preview = this.previewInstances[obj.name];\r\n\r\n        this.preview.enablePreview(this.getPreviewMesh());\r\n\r\n\r\n    }\r\n\r\n\r\n    initTwitterShare() {\r\n\r\n        const url = this.getTwitterShareURL(this.uploadResponse);\r\n        console.log('initTwitterShare', url);\r\n        window.open(url);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CookieService } from 'ngx-cookie-service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n\r\n  constructor(private cookieService: CookieService) { }\r\n\r\n  loggedIn(): boolean {\r\n    return this.cookieService.check('TOKEN')\r\n  }\r\n\r\n  isAdmin(): boolean {\r\n    let isAdmin = false;\r\n    try {\r\n      if (this.cookieService.check('USER')) {\r\n        const user = JSON.parse(this.cookieService.get('USER'));\r\n        isAdmin = user.role === \"admin\";\r\n      }\r\n    }\r\n    catch (err) {\r\n\r\n    }\r\n    return isAdmin;\r\n  }\r\n\r\n  storeUser(user, token) {\r\n    this.cookieService.set('TOKEN', token);\r\n    this.cookieService.set('USER', JSON.stringify(user));\r\n  }\r\n\r\n  retrieveUser() {\r\n    if (this.loggedIn())\r\n      return JSON.parse(this.cookieService.get('USER'));\r\n    else\r\n      return null\r\n  }\r\n\r\n  clearUser() {\r\n    this.cookieService.delete('USER');\r\n    this.cookieService.delete('TOKEN');\r\n  }\r\n}\r\n","export interface IExportPreview {\r\n    enablePreview(mesh: BABYLON.Mesh);\r\n    disablePreview();\r\n}\r\n\r\nexport function createDefaultParticleSystem(scene: BABYLON.Scene, emitterObject): BABYLON.ParticleSystem {\r\n\r\n\r\n    // Create a particle system\r\n    const particleSystem = new BABYLON.ParticleSystem('particles', 300, scene);\r\n\r\n    // Texture of each particle\r\n    particleSystem.particleTexture = new BABYLON.Texture('/assets/textures/particles/dot8.png', scene);\r\n\r\n    // Where the particles come from\r\n    particleSystem.emitter = emitterObject; // the starting object, the emitter\r\n    const emitterType = new BABYLON.ConeParticleEmitter();\r\n    emitterType.radius = 0.4;\r\n    // emitterType.radiusRange = 0;\r\n\r\n    particleSystem.particleEmitterType = emitterType;\r\n\r\n    // Colors of all particles\r\n    particleSystem.color1 = new BABYLON.Color4(0.7, 0.8, 1.0, 1.0);\r\n    particleSystem.color2 = new BABYLON.Color4(0.2, 0.5, 1.0, 1.0);\r\n    particleSystem.colorDead = new BABYLON.Color4(0, 0, 0.2, 0.0);\r\n\r\n    // Size of each particle (random between...\r\n\r\n    particleSystem.minSize = 0.05 * 0.6;\r\n    particleSystem.maxSize = 0.05 * 0.6;\r\n\r\n    // Life time of each particle (random between...\r\n    particleSystem.minLifeTime = 0.3;\r\n    particleSystem.maxLifeTime = 1.5;\r\n\r\n    // Emission rate\r\n    particleSystem.emitRate = 50;\r\n\r\n\r\n    //  Blend mode : BLENDMODE_ONEONE, or BLENDMODE_STANDARD\r\n    particleSystem.blendMode = BABYLON.ParticleSystem.BLENDMODE_STANDARD;\r\n    // Set the gravity of all particles\r\n    particleSystem.gravity = new BABYLON.Vector3(0, 0, 0);\r\n\r\n    // Angular speed, in radians\r\n    // particleSystem.minAngularSpeed = 0;\r\n    // particleSystem.maxAngularSpeed = Math.PI;\r\n\r\n    // Speed\r\n    particleSystem.minEmitPower = 0.7;\r\n    particleSystem.maxEmitPower = 1.1;\r\n\r\n    particleSystem.updateSpeed = 0.01;\r\n\r\n    // particleSystem.addVelocityGradient(0, 3, 5);\r\n    // particleSystem.addVelocityGradient(1.0, -5, -10);\r\n\r\n    // Start the particle system\r\n    particleSystem['preWarmCycles'] = 10;\r\n    particleSystem['preWarmStepOffset'] = 5;\r\n    // particleSystem.start();\r\n\r\n    return particleSystem;\r\n\r\n}\r\n\r\nexport function createSpotLight(scene: BABYLON.Scene): BABYLON.SpotLight {\r\n\r\n    // Light direction is directly down from a position one unit up, slow decay\r\n    const spotLight = new BABYLON.SpotLight('spotLight', new BABYLON.Vector3(1, 2, 1), new BABYLON.Vector3(0, -1, 0), Math.PI / 2, 18, scene);\r\n    spotLight.diffuse = new BABYLON.Color3(0, 1, 1);\r\n    spotLight.specular = new BABYLON.Color3(1, 1, 1);\r\n    spotLight.shadowEnabled = true;\r\n\r\n\r\n    return spotLight;\r\n\r\n}\r\n\r\nexport function createGround(scene: BABYLON.Scene): BABYLON.Mesh {\r\n\r\n    const texture = new BABYLON.Texture('/assets/preview/plate4.jpg', scene);\r\n    texture.uScale = 3;\r\n    texture.vScale = 3;\r\n\r\n\r\n    const groundMaterial = new BABYLON.StandardMaterial('myMaterial', scene);\r\n\r\n    //  groundMaterial.diffuseTexture = texture;\r\n    groundMaterial.diffuseColor = new BABYLON.Color3(.5, .5, .5);\r\n\r\n    const myGround = BABYLON.MeshBuilder.CreateGround('myGround', {width: 9, height: 9}, scene);\r\n    myGround.position.y = -0.5;\r\n    myGround.receiveShadows = true;\r\n\r\n    myGround.material = groundMaterial;\r\n\r\n\r\n    return myGround;\r\n}\r\n\r\nexport function createLightTube(radii: Array<number>, height, scene) {\r\n\r\n    const path = [];\r\n    path.push(new BABYLON.Vector3(0, -height / 2, 0)); //point 1A\r\n    path.push(new BABYLON.Vector3(0, height / 2, 0)); //point 2\r\n\r\n    const radiusFunction = function (i, distance) {\r\n        return radii[i];\r\n    };\r\n\r\n    return BABYLON.Mesh.CreateTube('tube', path, 2, 6, radiusFunction, 0, scene, false, BABYLON.Mesh.FRONTSIDE);\r\n\r\n}","\r\n/**\r\n * Enables  the sharing of a URL.\r\n * Note: depends on Facebook being available globally\r\n *\r\n * @param url\r\n * @returns {Promise<void>}\r\n */\r\n\r\nexport function facebookShare(url): Promise<void> {\r\n    const FB = (<any>window).FB;\r\n\r\n    return new Promise(function (ok, fail) {\r\n\r\n        FB.ui({\r\n            method: 'share',\r\n            href: url\r\n        }, function (response, ...args) {\r\n\r\n            if (typeof response == undefined) {\r\n                fail();\r\n            } else {\r\n                ok();\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n\r\n","import GIF from 'gif.js';\r\n// import GIFWorker from 'gif.js/dist/gif.worker';\r\n// TODO @7frank load worker in a more convenient way .. currently the worker script is base64 encoded in the following url\r\nconst workerURL = 'data:application/javascript;base64,Ly8gZ2lmLndvcmtlci5qcyAwLjIuMCAtIGh0dHBzOi8vZ2l0aHViLmNvbS9qbm9yZGJlcmcvZ2lmLmpzCihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09ImZ1bmN0aW9uIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK28rIiciKTt0aHJvdyBmLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09ImZ1bmN0aW9uIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBOZXVRdWFudD1yZXF1aXJlKCIuL1R5cGVkTmV1UXVhbnQuanMiKTt2YXIgTFpXRW5jb2Rlcj1yZXF1aXJlKCIuL0xaV0VuY29kZXIuanMiKTtmdW5jdGlvbiBCeXRlQXJyYXkoKXt0aGlzLnBhZ2U9LTE7dGhpcy5wYWdlcz1bXTt0aGlzLm5ld1BhZ2UoKX1CeXRlQXJyYXkucGFnZVNpemU9NDA5NjtCeXRlQXJyYXkuY2hhck1hcD17fTtmb3IodmFyIGk9MDtpPDI1NjtpKyspQnl0ZUFycmF5LmNoYXJNYXBbaV09U3RyaW5nLmZyb21DaGFyQ29kZShpKTtCeXRlQXJyYXkucHJvdG90eXBlLm5ld1BhZ2U9ZnVuY3Rpb24oKXt0aGlzLnBhZ2VzWysrdGhpcy5wYWdlXT1uZXcgVWludDhBcnJheShCeXRlQXJyYXkucGFnZVNpemUpO3RoaXMuY3Vyc29yPTB9O0J5dGVBcnJheS5wcm90b3R5cGUuZ2V0RGF0YT1mdW5jdGlvbigpe3ZhciBydj0iIjtmb3IodmFyIHA9MDtwPHRoaXMucGFnZXMubGVuZ3RoO3ArKyl7Zm9yKHZhciBpPTA7aTxCeXRlQXJyYXkucGFnZVNpemU7aSsrKXtydis9Qnl0ZUFycmF5LmNoYXJNYXBbdGhpcy5wYWdlc1twXVtpXV19fXJldHVybiBydn07Qnl0ZUFycmF5LnByb3RvdHlwZS53cml0ZUJ5dGU9ZnVuY3Rpb24odmFsKXtpZih0aGlzLmN1cnNvcj49Qnl0ZUFycmF5LnBhZ2VTaXplKXRoaXMubmV3UGFnZSgpO3RoaXMucGFnZXNbdGhpcy5wYWdlXVt0aGlzLmN1cnNvcisrXT12YWx9O0J5dGVBcnJheS5wcm90b3R5cGUud3JpdGVVVEZCeXRlcz1mdW5jdGlvbihzdHJpbmcpe2Zvcih2YXIgbD1zdHJpbmcubGVuZ3RoLGk9MDtpPGw7aSsrKXRoaXMud3JpdGVCeXRlKHN0cmluZy5jaGFyQ29kZUF0KGkpKX07Qnl0ZUFycmF5LnByb3RvdHlwZS53cml0ZUJ5dGVzPWZ1bmN0aW9uKGFycmF5LG9mZnNldCxsZW5ndGgpe2Zvcih2YXIgbD1sZW5ndGh8fGFycmF5Lmxlbmd0aCxpPW9mZnNldHx8MDtpPGw7aSsrKXRoaXMud3JpdGVCeXRlKGFycmF5W2ldKX07ZnVuY3Rpb24gR0lGRW5jb2Rlcih3aWR0aCxoZWlnaHQpe3RoaXMud2lkdGg9fn53aWR0aDt0aGlzLmhlaWdodD1+fmhlaWdodDt0aGlzLnRyYW5zcGFyZW50PW51bGw7dGhpcy50cmFuc0luZGV4PTA7dGhpcy5yZXBlYXQ9LTE7dGhpcy5kZWxheT0wO3RoaXMuaW1hZ2U9bnVsbDt0aGlzLnBpeGVscz1udWxsO3RoaXMuaW5kZXhlZFBpeGVscz1udWxsO3RoaXMuY29sb3JEZXB0aD1udWxsO3RoaXMuY29sb3JUYWI9bnVsbDt0aGlzLm5ldVF1YW50PW51bGw7dGhpcy51c2VkRW50cnk9bmV3IEFycmF5O3RoaXMucGFsU2l6ZT03O3RoaXMuZGlzcG9zZT0tMTt0aGlzLmZpcnN0RnJhbWU9dHJ1ZTt0aGlzLnNhbXBsZT0xMDt0aGlzLmRpdGhlcj1mYWxzZTt0aGlzLmdsb2JhbFBhbGV0dGU9ZmFsc2U7dGhpcy5vdXQ9bmV3IEJ5dGVBcnJheX1HSUZFbmNvZGVyLnByb3RvdHlwZS5zZXREZWxheT1mdW5jdGlvbihtaWxsaXNlY29uZHMpe3RoaXMuZGVsYXk9TWF0aC5yb3VuZChtaWxsaXNlY29uZHMvMTApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXRGcmFtZVJhdGU9ZnVuY3Rpb24oZnBzKXt0aGlzLmRlbGF5PU1hdGgucm91bmQoMTAwL2Zwcyl9O0dJRkVuY29kZXIucHJvdG90eXBlLnNldERpc3Bvc2U9ZnVuY3Rpb24oZGlzcG9zYWxDb2RlKXtpZihkaXNwb3NhbENvZGU+PTApdGhpcy5kaXNwb3NlPWRpc3Bvc2FsQ29kZX07R0lGRW5jb2Rlci5wcm90b3R5cGUuc2V0UmVwZWF0PWZ1bmN0aW9uKHJlcGVhdCl7dGhpcy5yZXBlYXQ9cmVwZWF0fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXRUcmFuc3BhcmVudD1mdW5jdGlvbihjb2xvcil7dGhpcy50cmFuc3BhcmVudD1jb2xvcn07R0lGRW5jb2Rlci5wcm90b3R5cGUuYWRkRnJhbWU9ZnVuY3Rpb24oaW1hZ2VEYXRhKXt0aGlzLmltYWdlPWltYWdlRGF0YTt0aGlzLmNvbG9yVGFiPXRoaXMuZ2xvYmFsUGFsZXR0ZSYmdGhpcy5nbG9iYWxQYWxldHRlLnNsaWNlP3RoaXMuZ2xvYmFsUGFsZXR0ZTpudWxsO3RoaXMuZ2V0SW1hZ2VQaXhlbHMoKTt0aGlzLmFuYWx5emVQaXhlbHMoKTtpZih0aGlzLmdsb2JhbFBhbGV0dGU9PT10cnVlKXRoaXMuZ2xvYmFsUGFsZXR0ZT10aGlzLmNvbG9yVGFiO2lmKHRoaXMuZmlyc3RGcmFtZSl7dGhpcy53cml0ZUxTRCgpO3RoaXMud3JpdGVQYWxldHRlKCk7aWYodGhpcy5yZXBlYXQ+PTApe3RoaXMud3JpdGVOZXRzY2FwZUV4dCgpfX10aGlzLndyaXRlR3JhcGhpY0N0cmxFeHQoKTt0aGlzLndyaXRlSW1hZ2VEZXNjKCk7aWYoIXRoaXMuZmlyc3RGcmFtZSYmIXRoaXMuZ2xvYmFsUGFsZXR0ZSl0aGlzLndyaXRlUGFsZXR0ZSgpO3RoaXMud3JpdGVQaXhlbHMoKTt0aGlzLmZpcnN0RnJhbWU9ZmFsc2V9O0dJRkVuY29kZXIucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3RoaXMub3V0LndyaXRlQnl0ZSg1OSl9O0dJRkVuY29kZXIucHJvdG90eXBlLnNldFF1YWxpdHk9ZnVuY3Rpb24ocXVhbGl0eSl7aWYocXVhbGl0eTwxKXF1YWxpdHk9MTt0aGlzLnNhbXBsZT1xdWFsaXR5fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXREaXRoZXI9ZnVuY3Rpb24oZGl0aGVyKXtpZihkaXRoZXI9PT10cnVlKWRpdGhlcj0iRmxveWRTdGVpbmJlcmciO3RoaXMuZGl0aGVyPWRpdGhlcn07R0lGRW5jb2Rlci5wcm90b3R5cGUuc2V0R2xvYmFsUGFsZXR0ZT1mdW5jdGlvbihwYWxldHRlKXt0aGlzLmdsb2JhbFBhbGV0dGU9cGFsZXR0ZX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZ2V0R2xvYmFsUGFsZXR0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdsb2JhbFBhbGV0dGUmJnRoaXMuZ2xvYmFsUGFsZXR0ZS5zbGljZSYmdGhpcy5nbG9iYWxQYWxldHRlLnNsaWNlKDApfHx0aGlzLmdsb2JhbFBhbGV0dGV9O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlSGVhZGVyPWZ1bmN0aW9uKCl7dGhpcy5vdXQud3JpdGVVVEZCeXRlcygiR0lGODlhIil9O0dJRkVuY29kZXIucHJvdG90eXBlLmFuYWx5emVQaXhlbHM9ZnVuY3Rpb24oKXtpZighdGhpcy5jb2xvclRhYil7dGhpcy5uZXVRdWFudD1uZXcgTmV1UXVhbnQodGhpcy5waXhlbHMsdGhpcy5zYW1wbGUpO3RoaXMubmV1UXVhbnQuYnVpbGRDb2xvcm1hcCgpO3RoaXMuY29sb3JUYWI9dGhpcy5uZXVRdWFudC5nZXRDb2xvcm1hcCgpfWlmKHRoaXMuZGl0aGVyKXt0aGlzLmRpdGhlclBpeGVscyh0aGlzLmRpdGhlci5yZXBsYWNlKCItc2VycGVudGluZSIsIiIpLHRoaXMuZGl0aGVyLm1hdGNoKC8tc2VycGVudGluZS8pIT09bnVsbCl9ZWxzZXt0aGlzLmluZGV4UGl4ZWxzKCl9dGhpcy5waXhlbHM9bnVsbDt0aGlzLmNvbG9yRGVwdGg9ODt0aGlzLnBhbFNpemU9NztpZih0aGlzLnRyYW5zcGFyZW50IT09bnVsbCl7dGhpcy50cmFuc0luZGV4PXRoaXMuZmluZENsb3Nlc3QodGhpcy50cmFuc3BhcmVudCx0cnVlKX19O0dJRkVuY29kZXIucHJvdG90eXBlLmluZGV4UGl4ZWxzPWZ1bmN0aW9uKGltZ3Epe3ZhciBuUGl4PXRoaXMucGl4ZWxzLmxlbmd0aC8zO3RoaXMuaW5kZXhlZFBpeGVscz1uZXcgVWludDhBcnJheShuUGl4KTt2YXIgaz0wO2Zvcih2YXIgaj0wO2o8blBpeDtqKyspe3ZhciBpbmRleD10aGlzLmZpbmRDbG9zZXN0UkdCKHRoaXMucGl4ZWxzW2srK10mMjU1LHRoaXMucGl4ZWxzW2srK10mMjU1LHRoaXMucGl4ZWxzW2srK10mMjU1KTt0aGlzLnVzZWRFbnRyeVtpbmRleF09dHJ1ZTt0aGlzLmluZGV4ZWRQaXhlbHNbal09aW5kZXh9fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5kaXRoZXJQaXhlbHM9ZnVuY3Rpb24oa2VybmVsLHNlcnBlbnRpbmUpe3ZhciBrZXJuZWxzPXtGYWxzZUZsb3lkU3RlaW5iZXJnOltbMy84LDEsMF0sWzMvOCwwLDFdLFsyLzgsMSwxXV0sRmxveWRTdGVpbmJlcmc6W1s3LzE2LDEsMF0sWzMvMTYsLTEsMV0sWzUvMTYsMCwxXSxbMS8xNiwxLDFdXSxTdHVja2k6W1s4LzQyLDEsMF0sWzQvNDIsMiwwXSxbMi80MiwtMiwxXSxbNC80MiwtMSwxXSxbOC80MiwwLDFdLFs0LzQyLDEsMV0sWzIvNDIsMiwxXSxbMS80MiwtMiwyXSxbMi80MiwtMSwyXSxbNC80MiwwLDJdLFsyLzQyLDEsMl0sWzEvNDIsMiwyXV0sQXRraW5zb246W1sxLzgsMSwwXSxbMS84LDIsMF0sWzEvOCwtMSwxXSxbMS84LDAsMV0sWzEvOCwxLDFdLFsxLzgsMCwyXV19O2lmKCFrZXJuZWx8fCFrZXJuZWxzW2tlcm5lbF0pe3Rocm93IlVua25vd24gZGl0aGVyaW5nIGtlcm5lbDogIitrZXJuZWx9dmFyIGRzPWtlcm5lbHNba2VybmVsXTt2YXIgaW5kZXg9MCxoZWlnaHQ9dGhpcy5oZWlnaHQsd2lkdGg9dGhpcy53aWR0aCxkYXRhPXRoaXMucGl4ZWxzO3ZhciBkaXJlY3Rpb249c2VycGVudGluZT8tMToxO3RoaXMuaW5kZXhlZFBpeGVscz1uZXcgVWludDhBcnJheSh0aGlzLnBpeGVscy5sZW5ndGgvMyk7Zm9yKHZhciB5PTA7eTxoZWlnaHQ7eSsrKXtpZihzZXJwZW50aW5lKWRpcmVjdGlvbj1kaXJlY3Rpb24qLTE7Zm9yKHZhciB4PWRpcmVjdGlvbj09MT8wOndpZHRoLTEseGVuZD1kaXJlY3Rpb249PTE/d2lkdGg6MDt4IT09eGVuZDt4Kz1kaXJlY3Rpb24pe2luZGV4PXkqd2lkdGgreDt2YXIgaWR4PWluZGV4KjM7dmFyIHIxPWRhdGFbaWR4XTt2YXIgZzE9ZGF0YVtpZHgrMV07dmFyIGIxPWRhdGFbaWR4KzJdO2lkeD10aGlzLmZpbmRDbG9zZXN0UkdCKHIxLGcxLGIxKTt0aGlzLnVzZWRFbnRyeVtpZHhdPXRydWU7dGhpcy5pbmRleGVkUGl4ZWxzW2luZGV4XT1pZHg7aWR4Kj0zO3ZhciByMj10aGlzLmNvbG9yVGFiW2lkeF07dmFyIGcyPXRoaXMuY29sb3JUYWJbaWR4KzFdO3ZhciBiMj10aGlzLmNvbG9yVGFiW2lkeCsyXTt2YXIgZXI9cjEtcjI7dmFyIGVnPWcxLWcyO3ZhciBlYj1iMS1iMjtmb3IodmFyIGk9ZGlyZWN0aW9uPT0xPzA6ZHMubGVuZ3RoLTEsZW5kPWRpcmVjdGlvbj09MT9kcy5sZW5ndGg6MDtpIT09ZW5kO2krPWRpcmVjdGlvbil7dmFyIHgxPWRzW2ldWzFdO3ZhciB5MT1kc1tpXVsyXTtpZih4MSt4Pj0wJiZ4MSt4PHdpZHRoJiZ5MSt5Pj0wJiZ5MSt5PGhlaWdodCl7dmFyIGQ9ZHNbaV1bMF07aWR4PWluZGV4K3gxK3kxKndpZHRoO2lkeCo9MztkYXRhW2lkeF09TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsZGF0YVtpZHhdK2VyKmQpKTtkYXRhW2lkeCsxXT1NYXRoLm1heCgwLE1hdGgubWluKDI1NSxkYXRhW2lkeCsxXStlZypkKSk7ZGF0YVtpZHgrMl09TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsZGF0YVtpZHgrMl0rZWIqZCkpfX19fX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZmluZENsb3Nlc3Q9ZnVuY3Rpb24oYyx1c2VkKXtyZXR1cm4gdGhpcy5maW5kQ2xvc2VzdFJHQigoYyYxNjcxMTY4MCk+PjE2LChjJjY1MjgwKT4+OCxjJjI1NSx1c2VkKX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZmluZENsb3Nlc3RSR0I9ZnVuY3Rpb24ocixnLGIsdXNlZCl7aWYodGhpcy5jb2xvclRhYj09PW51bGwpcmV0dXJuLTE7aWYodGhpcy5uZXVRdWFudCYmIXVzZWQpe3JldHVybiB0aGlzLm5ldVF1YW50Lmxvb2t1cFJHQihyLGcsYil9dmFyIGM9YnxnPDw4fHI8PDE2O3ZhciBtaW5wb3M9MDt2YXIgZG1pbj0yNTYqMjU2KjI1Njt2YXIgbGVuPXRoaXMuY29sb3JUYWIubGVuZ3RoO2Zvcih2YXIgaT0wLGluZGV4PTA7aTxsZW47aW5kZXgrKyl7dmFyIGRyPXItKHRoaXMuY29sb3JUYWJbaSsrXSYyNTUpO3ZhciBkZz1nLSh0aGlzLmNvbG9yVGFiW2krK10mMjU1KTt2YXIgZGI9Yi0odGhpcy5jb2xvclRhYltpKytdJjI1NSk7dmFyIGQ9ZHIqZHIrZGcqZGcrZGIqZGI7aWYoKCF1c2VkfHx0aGlzLnVzZWRFbnRyeVtpbmRleF0pJiZkPGRtaW4pe2RtaW49ZDttaW5wb3M9aW5kZXh9fXJldHVybiBtaW5wb3N9O0dJRkVuY29kZXIucHJvdG90eXBlLmdldEltYWdlUGl4ZWxzPWZ1bmN0aW9uKCl7dmFyIHc9dGhpcy53aWR0aDt2YXIgaD10aGlzLmhlaWdodDt0aGlzLnBpeGVscz1uZXcgVWludDhBcnJheSh3KmgqMyk7dmFyIGRhdGE9dGhpcy5pbWFnZTt2YXIgc3JjUG9zPTA7dmFyIGNvdW50PTA7Zm9yKHZhciBpPTA7aTxoO2krKyl7Zm9yKHZhciBqPTA7ajx3O2orKyl7dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107c3JjUG9zKyt9fX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVHcmFwaGljQ3RybEV4dD1mdW5jdGlvbigpe3RoaXMub3V0LndyaXRlQnl0ZSgzMyk7dGhpcy5vdXQud3JpdGVCeXRlKDI0OSk7dGhpcy5vdXQud3JpdGVCeXRlKDQpO3ZhciB0cmFuc3AsZGlzcDtpZih0aGlzLnRyYW5zcGFyZW50PT09bnVsbCl7dHJhbnNwPTA7ZGlzcD0wfWVsc2V7dHJhbnNwPTE7ZGlzcD0yfWlmKHRoaXMuZGlzcG9zZT49MCl7ZGlzcD1kaXNwb3NlJjd9ZGlzcDw8PTI7dGhpcy5vdXQud3JpdGVCeXRlKDB8ZGlzcHwwfHRyYW5zcCk7dGhpcy53cml0ZVNob3J0KHRoaXMuZGVsYXkpO3RoaXMub3V0LndyaXRlQnl0ZSh0aGlzLnRyYW5zSW5kZXgpO3RoaXMub3V0LndyaXRlQnl0ZSgwKX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVJbWFnZURlc2M9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGUoNDQpO3RoaXMud3JpdGVTaG9ydCgwKTt0aGlzLndyaXRlU2hvcnQoMCk7dGhpcy53cml0ZVNob3J0KHRoaXMud2lkdGgpO3RoaXMud3JpdGVTaG9ydCh0aGlzLmhlaWdodCk7aWYodGhpcy5maXJzdEZyYW1lfHx0aGlzLmdsb2JhbFBhbGV0dGUpe3RoaXMub3V0LndyaXRlQnl0ZSgwKX1lbHNle3RoaXMub3V0LndyaXRlQnl0ZSgxMjh8MHwwfDB8dGhpcy5wYWxTaXplKX19O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlTFNEPWZ1bmN0aW9uKCl7dGhpcy53cml0ZVNob3J0KHRoaXMud2lkdGgpO3RoaXMud3JpdGVTaG9ydCh0aGlzLmhlaWdodCk7dGhpcy5vdXQud3JpdGVCeXRlKDEyOHwxMTJ8MHx0aGlzLnBhbFNpemUpO3RoaXMub3V0LndyaXRlQnl0ZSgwKTt0aGlzLm91dC53cml0ZUJ5dGUoMCl9O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlTmV0c2NhcGVFeHQ9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGUoMzMpO3RoaXMub3V0LndyaXRlQnl0ZSgyNTUpO3RoaXMub3V0LndyaXRlQnl0ZSgxMSk7dGhpcy5vdXQud3JpdGVVVEZCeXRlcygiTkVUU0NBUEUyLjAiKTt0aGlzLm91dC53cml0ZUJ5dGUoMyk7dGhpcy5vdXQud3JpdGVCeXRlKDEpO3RoaXMud3JpdGVTaG9ydCh0aGlzLnJlcGVhdCk7dGhpcy5vdXQud3JpdGVCeXRlKDApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS53cml0ZVBhbGV0dGU9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGVzKHRoaXMuY29sb3JUYWIpO3ZhciBuPTMqMjU2LXRoaXMuY29sb3JUYWIubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bjtpKyspdGhpcy5vdXQud3JpdGVCeXRlKDApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS53cml0ZVNob3J0PWZ1bmN0aW9uKHBWYWx1ZSl7dGhpcy5vdXQud3JpdGVCeXRlKHBWYWx1ZSYyNTUpO3RoaXMub3V0LndyaXRlQnl0ZShwVmFsdWU+PjgmMjU1KX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVQaXhlbHM9ZnVuY3Rpb24oKXt2YXIgZW5jPW5ldyBMWldFbmNvZGVyKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsdGhpcy5pbmRleGVkUGl4ZWxzLHRoaXMuY29sb3JEZXB0aCk7ZW5jLmVuY29kZSh0aGlzLm91dCl9O0dJRkVuY29kZXIucHJvdG90eXBlLnN0cmVhbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm91dH07bW9kdWxlLmV4cG9ydHM9R0lGRW5jb2Rlcn0seyIuL0xaV0VuY29kZXIuanMiOjIsIi4vVHlwZWROZXVRdWFudC5qcyI6M31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBFT0Y9LTE7dmFyIEJJVFM9MTI7dmFyIEhTSVpFPTUwMDM7dmFyIG1hc2tzPVswLDEsMyw3LDE1LDMxLDYzLDEyNywyNTUsNTExLDEwMjMsMjA0Nyw0MDk1LDgxOTEsMTYzODMsMzI3NjcsNjU1MzVdO2Z1bmN0aW9uIExaV0VuY29kZXIod2lkdGgsaGVpZ2h0LHBpeGVscyxjb2xvckRlcHRoKXt2YXIgaW5pdENvZGVTaXplPU1hdGgubWF4KDIsY29sb3JEZXB0aCk7dmFyIGFjY3VtPW5ldyBVaW50OEFycmF5KDI1Nik7dmFyIGh0YWI9bmV3IEludDMyQXJyYXkoSFNJWkUpO3ZhciBjb2RldGFiPW5ldyBJbnQzMkFycmF5KEhTSVpFKTt2YXIgY3VyX2FjY3VtLGN1cl9iaXRzPTA7dmFyIGFfY291bnQ7dmFyIGZyZWVfZW50PTA7dmFyIG1heGNvZGU7dmFyIGNsZWFyX2ZsZz1mYWxzZTt2YXIgZ19pbml0X2JpdHMsQ2xlYXJDb2RlLEVPRkNvZGU7ZnVuY3Rpb24gY2hhcl9vdXQoYyxvdXRzKXthY2N1bVthX2NvdW50KytdPWM7aWYoYV9jb3VudD49MjU0KWZsdXNoX2NoYXIob3V0cyl9ZnVuY3Rpb24gY2xfYmxvY2sob3V0cyl7Y2xfaGFzaChIU0laRSk7ZnJlZV9lbnQ9Q2xlYXJDb2RlKzI7Y2xlYXJfZmxnPXRydWU7b3V0cHV0KENsZWFyQ29kZSxvdXRzKX1mdW5jdGlvbiBjbF9oYXNoKGhzaXplKXtmb3IodmFyIGk9MDtpPGhzaXplOysraSlodGFiW2ldPS0xfWZ1bmN0aW9uIGNvbXByZXNzKGluaXRfYml0cyxvdXRzKXt2YXIgZmNvZGUsYyxpLGVudCxkaXNwLGhzaXplX3JlZyxoc2hpZnQ7Z19pbml0X2JpdHM9aW5pdF9iaXRzO2NsZWFyX2ZsZz1mYWxzZTtuX2JpdHM9Z19pbml0X2JpdHM7bWF4Y29kZT1NQVhDT0RFKG5fYml0cyk7Q2xlYXJDb2RlPTE8PGluaXRfYml0cy0xO0VPRkNvZGU9Q2xlYXJDb2RlKzE7ZnJlZV9lbnQ9Q2xlYXJDb2RlKzI7YV9jb3VudD0wO2VudD1uZXh0UGl4ZWwoKTtoc2hpZnQ9MDtmb3IoZmNvZGU9SFNJWkU7ZmNvZGU8NjU1MzY7ZmNvZGUqPTIpKytoc2hpZnQ7aHNoaWZ0PTgtaHNoaWZ0O2hzaXplX3JlZz1IU0laRTtjbF9oYXNoKGhzaXplX3JlZyk7b3V0cHV0KENsZWFyQ29kZSxvdXRzKTtvdXRlcl9sb29wOndoaWxlKChjPW5leHRQaXhlbCgpKSE9RU9GKXtmY29kZT0oYzw8QklUUykrZW50O2k9Yzw8aHNoaWZ0XmVudDtpZihodGFiW2ldPT09ZmNvZGUpe2VudD1jb2RldGFiW2ldO2NvbnRpbnVlfWVsc2UgaWYoaHRhYltpXT49MCl7ZGlzcD1oc2l6ZV9yZWctaTtpZihpPT09MClkaXNwPTE7ZG97aWYoKGktPWRpc3ApPDApaSs9aHNpemVfcmVnO2lmKGh0YWJbaV09PT1mY29kZSl7ZW50PWNvZGV0YWJbaV07Y29udGludWUgb3V0ZXJfbG9vcH19d2hpbGUoaHRhYltpXT49MCl9b3V0cHV0KGVudCxvdXRzKTtlbnQ9YztpZihmcmVlX2VudDwxPDxCSVRTKXtjb2RldGFiW2ldPWZyZWVfZW50Kys7aHRhYltpXT1mY29kZX1lbHNle2NsX2Jsb2NrKG91dHMpfX1vdXRwdXQoZW50LG91dHMpO291dHB1dChFT0ZDb2RlLG91dHMpfWZ1bmN0aW9uIGVuY29kZShvdXRzKXtvdXRzLndyaXRlQnl0ZShpbml0Q29kZVNpemUpO3JlbWFpbmluZz13aWR0aCpoZWlnaHQ7Y3VyUGl4ZWw9MDtjb21wcmVzcyhpbml0Q29kZVNpemUrMSxvdXRzKTtvdXRzLndyaXRlQnl0ZSgwKX1mdW5jdGlvbiBmbHVzaF9jaGFyKG91dHMpe2lmKGFfY291bnQ+MCl7b3V0cy53cml0ZUJ5dGUoYV9jb3VudCk7b3V0cy53cml0ZUJ5dGVzKGFjY3VtLDAsYV9jb3VudCk7YV9jb3VudD0wfX1mdW5jdGlvbiBNQVhDT0RFKG5fYml0cyl7cmV0dXJuKDE8PG5fYml0cyktMX1mdW5jdGlvbiBuZXh0UGl4ZWwoKXtpZihyZW1haW5pbmc9PT0wKXJldHVybiBFT0Y7LS1yZW1haW5pbmc7dmFyIHBpeD1waXhlbHNbY3VyUGl4ZWwrK107cmV0dXJuIHBpeCYyNTV9ZnVuY3Rpb24gb3V0cHV0KGNvZGUsb3V0cyl7Y3VyX2FjY3VtJj1tYXNrc1tjdXJfYml0c107aWYoY3VyX2JpdHM+MCljdXJfYWNjdW18PWNvZGU8PGN1cl9iaXRzO2Vsc2UgY3VyX2FjY3VtPWNvZGU7Y3VyX2JpdHMrPW5fYml0czt3aGlsZShjdXJfYml0cz49OCl7Y2hhcl9vdXQoY3VyX2FjY3VtJjI1NSxvdXRzKTtjdXJfYWNjdW0+Pj04O2N1cl9iaXRzLT04fWlmKGZyZWVfZW50Pm1heGNvZGV8fGNsZWFyX2ZsZyl7aWYoY2xlYXJfZmxnKXttYXhjb2RlPU1BWENPREUobl9iaXRzPWdfaW5pdF9iaXRzKTtjbGVhcl9mbGc9ZmFsc2V9ZWxzZXsrK25fYml0cztpZihuX2JpdHM9PUJJVFMpbWF4Y29kZT0xPDxCSVRTO2Vsc2UgbWF4Y29kZT1NQVhDT0RFKG5fYml0cyl9fWlmKGNvZGU9PUVPRkNvZGUpe3doaWxlKGN1cl9iaXRzPjApe2NoYXJfb3V0KGN1cl9hY2N1bSYyNTUsb3V0cyk7Y3VyX2FjY3VtPj49ODtjdXJfYml0cy09OH1mbHVzaF9jaGFyKG91dHMpfX10aGlzLmVuY29kZT1lbmNvZGV9bW9kdWxlLmV4cG9ydHM9TFpXRW5jb2Rlcn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBuY3ljbGVzPTEwMDt2YXIgbmV0c2l6ZT0yNTY7dmFyIG1heG5ldHBvcz1uZXRzaXplLTE7dmFyIG5ldGJpYXNzaGlmdD00O3ZhciBpbnRiaWFzc2hpZnQ9MTY7dmFyIGludGJpYXM9MTw8aW50Ymlhc3NoaWZ0O3ZhciBnYW1tYXNoaWZ0PTEwO3ZhciBnYW1tYT0xPDxnYW1tYXNoaWZ0O3ZhciBiZXRhc2hpZnQ9MTA7dmFyIGJldGE9aW50Ymlhcz4+YmV0YXNoaWZ0O3ZhciBiZXRhZ2FtbWE9aW50Ymlhczw8Z2FtbWFzaGlmdC1iZXRhc2hpZnQ7dmFyIGluaXRyYWQ9bmV0c2l6ZT4+Mzt2YXIgcmFkaXVzYmlhc3NoaWZ0PTY7dmFyIHJhZGl1c2JpYXM9MTw8cmFkaXVzYmlhc3NoaWZ0O3ZhciBpbml0cmFkaXVzPWluaXRyYWQqcmFkaXVzYmlhczt2YXIgcmFkaXVzZGVjPTMwO3ZhciBhbHBoYWJpYXNzaGlmdD0xMDt2YXIgaW5pdGFscGhhPTE8PGFscGhhYmlhc3NoaWZ0O3ZhciBhbHBoYWRlYzt2YXIgcmFkYmlhc3NoaWZ0PTg7dmFyIHJhZGJpYXM9MTw8cmFkYmlhc3NoaWZ0O3ZhciBhbHBoYXJhZGJzaGlmdD1hbHBoYWJpYXNzaGlmdCtyYWRiaWFzc2hpZnQ7dmFyIGFscGhhcmFkYmlhcz0xPDxhbHBoYXJhZGJzaGlmdDt2YXIgcHJpbWUxPTQ5OTt2YXIgcHJpbWUyPTQ5MTt2YXIgcHJpbWUzPTQ4Nzt2YXIgcHJpbWU0PTUwMzt2YXIgbWlucGljdHVyZWJ5dGVzPTMqcHJpbWU0O2Z1bmN0aW9uIE5ldVF1YW50KHBpeGVscyxzYW1wbGVmYWMpe3ZhciBuZXR3b3JrO3ZhciBuZXRpbmRleDt2YXIgYmlhczt2YXIgZnJlcTt2YXIgcmFkcG93ZXI7ZnVuY3Rpb24gaW5pdCgpe25ldHdvcms9W107bmV0aW5kZXg9bmV3IEludDMyQXJyYXkoMjU2KTtiaWFzPW5ldyBJbnQzMkFycmF5KG5ldHNpemUpO2ZyZXE9bmV3IEludDMyQXJyYXkobmV0c2l6ZSk7cmFkcG93ZXI9bmV3IEludDMyQXJyYXkobmV0c2l6ZT4+Myk7dmFyIGksdjtmb3IoaT0wO2k8bmV0c2l6ZTtpKyspe3Y9KGk8PG5ldGJpYXNzaGlmdCs4KS9uZXRzaXplO25ldHdvcmtbaV09bmV3IEZsb2F0NjRBcnJheShbdix2LHYsMF0pO2ZyZXFbaV09aW50Ymlhcy9uZXRzaXplO2JpYXNbaV09MH19ZnVuY3Rpb24gdW5iaWFzbmV0KCl7Zm9yKHZhciBpPTA7aTxuZXRzaXplO2krKyl7bmV0d29ya1tpXVswXT4+PW5ldGJpYXNzaGlmdDtuZXR3b3JrW2ldWzFdPj49bmV0Ymlhc3NoaWZ0O25ldHdvcmtbaV1bMl0+Pj1uZXRiaWFzc2hpZnQ7bmV0d29ya1tpXVszXT1pfX1mdW5jdGlvbiBhbHRlcnNpbmdsZShhbHBoYSxpLGIsZyxyKXtuZXR3b3JrW2ldWzBdLT1hbHBoYSoobmV0d29ya1tpXVswXS1iKS9pbml0YWxwaGE7bmV0d29ya1tpXVsxXS09YWxwaGEqKG5ldHdvcmtbaV1bMV0tZykvaW5pdGFscGhhO25ldHdvcmtbaV1bMl0tPWFscGhhKihuZXR3b3JrW2ldWzJdLXIpL2luaXRhbHBoYX1mdW5jdGlvbiBhbHRlcm5laWdoKHJhZGl1cyxpLGIsZyxyKXt2YXIgbG89TWF0aC5hYnMoaS1yYWRpdXMpO3ZhciBoaT1NYXRoLm1pbihpK3JhZGl1cyxuZXRzaXplKTt2YXIgaj1pKzE7dmFyIGs9aS0xO3ZhciBtPTE7dmFyIHAsYTt3aGlsZShqPGhpfHxrPmxvKXthPXJhZHBvd2VyW20rK107aWYoajxoaSl7cD1uZXR3b3JrW2orK107cFswXS09YSoocFswXS1iKS9hbHBoYXJhZGJpYXM7cFsxXS09YSoocFsxXS1nKS9hbHBoYXJhZGJpYXM7cFsyXS09YSoocFsyXS1yKS9hbHBoYXJhZGJpYXN9aWYoaz5sbyl7cD1uZXR3b3JrW2stLV07cFswXS09YSoocFswXS1iKS9hbHBoYXJhZGJpYXM7cFsxXS09YSoocFsxXS1nKS9hbHBoYXJhZGJpYXM7cFsyXS09YSoocFsyXS1yKS9hbHBoYXJhZGJpYXN9fX1mdW5jdGlvbiBjb250ZXN0KGIsZyxyKXt2YXIgYmVzdGQ9figxPDwzMSk7dmFyIGJlc3RiaWFzZD1iZXN0ZDt2YXIgYmVzdHBvcz0tMTt2YXIgYmVzdGJpYXNwb3M9YmVzdHBvczt2YXIgaSxuLGRpc3QsYmlhc2Rpc3QsYmV0YWZyZXE7Zm9yKGk9MDtpPG5ldHNpemU7aSsrKXtuPW5ldHdvcmtbaV07ZGlzdD1NYXRoLmFicyhuWzBdLWIpK01hdGguYWJzKG5bMV0tZykrTWF0aC5hYnMoblsyXS1yKTtpZihkaXN0PGJlc3RkKXtiZXN0ZD1kaXN0O2Jlc3Rwb3M9aX1iaWFzZGlzdD1kaXN0LShiaWFzW2ldPj5pbnRiaWFzc2hpZnQtbmV0Ymlhc3NoaWZ0KTtpZihiaWFzZGlzdDxiZXN0Ymlhc2Qpe2Jlc3RiaWFzZD1iaWFzZGlzdDtiZXN0Ymlhc3Bvcz1pfWJldGFmcmVxPWZyZXFbaV0+PmJldGFzaGlmdDtmcmVxW2ldLT1iZXRhZnJlcTtiaWFzW2ldKz1iZXRhZnJlcTw8Z2FtbWFzaGlmdH1mcmVxW2Jlc3Rwb3NdKz1iZXRhO2JpYXNbYmVzdHBvc10tPWJldGFnYW1tYTtyZXR1cm4gYmVzdGJpYXNwb3N9ZnVuY3Rpb24gaW54YnVpbGQoKXt2YXIgaSxqLHAscSxzbWFsbHBvcyxzbWFsbHZhbCxwcmV2aW91c2NvbD0wLHN0YXJ0cG9zPTA7Zm9yKGk9MDtpPG5ldHNpemU7aSsrKXtwPW5ldHdvcmtbaV07c21hbGxwb3M9aTtzbWFsbHZhbD1wWzFdO2ZvcihqPWkrMTtqPG5ldHNpemU7aisrKXtxPW5ldHdvcmtbal07aWYocVsxXTxzbWFsbHZhbCl7c21hbGxwb3M9ajtzbWFsbHZhbD1xWzFdfX1xPW5ldHdvcmtbc21hbGxwb3NdO2lmKGkhPXNtYWxscG9zKXtqPXFbMF07cVswXT1wWzBdO3BbMF09ajtqPXFbMV07cVsxXT1wWzFdO3BbMV09ajtqPXFbMl07cVsyXT1wWzJdO3BbMl09ajtqPXFbM107cVszXT1wWzNdO3BbM109an1pZihzbWFsbHZhbCE9cHJldmlvdXNjb2wpe25ldGluZGV4W3ByZXZpb3VzY29sXT1zdGFydHBvcytpPj4xO2ZvcihqPXByZXZpb3VzY29sKzE7ajxzbWFsbHZhbDtqKyspbmV0aW5kZXhbal09aTtwcmV2aW91c2NvbD1zbWFsbHZhbDtzdGFydHBvcz1pfX1uZXRpbmRleFtwcmV2aW91c2NvbF09c3RhcnRwb3MrbWF4bmV0cG9zPj4xO2ZvcihqPXByZXZpb3VzY29sKzE7ajwyNTY7aisrKW5ldGluZGV4W2pdPW1heG5ldHBvc31mdW5jdGlvbiBpbnhzZWFyY2goYixnLHIpe3ZhciBhLHAsZGlzdDt2YXIgYmVzdGQ9MWUzO3ZhciBiZXN0PS0xO3ZhciBpPW5ldGluZGV4W2ddO3ZhciBqPWktMTt3aGlsZShpPG5ldHNpemV8fGo+PTApe2lmKGk8bmV0c2l6ZSl7cD1uZXR3b3JrW2ldO2Rpc3Q9cFsxXS1nO2lmKGRpc3Q+PWJlc3RkKWk9bmV0c2l6ZTtlbHNle2krKztpZihkaXN0PDApZGlzdD0tZGlzdDthPXBbMF0tYjtpZihhPDApYT0tYTtkaXN0Kz1hO2lmKGRpc3Q8YmVzdGQpe2E9cFsyXS1yO2lmKGE8MClhPS1hO2Rpc3QrPWE7aWYoZGlzdDxiZXN0ZCl7YmVzdGQ9ZGlzdDtiZXN0PXBbM119fX19aWYoaj49MCl7cD1uZXR3b3JrW2pdO2Rpc3Q9Zy1wWzFdO2lmKGRpc3Q+PWJlc3RkKWo9LTE7ZWxzZXtqLS07aWYoZGlzdDwwKWRpc3Q9LWRpc3Q7YT1wWzBdLWI7aWYoYTwwKWE9LWE7ZGlzdCs9YTtpZihkaXN0PGJlc3RkKXthPXBbMl0tcjtpZihhPDApYT0tYTtkaXN0Kz1hO2lmKGRpc3Q8YmVzdGQpe2Jlc3RkPWRpc3Q7YmVzdD1wWzNdfX19fX1yZXR1cm4gYmVzdH1mdW5jdGlvbiBsZWFybigpe3ZhciBpO3ZhciBsZW5ndGhjb3VudD1waXhlbHMubGVuZ3RoO3ZhciBhbHBoYWRlYz0zMCsoc2FtcGxlZmFjLTEpLzM7dmFyIHNhbXBsZXBpeGVscz1sZW5ndGhjb3VudC8oMypzYW1wbGVmYWMpO3ZhciBkZWx0YT1+fihzYW1wbGVwaXhlbHMvbmN5Y2xlcyk7dmFyIGFscGhhPWluaXRhbHBoYTt2YXIgcmFkaXVzPWluaXRyYWRpdXM7dmFyIHJhZD1yYWRpdXM+PnJhZGl1c2JpYXNzaGlmdDtpZihyYWQ8PTEpcmFkPTA7Zm9yKGk9MDtpPHJhZDtpKyspcmFkcG93ZXJbaV09YWxwaGEqKChyYWQqcmFkLWkqaSkqcmFkYmlhcy8ocmFkKnJhZCkpO3ZhciBzdGVwO2lmKGxlbmd0aGNvdW50PG1pbnBpY3R1cmVieXRlcyl7c2FtcGxlZmFjPTE7c3RlcD0zfWVsc2UgaWYobGVuZ3RoY291bnQlcHJpbWUxIT09MCl7c3RlcD0zKnByaW1lMX1lbHNlIGlmKGxlbmd0aGNvdW50JXByaW1lMiE9PTApe3N0ZXA9MypwcmltZTJ9ZWxzZSBpZihsZW5ndGhjb3VudCVwcmltZTMhPT0wKXtzdGVwPTMqcHJpbWUzfWVsc2V7c3RlcD0zKnByaW1lNH12YXIgYixnLHIsajt2YXIgcGl4PTA7aT0wO3doaWxlKGk8c2FtcGxlcGl4ZWxzKXtiPShwaXhlbHNbcGl4XSYyNTUpPDxuZXRiaWFzc2hpZnQ7Zz0ocGl4ZWxzW3BpeCsxXSYyNTUpPDxuZXRiaWFzc2hpZnQ7cj0ocGl4ZWxzW3BpeCsyXSYyNTUpPDxuZXRiaWFzc2hpZnQ7aj1jb250ZXN0KGIsZyxyKTthbHRlcnNpbmdsZShhbHBoYSxqLGIsZyxyKTtpZihyYWQhPT0wKWFsdGVybmVpZ2gocmFkLGosYixnLHIpO3BpeCs9c3RlcDtpZihwaXg+PWxlbmd0aGNvdW50KXBpeC09bGVuZ3RoY291bnQ7aSsrO2lmKGRlbHRhPT09MClkZWx0YT0xO2lmKGklZGVsdGE9PT0wKXthbHBoYS09YWxwaGEvYWxwaGFkZWM7cmFkaXVzLT1yYWRpdXMvcmFkaXVzZGVjO3JhZD1yYWRpdXM+PnJhZGl1c2JpYXNzaGlmdDtpZihyYWQ8PTEpcmFkPTA7Zm9yKGo9MDtqPHJhZDtqKyspcmFkcG93ZXJbal09YWxwaGEqKChyYWQqcmFkLWoqaikqcmFkYmlhcy8ocmFkKnJhZCkpfX19ZnVuY3Rpb24gYnVpbGRDb2xvcm1hcCgpe2luaXQoKTtsZWFybigpO3VuYmlhc25ldCgpO2lueGJ1aWxkKCl9dGhpcy5idWlsZENvbG9ybWFwPWJ1aWxkQ29sb3JtYXA7ZnVuY3Rpb24gZ2V0Q29sb3JtYXAoKXt2YXIgbWFwPVtdO3ZhciBpbmRleD1bXTtmb3IodmFyIGk9MDtpPG5ldHNpemU7aSsrKWluZGV4W25ldHdvcmtbaV1bM11dPWk7dmFyIGs9MDtmb3IodmFyIGw9MDtsPG5ldHNpemU7bCsrKXt2YXIgaj1pbmRleFtsXTttYXBbaysrXT1uZXR3b3JrW2pdWzBdO21hcFtrKytdPW5ldHdvcmtbal1bMV07bWFwW2srK109bmV0d29ya1tqXVsyXX1yZXR1cm4gbWFwfXRoaXMuZ2V0Q29sb3JtYXA9Z2V0Q29sb3JtYXA7dGhpcy5sb29rdXBSR0I9aW54c2VhcmNofW1vZHVsZS5leHBvcnRzPU5ldVF1YW50fSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7dmFyIEdJRkVuY29kZXIscmVuZGVyRnJhbWU7R0lGRW5jb2Rlcj1yZXF1aXJlKCIuL0dJRkVuY29kZXIuanMiKTtyZW5kZXJGcmFtZT1mdW5jdGlvbihmcmFtZSl7dmFyIGVuY29kZXIscGFnZSxzdHJlYW0sdHJhbnNmZXI7ZW5jb2Rlcj1uZXcgR0lGRW5jb2RlcihmcmFtZS53aWR0aCxmcmFtZS5oZWlnaHQpO2lmKGZyYW1lLmluZGV4PT09MCl7ZW5jb2Rlci53cml0ZUhlYWRlcigpfWVsc2V7ZW5jb2Rlci5maXJzdEZyYW1lPWZhbHNlfWVuY29kZXIuc2V0VHJhbnNwYXJlbnQoZnJhbWUudHJhbnNwYXJlbnQpO2VuY29kZXIuc2V0UmVwZWF0KGZyYW1lLnJlcGVhdCk7ZW5jb2Rlci5zZXREZWxheShmcmFtZS5kZWxheSk7ZW5jb2Rlci5zZXRRdWFsaXR5KGZyYW1lLnF1YWxpdHkpO2VuY29kZXIuc2V0RGl0aGVyKGZyYW1lLmRpdGhlcik7ZW5jb2Rlci5zZXRHbG9iYWxQYWxldHRlKGZyYW1lLmdsb2JhbFBhbGV0dGUpO2VuY29kZXIuYWRkRnJhbWUoZnJhbWUuZGF0YSk7aWYoZnJhbWUubGFzdCl7ZW5jb2Rlci5maW5pc2goKX1pZihmcmFtZS5nbG9iYWxQYWxldHRlPT09dHJ1ZSl7ZnJhbWUuZ2xvYmFsUGFsZXR0ZT1lbmNvZGVyLmdldEdsb2JhbFBhbGV0dGUoKX1zdHJlYW09ZW5jb2Rlci5zdHJlYW0oKTtmcmFtZS5kYXRhPXN0cmVhbS5wYWdlcztmcmFtZS5jdXJzb3I9c3RyZWFtLmN1cnNvcjtmcmFtZS5wYWdlU2l6ZT1zdHJlYW0uY29uc3RydWN0b3IucGFnZVNpemU7aWYoZnJhbWUuY2FuVHJhbnNmZXIpe3RyYW5zZmVyPWZ1bmN0aW9uKCl7dmFyIGksbGVuLHJlZixyZXN1bHRzO3JlZj1mcmFtZS5kYXRhO3Jlc3VsdHM9W107Zm9yKGk9MCxsZW49cmVmLmxlbmd0aDtpPGxlbjtpKyspe3BhZ2U9cmVmW2ldO3Jlc3VsdHMucHVzaChwYWdlLmJ1ZmZlcil9cmV0dXJuIHJlc3VsdHN9KCk7cmV0dXJuIHNlbGYucG9zdE1lc3NhZ2UoZnJhbWUsdHJhbnNmZXIpfWVsc2V7cmV0dXJuIHNlbGYucG9zdE1lc3NhZ2UoZnJhbWUpfX07c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZXZlbnQpe3JldHVybiByZW5kZXJGcmFtZShldmVudC5kYXRhKX19LHsiLi9HSUZFbmNvZGVyLmpzIjoxfV19LHt9LFs0XSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWdpZi53b3JrZXIuanMubWFwCg==';\r\n\r\nexport interface GIFResult {\r\n    url: string;\r\n    blob: Blob;\r\n}\r\n\r\n\r\nexport\r\n    type GIFProgressCallback = (current: number, type?: string) => void;\r\n\r\nexport interface GIFConverterOptions {\r\n    quality?: number;\r\n    framesPerSecond?: number;\r\n    totalFrames?: number;\r\n}\r\n\r\n\r\n/*\r\ninterface IConverter {\r\n}\r\n\r\ninterface IBaseConverter {\r\n    converter: IConverter;\r\n    grabFrames(scene: BABYLON.Scene, canvasElement: HTMLCanvasElement, mesh: BABYLON.Mesh): Promise<any>;\r\n    createConverter();\r\n    cancel();\r\n\r\n}\r\n*/\r\n\r\n/**\r\n * The class that handles the conversion part rendering the scene into a separate context and grabbing frames creating a gif in the end.\r\n */\r\nexport class THREE2GIFConverter {\r\n    gif: GIF;\r\n    options: GIFConverterOptions;\r\n    debug: true;\r\n    private sigCancel: boolean;\r\n\r\n    constructor(private width: number = 512, private height: number = 512, options?: GIFConverterOptions) {\r\n\r\n        const defaults: GIFConverterOptions = {quality: 8, framesPerSecond: 30, totalFrames: 60};\r\n        this.options = Object.assign(defaults, options);\r\n\r\n\r\n      this.createConverter();\r\n\r\n    }\r\n\r\n    createConverter() {\r\n        this.gif = new GIF({\r\n            repeat: 0,\r\n            workers: 2,\r\n            quality: this.options.quality,\r\n            //workerScript:\"libs/gif.js/gif.worker.js\"\r\n            workerScript: workerURL\r\n        });\r\n    }\r\n\r\n    cancel() {\r\n        this.sigCancel = true;\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * Renders a specific amount of frames based on {@link THREE2GIFConverter.options}.\r\n     * @param {BABYLON.Scene} scene\r\n     * @param {HTMLCanvasElement} canvasElement\r\n     * @param {BABYLON.Mesh} mesh\r\n     * @returns {Promise<any>}\r\n     */\r\n    async grabFrames(scene: BABYLON.Scene, canvasElement: HTMLCanvasElement, mesh: BABYLON.Mesh): Promise<any> {\r\n\r\n\r\n        const amount = this.options.totalFrames, fps = this.options.framesPerSecond;\r\n        return new Promise((resolve, reject) => {\r\n\r\n\r\n            let imgNm = 0;\r\n\r\n            let setSize, stopCapture, captureNextFrame;\r\n\r\n            setSize = () => {\r\n                scene.getEngine().setSize(this.width, this.height);\r\n            };\r\n\r\n            stopCapture = () => {\r\n\r\n                scene.unregisterBeforeRender(setSize);\r\n                scene.unregisterAfterRender(captureNextFrame);\r\n\r\n            };\r\n\r\n            captureNextFrame = () => {\r\n\r\n                // make sure to reject if cancel flag is set\r\n                if (this.sigCancel) {\r\n                    stopCapture();\r\n                    reject(new Error('canceled manually'));\r\n                }\r\n\r\n                if (imgNm++ < amount + 1) {\r\n                    if (imgNm !== 1) {\r\n                        this.gif.addFrame(canvasElement, {copy: true, delay: 1000 / fps});\r\n                    }\r\n                    // Add a constant rotation per frame.\r\n\r\n                    const axis = new BABYLON.Vector3(-1, 1, 0);\r\n                    const angle = Math.PI / 4;\r\n                    const quaternionBase: BABYLON.Quaternion = BABYLON.Quaternion.RotationAxis(axis, angle);\r\n\r\n\r\n                    const axis2 = new BABYLON.Vector3(0, 1, 0);\r\n                    const angle2 = imgNm * 2 * Math.PI / amount;\r\n\r\n                    const quaternionRotation = BABYLON.Quaternion.RotationAxis(axis2, angle2);\r\n\r\n                    mesh.rotationQuaternion = quaternionRotation.multiply(quaternionBase);\r\n\r\n\r\n                } else {\r\n                    stopCapture();\r\n                    resolve();\r\n                }\r\n            };\r\n\r\n\r\n            scene.registerBeforeRender(setSize);\r\n            scene.registerAfterRender(captureNextFrame);\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    async startRecording(canvasElement: HTMLCanvasElement, scene, mesh: BABYLON.Mesh, progessCB?: GIFProgressCallback): Promise<GIFResult> {\r\n        const gif = this.gif;\r\n\r\n        await this.grabFrames(scene, canvasElement, mesh);\r\n\r\n        gif.on('progress', progessCB);\r\n\r\n        return new Promise<GIFResult>((resolve, reject) => {\r\n\r\n            gif.on('progress', () => {\r\n\r\n                if (this.sigCancel) {\r\n                    gif.abort();\r\n                    reject(new Error('canceled manually'));\r\n                }\r\n\r\n            });\r\n\r\n            gif.on('finished', function (blob) {\r\n                const url = URL.createObjectURL(blob);\r\n                resolve({url, blob});\r\n            });\r\n            gif.render();\r\n        });\r\n\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n","import config from '../share-modal/config';\r\nimport {createDefaultParticleSystem, createGround, createLightTube, createSpotLight, IExportPreview} from './ExportCommon';\r\n\r\n\r\n/**\r\n * setup a scene where the mesh will be rendered in preview mode\r\n *\r\n *\r\n * TODO @7frank extends RawExportPreview\r\n */\r\n\r\nexport class GIFExportPreview implements IExportPreview {\r\n\r\n    private debug =   config.debug;\r\n    private enabled = false;\r\n\r\n    private spotLight: BABYLON.SpotLight;\r\n    private particles: BABYLON.ParticleSystem;\r\n    private platform: BABYLON.Mesh;\r\n    private defaultClearColor: BABYLON.Color4;\r\n    private defaultPlatformMaterial: BABYLON.StandardMaterial;\r\n    private shadowMaps = new Map<BABYLON.IShadowLight, BABYLON.ShadowGenerator>();\r\n    private children = new Array<BABYLON.AbstractMesh>();\r\n    private ground: BABYLON.Mesh;\r\n    private initialized = false;\r\n    private currentObject: BABYLON.Mesh;\r\n    private prevCamPos: BABYLON.Vector3;\r\n    private prevCamTarget: BABYLON.Vector3;\r\n    private currObjectRotation: BABYLON.Quaternion;\r\n\r\n\r\n    // FIXME reset camera to default or previous after export\r\n\r\n\r\n    constructor(private scene: BABYLON.Scene, private displayCanvas: HTMLCanvasElement, private camera: BABYLON.ArcRotateCamera) {\r\n\r\n        this.setupPreviewElements();\r\n\r\n    }\r\n\r\n    enablePreview(mesh: BABYLON.Mesh) {\r\n        this.enabled = true;\r\n        this.currentObject = mesh;\r\n\r\n        this.scene.clearColor = new BABYLON.Color4(0, 0, 0, 1);\r\n\r\n\r\n\r\n        this.currObjectRotation = mesh.rotationQuaternion.clone();\r\n       this.prevCamTarget = this.camera.target.clone();\r\n       this.prevCamPos = this.camera.position.clone();\r\n\r\n       console.log(\"enablePreview\", this.currObjectRotation, this.prevCamTarget, this.prevCamPos)\r\n\r\n        if (!this.debug) {\r\n           // this.displayCanvas.style.visibility = 'hidden';\r\n            this.setupPreviewCamera();\r\n        }\r\n\r\n\r\n        this.children.forEach((el => {\r\n            el.visibility = 1;\r\n            el.isPickable = false;\r\n        }));\r\n\r\n        this.particles.start();\r\n        this.spotLight.setEnabled(true);\r\n        this.platform.visibility = 1;\r\n\r\n        this.spotLight.setDirectionToTarget(mesh.position);\r\n\r\n\r\n        this.addShadow(this.spotLight, mesh, 16);\r\n\r\n\r\n    }\r\n\r\n\r\n    disablePreview() {\r\n        this.enabled = false;\r\n\r\n\r\n        // TODO test if reset works\r\n\r\n        this.currentObject.rotationQuaternion = this.currObjectRotation\r\n        this.camera.target =  this.prevCamTarget\r\n        this.camera.position = this.prevCamPos\r\n\r\n        console.log(\"disablePreview\", this.currentObject, this.camera.target,  this.camera.position)\r\n\r\n       // this.displayCanvas.style.visibility = 'visible';\r\n\r\n        this.scene.clearColor = this.defaultClearColor;\r\n\r\n        this.spotLight.setEnabled(false);\r\n        this.platform.visibility = 0;\r\n        this.particles.stop();\r\n\r\n\r\n        this.children.forEach((el => el.visibility = 0));\r\n\r\n        // re-enable controls\r\n        this.camera.attachControl(this.displayCanvas);\r\n\r\n\r\n        // remove shadow of the rendered target again\r\n        this.shadowMaps.get(this.spotLight).removeShadowCaster(this.currentObject);\r\n\r\n    }\r\n\r\n\r\n    setupPreviewElements() {\r\n\r\n        if (this.initialized) {\r\n            return;\r\n        }\r\n\r\n\r\n        this.defaultPlatformMaterial = new BABYLON.StandardMaterial('redMat', this.scene);\r\n        this.defaultPlatformMaterial.emissiveColor = new BABYLON.Color3(0, 0.6, 0.6);\r\n\r\n\r\n        this.defaultClearColor = this.scene.clearColor;\r\n\r\n\r\n        this.spotLight = createSpotLight(this.scene);\r\n\r\n\r\n        this.ground = createGround(this.scene);\r\n        this.children.push(this.ground);\r\n\r\n\r\n        // add plattform\r\n\r\n        const useGodrays = false;\r\n\r\n        const res = this.createPlatform(useGodrays);\r\n        this.platform = res.node;\r\n\r\n        this.children.push(...res.node.getChildMeshes());\r\n\r\n\r\n        if (useGodrays) {\r\n            let t = 0;\r\n            this.scene.onBeforeRenderObservable.add( () => {\r\n               if (!this.enabled) return;\r\n\r\n                t += 0.1;\r\n\r\n                res.setLightIntensity(0.6);\r\n                // res.setLightIntensity(Math.cos(t) * 0.2 + 0.6);\r\n            });\r\n\r\n        } else {\r\n\r\n\r\n            const glow = new BABYLON.GlowLayer('glow', this.scene, {\r\n                mainTextureFixedSize: 256,\r\n                blurKernelSize: 64\r\n            });\r\n\r\n            let t = 0;\r\n            this.scene.onBeforeRenderObservable.add( () => {\r\n                if (!this.enabled) return;\r\n                t += 0.1;\r\n                glow.intensity = Math.cos(t) * 0.4 + 0.4;\r\n                res.setLightIntensity(Math.cos(t) * 0.1 + 0.25);\r\n            });\r\n\r\n        }\r\n\r\n\r\n        // create particles\r\n        this.particles = createDefaultParticleSystem(this.scene, this.platform);\r\n        this.particles.renderingGroupId = 0;\r\n\r\n\r\n        this.initialized = true;\r\n\r\n        // ---------------------------------\r\n\r\n    }\r\n\r\n    createPlatform(useGodrays = false): { node: BABYLON.Mesh, setLightIntensity: (val: number) => void } {\r\n        const glowMat = this.defaultPlatformMaterial;\r\n\r\n\r\n        const platform = BABYLON.MeshBuilder.CreateCylinder('plattform-inner', {tessellation: 6, height: 0.02, diameter: 0.8}, this.scene);\r\n\r\n        platform.material = glowMat;\r\n        this.addShadow(this.spotLight, platform, 16);\r\n\r\n\r\n        const node = new BABYLON.Mesh('plattform', this.scene);\r\n        platform.parent = node;\r\n\r\n        node.position.y = -0.45;\r\n        node.rotation.y = Math.PI / 2;\r\n\r\n\r\n        // platform.rotation.x = Math.PI / 2;\r\n        platform.rotation.y = Math.PI / 2;\r\n\r\n        platform.scaling.y = 0.01;\r\n\r\n\r\n        platform.position.y = 0.04;\r\n\r\n\r\n        const torus = BABYLON.Mesh.CreateTorus('plattform-middle', 1, 0.05, 6, this.scene, false, BABYLON.Mesh.DEFAULTSIDE);\r\n        const torus2 = BABYLON.Mesh.CreateTorus('plattform-outer', 1.2, 0.05, 6, this.scene, false, BABYLON.Mesh.DEFAULTSIDE);\r\n\r\n\r\n        this.addShadow(this.spotLight, torus, 16);\r\n        this.addShadow(this.spotLight, torus2, 16);\r\n\r\n\r\n        torus.position.y = 0.03;\r\n\r\n\r\n        torus.receiveShadows = true;\r\n        torus2.receiveShadows = true;\r\n\r\n\r\n        const transparentMat = new BABYLON.StandardMaterial('transparentMat', this.scene);\r\n        transparentMat.diffuseColor = new BABYLON.Color3(0, 1, 1);\r\n        transparentMat.emissiveColor = new BABYLON.Color3(0.3, 0.3, 0.3);\r\n        transparentMat.alpha = 0.4;\r\n\r\n\r\n        torus.material = glowMat;\r\n        torus2.material = glowMat;\r\n\r\n        torus.parent = node;\r\n        torus2.parent = node;\r\n\r\n        torus.scaling.y = 0.1;\r\n        torus2.scaling.y = 0.1;\r\n\r\n\r\n        let setLightIntensity;\r\n\r\n\r\n        if (useGodrays) {\r\n\r\n\r\n            const hole = BABYLON.MeshBuilder.CreateCylinder('plattform-inner', {tessellation: 6, height: 0.02, diameter: 0.8}, this.scene);\r\n            hole.rotation.y = Math.PI / 2;\r\n            hole.scaling.y = 0.01;\r\n            hole.position.y = 0.04;\r\n\r\n            const hmat = new BABYLON.StandardMaterial('hMat', this.scene);\r\n            // hmat.diffuseColor = new BABYLON.Color4(1, 1, 1, 1);\r\n            hmat.diffuseTexture = new BABYLON.Texture('http://upload.wikimedia.org/wikipedia/commons/e/eb/Blank.jpg', this.scene, true, false, BABYLON.Texture.BILINEAR_SAMPLINGMODE);\r\n            hmat.diffuseTexture.level = 1;\r\n            hmat.diffuseTexture.hasAlpha = false;\r\n\r\n            hole.material = hmat;\r\n\r\n            const godrays = new BABYLON.VolumetricLightScatteringPostProcess('godrays', 1.0, this.camera, hole, 100, BABYLON.Texture.BILINEAR_SAMPLINGMODE, this.scene.getEngine(), false);\r\n\r\n\r\n            godrays.mesh.position.y = -0.4;\r\n            godrays.mesh.rotation.y = 0;\r\n\r\n            godrays.useDiffuseColor = true;\r\n            godrays.mesh.material['diffuseColor'] = new BABYLON.Color3(0, 1, 1);\r\n\r\n\r\n            godrays.exposure = 0.3;\r\n            godrays.decay = 0.98;\r\n            godrays.weight = 0.2;\r\n            godrays.density = 0.926;\r\n\r\n\r\n            setLightIntensity = (val) => {\r\n                godrays.density = val;\r\n            };\r\n\r\n        } else {\r\n\r\n            const texture = new BABYLON.Texture('/assets/preview/light-beam-gradient.png', this.scene);\r\n            texture.uScale = 1;\r\n            texture.vScale = 1;\r\n\r\n            const opTexture = new BABYLON.Texture('/assets/preview/beam-opacity.jpg', this.scene, false, true);\r\n            opTexture.uScale = 1;\r\n            opTexture.vScale = 1;\r\n\r\n\r\n            const mLightMat = new BABYLON.StandardMaterial('texture4', this.scene);\r\n            mLightMat.emissiveColor = new BABYLON.Color3(0, 1, 1);\r\n            mLightMat.opacityTexture = opTexture;\r\n            mLightMat.opacityTexture['wAng'] = Math.PI;\r\n            mLightMat.opacityTexture.getAlphaFromRGB = true;\r\n\r\n\r\n            const lightBeam = createLightTube([0.4, 0.5], 1, this.scene);\r\n\r\n            this.children.push(lightBeam);\r\n\r\n            lightBeam.position.y = .55;\r\n            lightBeam.visibility = 0.1;\r\n            lightBeam.parent = node;\r\n            lightBeam.material = mLightMat;\r\n\r\n\r\n            setLightIntensity = (val) => {\r\n                lightBeam.visibility = val;\r\n            };\r\n\r\n\r\n            this.spotLight.excludedMeshes.push(lightBeam);\r\n        }\r\n\r\n\r\n        return {node, setLightIntensity};\r\n    }\r\n\r\n\r\n\r\n\r\n    addShadow(light: BABYLON.IShadowLight, mesh: BABYLON.Mesh, blurKernel: number = 32) {\r\n        // Shadows\r\n        let shadowGenerator = this.shadowMaps.get(light);\r\n        if (!shadowGenerator) {\r\n\r\n            shadowGenerator = new BABYLON.ShadowGenerator(2048, light);\r\n\r\n            shadowGenerator.useBlurExponentialShadowMap = true;\r\n            shadowGenerator.useKernelBlur = true;\r\n            shadowGenerator.blurKernel = blurKernel;\r\n\r\n            //  shadowGenerator.usePoissonSampling = true;\r\n            //  shadowGenerator.bias = .0001;\r\n\r\n            this.shadowMaps.set(light, shadowGenerator);\r\n        }\r\n\r\n\r\n        // shadowGenerator.getShadowMap().renderList.push(mesh);\r\n        shadowGenerator.getShadowMap().refreshRate = BABYLON.RenderTargetTexture.REFRESHRATE_RENDER_ONEVERYFRAME;\r\n        shadowGenerator.addShadowCaster(mesh);\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    setupPreviewCamera() {\r\n\r\n        this.camera.detachControl(this.displayCanvas);\r\n        this.camera.setPosition(new BABYLON.Vector3(-2, 1, 0).multiplyByFloats(0.7, 0.7, 0.7));\r\n        this.camera.setTarget(new BABYLON.Vector3(0, -.22, 0));\r\n        this.camera.useFramingBehavior = true;\r\n        this.camera.wheelPrecision = 500;\r\n        this.camera.pinchPrecision = 200;\r\n        this.camera.minZ = 0.01;\r\n        this.camera.lowerRadiusLimit = 0.01;\r\n        this.camera.upperRadiusLimit = 5;\r\n    }\r\n\r\n\r\n}\r\n","function futch(url, opts: any = {}, onProgress) {\r\n    return new Promise((res, rej) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open(opts.method || 'get', url);\r\n        for (var k in opts.headers || {})\r\n            xhr.setRequestHeader(k, opts.headers[k]);\r\n        xhr.onload = (e: any) => res(e.target);\r\n        xhr.onerror = rej;\r\n        if (xhr.upload && onProgress)\r\n            xhr.upload.onprogress = onProgress; // event.loaded / event.total * 100 ; //event.lengthComputable\r\n        xhr.send(opts.body);\r\n    });\r\n}\r\n\r\n\r\n\r\nexport\r\ninterface UploadResponseObject {\r\n    error?: string;\r\n    id?: string;\r\n    format?: string;\r\n}\r\n\r\n/**\r\n * The class handling the export of the created gif.\r\n */\r\nexport class GIFUpload {\r\n\r\n    remoteURL = 'http://localhost:3000/api/upload';\r\n\r\n    // remoteURL = '/api/upload';\r\n    setRemote(remoteURL): GIFUpload {\r\n        this.remoteURL = remoteURL;\r\n        return this;\r\n    }\r\n\r\n    uploadBlob(blob: Blob, fileName?: string, progressCallback?): Promise<UploadResponseObject> {\r\n        const fd = new FormData();\r\n        fd.append('files', blob, fileName);\r\n        return futch(this.remoteURL,\r\n            {\r\n                method: 'post',\r\n                body: fd\r\n            }, progressCallback)\r\n            .then((res: any) => {\r\n\r\n                if (res.status == 404) {\r\n                    throw new Error(res.statusText);\r\n                }\r\n                return res.responseText;\r\n            })\r\n            .then((res: any) => JSON.parse(res));\r\n        //.then( (res: any) => res.json());\r\n    }\r\n\r\n\r\n    // TODO @7frank implement deleting uploaded file in case the user cancels its intent to share\r\n    cancelLastUpload() {\r\n        console.error('TODO implementation');\r\n    }\r\n}\r\n","import config from '../share-modal/config';\r\nimport {createDefaultParticleSystem, createGround, createLightTube, createSpotLight, IExportPreview} from './ExportCommon';\r\n\r\n\r\n/**\r\n * setup a scene where the mesh will be rendered in preview mode\r\n */\r\n\r\nexport class RawExportPreview implements IExportPreview {\r\n\r\n    private debug = config.debug;\r\n    private enabled = false;\r\n    private defaultClearColor: BABYLON.Color4;\r\n\r\n    private shadowMaps = new Map<BABYLON.IShadowLight, BABYLON.ShadowGenerator>();\r\n    private children = new Array<BABYLON.AbstractMesh>();\r\n\r\n\r\n    private currentObject: BABYLON.Mesh;\r\n\r\n    private prevCamPos: BABYLON.Vector3;\r\n    private prevCamTarget: BABYLON.Vector3;\r\n    private currObjectRotation: BABYLON.Quaternion;\r\n\r\n\r\n    // FIXME reset camera to default or previous after export\r\n\r\n\r\n    constructor(private scene: BABYLON.Scene, private displayCanvas: HTMLCanvasElement, private camera: BABYLON.ArcRotateCamera) {\r\n\r\n        this.setupPreviewElements();\r\n\r\n    }\r\n\r\n    enablePreview(mesh: BABYLON.Mesh) {\r\n        this.enabled = true;\r\n\r\n        this.scene.clearColor = new BABYLON.Color4(0, 0, 0, 1);\r\n\r\n\r\n        this.currentObject = mesh;\r\n\r\n        this.currObjectRotation = mesh.rotationQuaternion.clone();\r\n        this.prevCamTarget = this.camera.target.clone();\r\n        this.prevCamPos = this.camera.position.clone();\r\n\r\n\r\n        if (!this.debug) {\r\n            // this.displayCanvas.style.visibility = 'hidden';\r\n            this.setupPreviewCamera();\r\n        }\r\n\r\n\r\n        this.children.forEach((el => {\r\n            el.visibility = 1;\r\n            el.isPickable = false;\r\n        }));\r\n\r\n\r\n    }\r\n\r\n\r\n    disablePreview() {\r\n        this.enabled = false;\r\n\r\n\r\n        // TODO test if reset works\r\n\r\n        this.currentObject.rotationQuaternion = this.currObjectRotation;\r\n        this.camera.target = this.prevCamTarget;\r\n        this.camera.position = this.prevCamPos;\r\n\r\n\r\n        this.scene.clearColor = this.defaultClearColor;\r\n\r\n        this.children.forEach((el => el.visibility = 0));\r\n\r\n        // re-enable controls\r\n        this.camera.attachControl(this.displayCanvas);\r\n\r\n    }\r\n\r\n\r\n    setupPreviewElements() {\r\n\r\n\r\n        this.defaultClearColor = this.scene.clearColor;\r\n\r\n        // add plattform\r\n\r\n        const useGodrays = false;\r\n\r\n\r\n\r\n    }\r\n\r\n    addShadow(light: BABYLON.IShadowLight, mesh: BABYLON.Mesh, blurKernel: number = 32) {\r\n        // Shadows\r\n        let shadowGenerator = this.shadowMaps.get(light);\r\n        if (!shadowGenerator) {\r\n\r\n            shadowGenerator = new BABYLON.ShadowGenerator(2048, light);\r\n\r\n            shadowGenerator.useBlurExponentialShadowMap = true;\r\n            shadowGenerator.useKernelBlur = true;\r\n            shadowGenerator.blurKernel = blurKernel;\r\n\r\n            //  shadowGenerator.usePoissonSampling = true;\r\n            //  shadowGenerator.bias = .0001;\r\n\r\n            this.shadowMaps.set(light, shadowGenerator);\r\n        }\r\n\r\n\r\n        // shadowGenerator.getShadowMap().renderList.push(mesh);\r\n        shadowGenerator.getShadowMap().refreshRate = BABYLON.RenderTargetTexture.REFRESHRATE_RENDER_ONEVERYFRAME;\r\n        shadowGenerator.addShadowCaster(mesh);\r\n\r\n\r\n    }\r\n\r\n\r\n    setupPreviewCamera() {\r\n\r\n        this.camera.detachControl(this.displayCanvas);\r\n        this.camera.setPosition(new BABYLON.Vector3(-2, 1, 0).multiplyByFloats(0.7, 0.7, 0.7));\r\n        this.camera.setTarget(new BABYLON.Vector3(0, -.22, 0));\r\n        this.camera.useFramingBehavior = true;\r\n        this.camera.wheelPrecision = 500;\r\n        this.camera.pinchPrecision = 200;\r\n        this.camera.minZ = 0.01;\r\n        this.camera.lowerRadiusLimit = 0.01;\r\n        this.camera.upperRadiusLimit = 5;\r\n    }\r\n\r\n\r\n}\r\n","//import io from 'socket.io-client';\r\nimport config from \"../share-modal/config\"\r\n\r\nexport let socket = null;\r\n\r\nexport function socketStartListening() {\r\n\r\n    const io = window['io']\r\n\r\n    if (!io) {\r\n\r\n        // add dummy for client development\r\n        socket = {\r\n            on: function () {\r\n            },\r\n            emit: function () {\r\n            },\r\n        }\r\n\r\n        console.warn(\"socket.io server not responding\")\r\n        return;\r\n    }\r\n\r\n    //  const socket = io(config.baseURL);\r\n    socket = io.connect(config.baseURL);\r\n    socket.on('this', function (data) {\r\n        console.log(\"this\", data);\r\n        socket.emit('my other event', {my: 'data'});\r\n    });\r\n\r\n    socket.on('connect', function (data) {\r\n        console.log(\"connect\", data);\r\n\r\n    });\r\n\r\n\r\n    socket.on('connect', function (data) {\r\n        console.log(\"connect\", data);\r\n\r\n    });\r\n\r\n\r\n}\r\n\r\n","import 'ccapture.js/src/tar';\r\nimport * as CCapture from 'ccapture.js/src/CCapture.js';\r\nimport {GIFConverterOptions, GIFProgressCallback, GIFResult} from './GIFExport';\r\n\r\n\r\nexport class TarExport {\r\n\r\n    // gif: GIF;\r\n    private converter: CCapture;\r\n\r\n    options: GIFConverterOptions;\r\n    debug: true;\r\n    private sigCancel: boolean;\r\n\r\n\r\n    constructor(private width: number = 512, private height: number = 512, options?: GIFConverterOptions) {\r\n\r\n        const defaults: GIFConverterOptions = {quality: 8, framesPerSecond: 30, totalFrames: 60};\r\n        this.options = Object.assign(defaults, options);\r\n\r\n\r\n        this.createConverter();\r\n\r\n    }\r\n\r\n    createConverter() {\r\n      /*  this.gif = new GIF({\r\n            repeat: 0,\r\n            workers: 2,\r\n            quality: this.options.quality,\r\n            //workerScript:\"libs/gif.js/gif.worker.js\"\r\n            workerScript: workerURL\r\n        });*/\r\n\r\n\r\n        // Create a capturer that exports PNG images in a TAR file\r\n          this.converter = new CCapture({\r\n              format: 'png',\r\n              // framerate: 60,\r\n              verbose: false,\r\n             // timeLimit: 2\r\n          });\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    addFrame(canvasElement) {\r\n        // this.gif.addFrame(canvasElement, {copy: true, delay: 1000 / this.options.framesPerSecond});\r\n\r\n          this.converter.capture(canvasElement);\r\n\r\n    }\r\n\r\n\r\n    cancel() {\r\n        this.sigCancel = true;\r\n        // this.converter.stop();\r\n    }\r\n\r\n\r\n    async grabFrames(scene: BABYLON.Scene, canvasElement: HTMLCanvasElement, mesh: BABYLON.Mesh, progessCB: GIFProgressCallback | undefined) {\r\n\r\n\r\n        // --------------------------\r\n\r\n\r\n\r\n        const amount = this.options.totalFrames;\r\n        return new Promise((resolve, reject) => {\r\n\r\n\r\n            let imgNm = 0;\r\n\r\n            let setSize, stopCapture, captureNextFrame;\r\n\r\n            setSize = () => {\r\n                scene.getEngine().setSize(this.width, this.height);\r\n            };\r\n\r\n            stopCapture = () => {\r\n\r\n                scene.unregisterBeforeRender(setSize);\r\n                scene.unregisterAfterRender(captureNextFrame);\r\n\r\n            };\r\n\r\n            captureNextFrame = () => {\r\n\r\n                // make sure to reject if cancel flag is set\r\n                if (this.sigCancel) {\r\n                    stopCapture();\r\n                    reject(new Error('canceled manually'));\r\n                }\r\n\r\n                if (imgNm++ < amount + 1) {\r\n\r\n\r\n                    progessCB(imgNm / amount,\"capturing\")\r\n\r\n                    //if (imgNm !== 1) {\r\n                        this.addFrame(canvasElement);\r\n                    //}\r\n                    // Add a constant rotation per frame.\r\n\r\n                    const axis = new BABYLON.Vector3(-1, 1, 0);\r\n                    const angle = Math.PI / 4;\r\n                    const quaternionBase: BABYLON.Quaternion = BABYLON.Quaternion.RotationAxis(axis, angle);\r\n\r\n\r\n                    const axis2 = new BABYLON.Vector3(0, 1, 0);\r\n                    const angle2 = imgNm * 2 * Math.PI / amount;\r\n\r\n                    const quaternionRotation = BABYLON.Quaternion.RotationAxis(axis2, angle2);\r\n\r\n                    mesh.rotationQuaternion = quaternionRotation.multiply(quaternionBase);\r\n\r\n\r\n                } else {\r\n                    stopCapture();\r\n                    resolve();\r\n                }\r\n            };\r\n\r\n\r\n            scene.registerBeforeRender(setSize);\r\n            scene.registerAfterRender(captureNextFrame);\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    async startRecording(canvasElement: HTMLCanvasElement, scene, mesh: BABYLON.Mesh, progessCB?: GIFProgressCallback): Promise<GIFResult> {\r\n        // const gif = this.gif;\r\n\r\n        this.converter.start();\r\n\r\n        await this.grabFrames(scene, canvasElement, mesh, progessCB);\r\n\r\n\r\n\r\n        this.converter.on('progress', progessCB);\r\n\r\n        return new Promise<GIFResult>((resolve, reject) => {\r\n\r\n            this.converter.on('progress', () => {\r\n\r\n                 if (this.sigCancel) {\r\n                     this.converter.stop();\r\n                     reject(new Error('canceled manually'));\r\n                 }\r\n\r\n             });\r\n\r\n            //resolve({url: '', blob: new Blob()});\r\n            this.converter.save(function (blob) {\r\n                const url = URL.createObjectURL(blob);\r\n                console.log(\"tar blob\",url)\r\n\r\n                resolve({url, blob});\r\n            });\r\n\r\n\r\n\r\n\r\n            /* gif.on('finished', function (blob) {\r\n                 const url = URL.createObjectURL(blob);\r\n                 resolve({url, blob});\r\n             });\r\n             gif.render();*/\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n}\r\n","/**\r\n * Load the twitter features in the background.\r\n *\r\n */\r\n(<any>window).twttr = (function (d, s, id) {\r\n    let js;\r\n    const fjs = d.getElementsByTagName(s)[0],\r\n        t = (<any>window).twttr || {};\r\n    if (d.getElementById(id)) {\r\n        return t;\r\n    }\r\n    js = d.createElement(s);\r\n    js.id = id;\r\n    js.src = 'https://platform.twitter.com/widgets.js';\r\n    fjs.parentNode.insertBefore(js, fjs);\r\n\r\n    t._e = [];\r\n    t.ready = function (f) {\r\n        t._e.push(f);\r\n    };\r\n\r\n    return t;\r\n}(document, 'script', 'twitter-wjs'));\r\n\r\n\r\n// FIXME @7frank the twitter share url should be an array where the first link is a gif file the second is the url of the server to visit.\r\n// http://invision3d.org:3000/images/e353e8bc-a3b9-4163-811b-616a575b6148.gif\r\n// #pewpew hello world http://invision3d.org:3000/api/share/1c93d5cc-ffc8-4a76-9b46-e8f99e545db8\r\n\r\n/**\r\n * @deprecated\r\n * @param el\r\n * @param text\r\n * @param hashtags\r\n * @param shareURLs\r\n */\r\nexport function updateTwitterShareButton(el: HTMLAnchorElement, text: string, hashtags: Array<string>, shareURLs: Array<string>) {\r\n\r\n    const tags = hashtags.map((tag) => '#' + tag).join(' ');\r\n    const urls = shareURLs.join(' ');\r\n\r\n    const message = `${text} ${tags} ${urls}`;\r\n\r\n    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(message)}`;\r\n    el.href = url;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BabylonViewerComponent } from './babylon-viewer/babylon-viewer.component';\r\nimport {Observable, Subject, Subscriber} from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ViewerService {\r\n  public viewer: BabylonViewerComponent;\r\n\r\n  private initializedSource = new Subject<boolean>();\r\n  private meshClickedSource = new Subject<string>();\r\n  private resetSource = new Subject<any>();\r\n\r\n  public initialized: Observable<boolean> = this.initializedSource.asObservable();\r\n  public meshClicked: Observable<string> = this.meshClickedSource.asObservable();\r\n  public reset: Observable<any> = this.resetSource.asObservable();\r\n\r\n  constructor() {}\r\n\r\n  notifyClick(meshName: string) {\r\n    this.meshClickedSource.next(meshName);\r\n  }\r\n\r\n  notifyInitialized() {\r\n    this.initializedSource.next(true);\r\n  }\r\n\r\n  notifyReset() {\r\n    this.resetSource.next();\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  apiBaseURL: 'http://localhost:3000/'\r\n};\r\n\r\n/*\r\n * In development mode, to ignore zone related error stack frames such as\r\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\r\n * import the following file, but please comment it out in production mode\r\n * because it will have performance impact when throw error\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n","﻿import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n//import 'rxjs/add/operator/map';\r\nimport { environment } from '../environments/environment';\r\n\r\n//import { Observable } from 'rxjs/observable';\r\n//import 'rxjs/add/operator/map'\r\n\r\ndeclare let AWS: any;\r\ndeclare var swal: any;\r\ndeclare var $: any;\r\n\r\n/*\r\n  Generated class for the APIService provider.\r\n\r\n  See https://angular.io/docs/ts/latest/guide/dependency-injection.html\r\n  for more info on providers and Angular 4 DI.\r\n*/\r\n@Injectable()\r\nexport class APIService {\r\n\r\n    data: any;\r\n    constructor(public http: HttpClient) {\r\n        // console.log('Hello ITHoursService Provider');\r\n        //    this.load();\r\n    }\r\n\r\n    getAPIBaseURL() {\r\n        console.log(\"env value is \" + environment.apiBaseURL);\r\n        return environment.apiBaseURL;\r\n    }\r\n\r\n    getUrl(append: string) {\r\n        return this.getAPIBaseURL() + append;\r\n    }\r\n\r\n    getCRUDSharedUrl() {\r\n        return this.getUrl(\"api/crud\");\r\n    }\r\n    getSharedUrl() {\r\n        return this.getUrl(\"api/shared\");\r\n    }\r\n    getPostUrl() {\r\n        return this.getUrl(\"api/crud/ADD\");\r\n    }\r\n\r\n    getHeaders() {\r\n        let headers = new Headers();\r\n        headers.append('UserId', '12345');\r\n        headers.append('DeviceId', '12345');\r\n        return headers;\r\n    }\r\n\r\n\r\n    //ShowErrorAlert() {\r\n    //    $(\"#error\").fadeTo(2000, 500).slideUp(500, function () {\r\n    //        $(\"#error\").slideUp(500);\r\n    //    });\r\n    //}\r\n\r\n    //ShowSuccessAlert() {\r\n    //    $(\"#sucess\").fadeTo(2000, 500).slideUp(500, function () {\r\n    //        $(\"#sucess\").slideUp(500);\r\n    //    });\r\n    //}\r\n    prepareNodeJSRequestObject(prcId: string, opId: string, data: any) {\r\n        var toSend: any = {\r\n            PRCID: prcId,\r\n            Method: opId\r\n        };\r\n        if (data)\r\n            toSend.Data = data;\r\n        else\r\n            toSend.Data = {};\r\n\r\n        return toSend;\r\n    }\r\n\r\n\r\n    //async execute1(inputData: any, showload: boolean = true) {\r\n    //  const apiresponse = await this.http\r\n    //    .post(this.getSharedUrl(), inputData)\r\n    //    .toPromise();\r\n\r\n    //  if (apiresponse) return { isapisuccess: true, apidata: apiresponse.json() };\r\n    //  else return { isapisuccess: false, apidata: null };\r\n    //}\r\n\r\n\r\n    executeSubscribe(inputData: any, showload: boolean = true) {\r\n        return this.http.post(this.getSharedUrl(), inputData)\r\n    }\r\n\r\n\r\n    async execute(inputData: any, showload: boolean = true) {\r\n        // don't have the data yet\r\n        return new Promise(resolve => {\r\n            // We're using Angular HTTP provider to request the data,\r\n            // then on the response, it'll map the JSON data to a parsed JS object.\r\n            // Next, we process the data and resolve the promise with the new data.\r\n            this.http.post(this.getSharedUrl(), inputData)\r\n                // // .map(res => res.json())\r\n                .subscribe(\r\n                    data => {\r\n                        resolve({ isapisuccess: true, apidata: data });\r\n                    },\r\n                    error => {\r\n                        resolve({ isapisuccess: true, apidata: null })\r\n                    }\r\n                );\r\n        });\r\n    }\r\n\r\n\r\n    async  executeByURL(url: any, inputData: any) {\r\n        var final_url = this.getAPIBaseURL() + url;\r\n        const apiresponse = await this.http.post(final_url, inputData).toPromise();\r\n        if (apiresponse)\r\n            return { isapisuccess: true, apidata: apiresponse }\r\n        else\r\n            return { isapisuccess: false, apidata: null }\r\n\r\n    }\r\n\r\n\r\n    async  executeByPost(inputData: any, showload: boolean = true) {\r\n        var sharedCRUD = this.getCRUDSharedUrl() + \"/ADD\"\r\n        const apiresponse = await this.http.post(sharedCRUD, inputData).toPromise();\r\n        if (apiresponse)\r\n            return { isapisuccess: true, apidata: apiresponse }\r\n        else\r\n            return { isapisuccess: false, apidata: null }\r\n\r\n    }\r\n    async  executeByUpdate(inputData: any, showload: boolean = true) {\r\n        var sharedCRUD = this.getCRUDSharedUrl() + \"/UPDATE\"\r\n        const apiresponse = await this.http.post(sharedCRUD, inputData).toPromise();\r\n        if (apiresponse)\r\n            return { isapisuccess: true, apidata: apiresponse }\r\n        else\r\n            return { isapisuccess: false, apidata: null }\r\n\r\n    }\r\n    async executeByGet(inputData: any, showload: boolean = true) {\r\n        var sharedCRUD = this.getCRUDSharedUrl() + \"/GET\";\r\n        const apiresponse = await this.http.post(sharedCRUD, inputData).toPromise();\r\n        if (apiresponse)\r\n            return { isapisuccess: true, apidata: apiresponse }\r\n        else\r\n            return { isapisuccess: false, apidata: null }\r\n    }\r\n\r\n    setObject(key: string, obj: any) {\r\n        window.localStorage.setItem(key, JSON.stringify(obj));\r\n    }\r\n\r\n    getObject(key: string) {\r\n        return JSON.parse(window.localStorage.getItem(key));\r\n    }\r\n\r\n    SplitToArray(data: any) {\r\n        var FirstCats = [];\r\n        var SecondCats = [];\r\n        var len = data.length;\r\n        var counter;\r\n        if (len % 2 == 1)\r\n            counter = (len + 1) / 2;\r\n        else\r\n            counter = len / 2;\r\n\r\n        for (var i = 0; i < counter; i++) {\r\n            FirstCats.push(data[i]);\r\n            //console.log(data[i].ItemId);\r\n        }\r\n        for (var j = counter; j < data.length; j++) {\r\n            SecondCats.push(data[j]);\r\n        }\r\n        var imageArray = {\r\n            FirstCats: FirstCats,\r\n            SecondCats: SecondCats\r\n        }\r\n\r\n        return imageArray;\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    ConvertTo2DArray(data: any, colcount: any) {\r\n\r\n        var productList = [];\r\n        var counter = 0;\r\n\r\n        for (var i = 0; i < data.length; i = i + colcount) {\r\n            var row = [];\r\n            for (var j = 0; j < colcount; j++) {\r\n                if (counter >= data.length)\r\n                    break;\r\n                row.push(data[counter]);\r\n                counter++;\r\n            }\r\n            productList.push(row);\r\n        }\r\n        return productList;\r\n    }\r\n\r\n\r\n    SetUpAWS() {\r\n        var albumBucketName = '';\r\n        var bucketRegion = '';\r\n        var IdentityPoolId = ''\r\n\r\n        AWS.config.update({\r\n            region: 'us-west-2',\r\n            credentials: new AWS.CognitoIdentityCredentials({\r\n                IdentityPoolId: IdentityPoolId\r\n            })\r\n        });\r\n\r\n        return new AWS.S3({\r\n            apiVersion: '2006-03-01',\r\n            params: { Bucket: albumBucketName }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    showErrorMessage(title: any, test: any) {\r\n        swal({\r\n            title: title,\r\n            text: test,\r\n            type: 'error',\r\n            confirmButtonClass: 'btn btn-info',\r\n            buttonsStyling: false\r\n        });\r\n    }\r\n    showSuccessMessage(title: any, test: any) {\r\n        swal({\r\n            title: title,\r\n            text: test,\r\n            type: 'success',\r\n            confirmButtonClass: 'btn btn-info',\r\n            buttonsStyling: false\r\n        });\r\n    }\r\n    conformationMessage(text1: any, text2: any) {\r\n        return new Promise(resolve => {\r\n            swal({\r\n                title: text1,\r\n                text: text2,\r\n                type: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonClass: 'btn btn-success',\r\n                cancelButtonClass: 'btn btn-danger',\r\n                confirmButtonText: 'Yes',\r\n                buttonsStyling: false\r\n            }).then(function () {\r\n                resolve(true);\r\n                //cb(true);\r\n                //swal({\r\n                //    title: 'Deleted!',\r\n                //    text: text2,\r\n                //    type: 'success',\r\n                //    confirmButtonClass: 'btn btn-success',\r\n                //    buttonsStyling: false\r\n                //});\r\n            });\r\n        });\r\n    }\r\n\r\n    confirmMessage(text1: any, text2: any) {\r\n        return new Promise(resolve => {\r\n            swal({\r\n                title: text1,\r\n                text: text2,\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonClass: \"btn-danger\",\r\n                confirmButtonText: \"Yes\",\r\n                cancelButtonText: \"No\",\r\n                //closeOnConfirm: false,\r\n                //closeOnCancel: false\r\n            }).then(function () {\r\n                resolve(true);\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n\r\n    getRandomPassword() {\r\n\r\n        var d = new Date().getTime();\r\n        var uuid = 'xxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = (d + Math.random() * 16) % 16 | 0;\r\n            d = Math.floor(d / 16);\r\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n        });\r\n        return uuid;\r\n\r\n    }\r\n\r\n    generateUUID() {\r\n        var d = new Date().getTime();\r\n        var uuid = 'xxxxxxxxxxxxxxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = (d + Math.random() * 16) % 16 | 0;\r\n            d = Math.floor(d / 16);\r\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n        });\r\n        return uuid;\r\n    };\r\n\r\n    getAWSObj() {\r\n        var albumBucketName = 'dolphino';\r\n        var bucketRegion = 'us-west-2';\r\n        var IdentityPoolId = 'us-west-2:ff182092-2a76-489c-9d58-45ba742d9e7d'\r\n\r\n        AWS.config.update({\r\n            region: 'us-west-2',//'us-west-2',\r\n            credentials: new AWS.CognitoIdentityCredentials({\r\n                IdentityPoolId: IdentityPoolId\r\n            })\r\n        });\r\n\r\n        return new AWS.S3({\r\n            apiVersion: '2012-10-17',//'2006-03-01',\r\n            params: { Bucket: albumBucketName }\r\n        });\r\n    }\r\n    logError(exception: any) {\r\n\r\n    }\r\n    getYouTubeVideoIdFromUrl(url) {\r\n        if (url)\r\n            return url.replace(\"https://www.youtube.com/embed/\", \"\");\r\n        else\r\n            return \"ru0K8uYEZWw\";\r\n    }\r\n\r\n    getYouTubePosterByVideoId(url) {\r\n        return \"https://img.youtube.com/vi/\" + this.getYouTubeVideoIdFromUrl(url) + \"/sddefault.jpg\";\r\n    }\r\n\r\n\r\n}\r\nexport enum Keys {\r\n    User\r\n}\r\n"],"sourceRoot":""}